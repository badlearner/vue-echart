//>>built
require({cache:{"esri/layers/unitBezier":function(){define([],function(){var a=function(b,c,e,f){function a(b,c){var e,f,a,g,n;c=null==c?1E-6:c;a=b;for(n=0;8>n;n++){if(g=((k*a+d)*a+h)*a-b,Math.abs(g)<c)return a;if(f=(3*k*a+2*d)*a+h,1E-6>Math.abs(f))break;a-=g/f}if(e=0,f=1,a=b,e>a)return e;if(a>f)return f;for(;f>e&&!(g=((k*a+d)*a+h)*a,Math.abs(g-b)<c);)b>g?e=a:f=a,a=.5*(f-e)+e;return a}var h=3*b,d=3*(e-b)-h,k=1-h-d,m=3*c,q=3*(f-c)-m,l=1-m-q;return function(b,c){var e=a(b,c);return((l*e+q)*e+m)*e}},
d=/^cubic-bezier\((.*)\)/;return a.parse=function(b){var c=a[b]||null;!c&&(b=d.exec(b))&&(b=b[1].split(",").map(function(b){return parseFloat(b.trim())}),4!==b.length||b.some(function(b){return isNaN(b)})||(c=a.apply(a,b)));return c},a.ease=a(.25,.1,.25,1),a.linear=a(0,0,1,1),a.easeIn=a["ease-in"]=a(.42,0,1,1),a.easeOut=a["ease-out"]=a(0,0,.58,1),a.easeInOut=a["ease-in-out"]=a(.42,0,.58,1),a})},"esri/layers/vectorTiles/request":function(){define(["require","exports","esri/request","dojo/_base/lang"],
function(a,d,b,c){return function(e,f){var a=c.mixin({},{url:e,failOk:!0},f);return"array-buffer"===f.responseType?(a.handleAs="arraybuffer",delete a.responseType):f.responseType&&(a.handleAs=f.responseType,delete a.responseType),null!==f.query&&(a.content=a.query,delete a.query),b(a).then(function(b){return{data:b}})}})},"esri/layers/vectorTiles/core/promiseUtils":function(){define("require exports dojo/Deferred dojo/promise/all dojo/when ./Error".split(" "),function(a,d,b,c,e,f){function g(c){if(c){if("function"!=
typeof c.forEach){var e=Object.keys(c),f=e.map(function(b){return c[b]});return g(f).then(function(b){var c={};return e.forEach(function(e,f){return c[e]=b[f]}),c})}var a=new b,h=[],d=c.length;return 0===d&&a.resolve(h),c.forEach(function(b){var c={promise:b};h.push(c);b.then(function(b){c.value=b}).otherwise(function(b){c.error=b}).then(function(){--d;0===d&&a.resolve(h)})}),a.promise}}Object.defineProperty(d,"__esModule",{value:!0});d.all=function(b){return c(b)};d.filter=function(b,e){var f=b.slice();
return c(b.map(function(b,c){return e(b,c)})).then(function(b){return f.filter(function(c,e){return b[e]})})};d.eachAlways=g;d.create=function(c,f){var a=new b(f);return c(function(b){return void 0===b&&(b=null),e(b).then(a.resolve)},a.reject),a.promise};d.reject=function(c){var e=new b;return e.reject(c),e.promise};d.resolve=function(c){void 0===c&&(c=null);var e=new b;return e.resolve(c),e.promise};d.after=function(c,e){void 0===e&&(e=null);var f=0,a=new b(function(){f&&(clearTimeout(f),f=0)});
return f=setTimeout(function(){a.resolve(e)},c),a.promise};d.timeout=function(c,e,a){var g=0,h=new b(c.cancel);return c.then(function(b){h.isFulfilled()||(h.resolve(b),g&&(clearTimeout(g),g=0))}),c.otherwise(function(b){h.isFulfilled()||(h.reject(b),g&&(clearTimeout(g),g=0))}),g=setTimeout(function(){var b=a||new f("promiseUtils:timeout","The wrapped promise did not resolve within "+e+" ms");h.reject(b)},e),h.promise};d.wrapCallback=function(c){var e=!1,f=new b(function(){return e=!0});return c(function(b){e||
f.resolve(b)}),f.promise};d.isThenable=function(b){return b&&"function"==typeof b.then};d.when=function(b){return e(b)}})},"esri/layers/vectorTiles/core/Error":function(){define(["require","exports","./tsSupport/extendsHelper","./Message","./lang"],function(a,d,b,c,e){a=function(c){function f(b,e,a){var g=c.call(this,b,e,a)||this;return g instanceof f?g:new f(b,e,a)}return b(f,c),f.prototype.toJSON=function(){return{name:this.name,message:this.message,details:e.clone(this.details),dojoType:this.dojoType}},
f.fromJSON=function(b){var c=new f(b.name,b.message,b.details);return c.dojoType=b.dojoType,c},f}(c);return a.prototype.type="error",a})},"esri/layers/vectorTiles/core/tsSupport/extendsHelper":function(){define([],function(){return function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(d,b){function c(){this.constructor=d}a(d,b);d.prototype=null===b?Object.create(b):(c.prototype=
b.prototype,new c)}}()})},"esri/layers/vectorTiles/core/Message":function(){define(["require","exports","dojo/string"],function(a,d,b){return function(){function c(e,f,a){this instanceof c&&(this.name=e,this.message=f&&b.substitute(f,a,function(b){return null==b?"":b})||"",this.details=a)}return c.prototype.toString=function(){return"["+this.name+"]: "+this.message},c}()})},"esri/layers/vectorTiles/core/lang":function(){define("dojo/_base/array dojo/_base/kernel dojo/_base/lang dojo/date dojo/number dojo/date/locale dojo/i18n!../nls/common".split(" "),
function(a,d,b,c,e,f,g){function h(b){return void 0!==b&&null!==b}function n(b){return h(b)?b:""}function k(g,d,k){var m,q=k.match(/([^\(]+)(\([^\)]+\))?/i),p=b.trim(q[1]);k=d[g];var q=JSON.parse((q[2]?b.trim(q[2]):"{}").replace(/^\(/,"{").replace(/\)$/,"}").replace(/([{,])\s*([0-9a-zA-Z\_]+)\s*:/gi,'$1"$2":').replace(/\"\s*:\s*\'/gi,'":"').replace(/\'\s*(,|\})/gi,'"$1')),u=q.utcOffset;if(-1===a.indexOf(l,p))m=b.getObject(p),b.isFunction(m)&&(k=m(k,g,d,q));else if("number"==typeof k||"string"==typeof k&&
k&&!isNaN(Number(k)))switch(k=Number(k),p){case "NumberFormat":return g=b.mixin({},q),d=parseFloat(g.places),(isNaN(d)||0>d)&&(g.places=1/0),e.format(k,g);case "DateString":return m=new Date(k),q.local||q.systemLocale?q.systemLocale?m.toLocaleDateString()+(q.hideTime?"":" "+m.toLocaleTimeString()):m.toDateString()+(q.hideTime?"":" "+m.toTimeString()):(m=m.toUTCString(),q.hideTime&&(m=m.replace(/\s+\d\d\:\d\d\:\d\d\s+(utc|gmt)/i,"")),m);case "DateFormat":return m=new Date(k),h(u)&&(m=c.add(m,"minute",
m.getTimezoneOffset()-u)),f.format(m,q)}return n(k)}function m(b,c){var e;if(c)for(e in b)b.hasOwnProperty(e)&&(void 0===b[e]?delete b[e]:b[e]instanceof Object&&m(b[e],!0));else for(e in b)b.hasOwnProperty(e)&&void 0===b[e]&&delete b[e];return b}function q(c){if(!c||"object"!=typeof c||b.isFunction(c))return c;if("function"==typeof c.clone)c=c.clone();else if("function"==typeof c.map&&"function"==typeof c.forEach)c=c.map(q);else{var e={},f,a,g={};for(f in c){a=c[f];var h=!(f in g)||g[f]!==a;f in e&&
(e[f]===a||!h)||(e[f]=q?q(a):a)}c=e}return c}var l=["NumberFormat","DateString","DateFormat"],p=/<\/?[^>]+>/g;return{equals:function(c,e){return c===e||"number"==typeof c&&isNaN(c)&&"number"==typeof e&&isNaN(e)||b.isFunction((c||{}).getTime)&&b.isFunction((e||{}).getTime)&&c.getTime()==e.getTime()||b.isFunction((c||{}).equals)&&c.equals(e)||b.isFunction((e||{}).equals)&&e.equals(c)||!1},valueOf:function(b,c){for(var e in b)if(b[e]==c)return e;return null},stripTags:function(b){if(b){var c=typeof b;
if("string"===c)b=b.replace(p,"");else if("object"===c)for(var e in b)(c=b[e])&&"string"==typeof c&&(c=c.replace(p,"")),b[e]=c}return b},substitute:function(c,e,f){var d,l,m;if(h(f)&&(b.isObject(f)?(d=f.first,l=f.dateFormat,m=f.numberFormat):d=f),e&&"{*}"!==e)return b.replace(e,b.hitch({obj:c},function(b,c){var e=c.split(":");return 1<e.length?(c=e[0],e.shift(),k(c,this.obj,e.join(":"))):l&&-1!==a.indexOf(l.properties||"",c)?k(c,this.obj,l.formatter||"DateString"):m&&-1!==a.indexOf(m.properties||
"",c)?k(c,this.obj,m.formatter||"NumberFormat"):n(this.obj[c])}));var q,p;e=[];e.push('\x3ctable summary\x3d"'+g.fieldsSummary+'"\x3e\x3ctbody\x3e');for(p in c)if(q=c[p],l&&-1!==a.indexOf(l.properties||"",p)?q=k(p,c,l.formatter||"DateString"):m&&-1!==a.indexOf(m.properties||"",p)&&(q=k(p,c,m.formatter||"NumberFormat")),e.push("\x3ctr\x3e\x3cth\x3e"+p+"\x3c/th\x3e\x3ctd\x3e"+n(q)+"\x3c/td\x3e\x3c/tr\x3e"),d)break;return e.push("\x3c/tbody\x3e\x3c/table\x3e"),e.join("")},filter:function(c,e,f){var a;
e=[b.isString(c)?c.split(""):c,f||d.global,b.isString(e)?new Function("item","index","array",e):e];f={};c=e[0];for(a in c)e[2].call(e[a],c[a],a,c)&&(f[a]=c[a]);return f},startsWith:function(b,c,e){return e=e||0,b.indexOf(c,e)===e},endsWith:function(b,c,e){("number"!=typeof e||!isFinite(e)||Math.floor(e)!==e||e>b.length)&&(e=b.length);e-=c.length;b=b.indexOf(c,e);return-1!==b&&b===e},isDefined:h,fixJson:m,clone:q}})},"esri/layers/vectorTiles/nls/common":function(){define({root:{}})},"esri/layers/vectorTiles/core/urlUtils":function(){define(["require",
"exports","esri/urlUtils","dojo/_base/url"],function(a,d,b,c){function e(b){return f(b)||m.test(b)}function f(b){return b&&"/"===b[0]&&"/"===b[1]}function g(b){return"string"==typeof b?new c(h(b)):(b.scheme||(b.scheme=d.appUrl.scheme),b)}function h(b,c){void 0===c&&(c=d.appBaseUrl);var e;if(f(b))e="file"===d.appUrl.scheme?"https:"+b:d.appUrl.scheme+":"+b;else if(m.test(b))e=b;else{e=n;var a;if("/"===b[0]){a=c;var g=a.indexOf("//"),g=a.indexOf("/",g+2);a=-1===g?a:a.slice(0,g)}else a=c;e=e(a,b)}return e}
function n(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];if(b&&b.length){c=[];if(e(b[0])){var f=b[0],a=f.indexOf("//");c.push(f.slice(0,a+1));k.test(b[0])&&(c[0]+="/");b[0]=f.slice(a+2)}else"/"===b[0][0]&&c.push("");b=b.reduce(function(b,c){return b.concat(c.split("/"))},[]);for(f=0;f<b.length;f++)a=b[f],".."===a&&0<c.length?c.pop():!a||"."===a&&0!==c.length||c.push(a);return c.join("/")}}Object.defineProperty(d,"__esModule",{value:!0});d.normalize=function(c){return b.normalize(c)};
d.canUseXhr=function(c){return b.canUseXhr(c)};a=Function("return this")();d.appUrl=new c(a.location);d.appBaseUrl=function(){var b=d.appUrl.path,b=b.substring(0,b.lastIndexOf(b.split("/")[b.split("/").length-1]));return""+(d.appUrl.scheme+"://"+d.appUrl.host+(null!=d.appUrl.port?":"+d.appUrl.port:""))+b}();var k=/^\s*file:/i,m=/^\s*[a-z][a-z0-9-+.]*:[^0-9]/i;d.isAbsolute=e;d.urlToObject=function(c){return b.urlToObject(c)};d.getOrigin=function(b){if("data:"===b.slice(0,5))return null;var c=b.indexOf("://");
if(-1===c&&f(b))c=2;else{if(-1===c)return null;c+=3}c=b.indexOf("/",c);return-1===c?b:b.slice(0,c)};d.makeAbsolute=h;d.hasSameOrigin=function(b,c,e){void 0===e&&(e=!1);b=g(b);c=g(c);return e||b.scheme===c.scheme?b.host.toLowerCase()===c.host.toLowerCase()&&b.port===c.port:!1};d.join=n})},"esri/layers/vectorTiles/geometry/support/spatialReferenceUtils":function(){define(["require","exports","./WKIDUnitConversion"],function(a,d,b){Object.defineProperty(d,"__esModule",{value:!0});d.isGeographic=function(c){return c.wkid?
null==b[c.wkid]:c.wkt?!!/^\s*GEOGCS/i.test(c.wkt):!1};d.getInfo=function(b){return b.wkid?c[b.wkid]:null};a=[-2.0037508342788905E7,2.0037508342788905E7];d=[-2.0037508342787E7,2.0037508342787E7];var c={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:a,origin:d,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:a,origin:d,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:a,origin:d,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:a,origin:d,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}}})},"esri/layers/vectorTiles/geometry/support/WKIDUnitConversion":function(){define([],function(){var a,d={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.116756,5E4,15E4],units:"Meter Foot Foot_US Foot_Clarke Yard_Clarke Link_Clarke Yard_Sears Foot_Sears Chain_Sears Chain_Benoit_1895_B Yard_Indian Yard_Indian_1937 Foot_Gold_Coast Chain_Sears_1922_Truncated 50_Kilometers 150_Kilometers".split(" "),
2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,
3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,
3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,
3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,
5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,
6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,
6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,
6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,
6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,
7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,
7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8058:0,8059:0,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,
8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,
26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53034:0,53048:0,53049:0,
54034:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,
103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,
103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,
103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,
103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103695:2};for(a=2E3;2045>=a;a++)d[a]=0;for(a=2056;2065>=a;a++)d[a]=0;for(a=2067;2135>=a;a++)d[a]=0;for(a=2137;2154>=a;a++)d[a]=0;for(a=2161;2170>=a;a++)d[a]=0;for(a=2172;2193>=a;a++)d[a]=0;for(a=2195;2198>=a;a++)d[a]=0;for(a=2200;2203>=a;a++)d[a]=0;for(a=2205;2217>=a;a++)d[a]=0;for(a=2222;2224>=a;a++)d[a]=1;for(a=2225;2250>=a;a++)d[a]=2;
for(a=2251;2253>=a;a++)d[a]=1;for(a=2257;2264>=a;a++)d[a]=2;for(a=2274;2279>=a;a++)d[a]=2;for(a=2280;2282>=a;a++)d[a]=1;for(a=2283;2289>=a;a++)d[a]=2;for(a=2290;2292>=a;a++)d[a]=0;for(a=2308;2313>=a;a++)d[a]=0;for(a=2315;2491>=a;a++)d[a]=0;for(a=2494;2866>=a;a++)d[a]=0;for(a=2867;2869>=a;a++)d[a]=1;for(a=2870;2888>=a;a++)d[a]=2;for(a=2891;2895>=a;a++)d[a]=2;for(a=2896;2898>=a;a++)d[a]=1;for(a=2902;2908>=a;a++)d[a]=2;for(a=2915;2920>=a;a++)d[a]=2;for(a=2921;2923>=a;a++)d[a]=1;for(a=2924;2930>=a;a++)d[a]=
2;for(a=2931;2962>=a;a++)d[a]=0;for(a=2964;2968>=a;a++)d[a]=2;for(a=2969;2973>=a;a++)d[a]=0;for(a=2975;2991>=a;a++)d[a]=0;for(a=2995;3051>=a;a++)d[a]=0;for(a=3054;3079>=a;a++)d[a]=0;for(a=3081;3088>=a;a++)d[a]=0;for(a=3092;3101>=a;a++)d[a]=0;for(a=3106;3138>=a;a++)d[a]=0;for(a=3146;3151>=a;a++)d[a]=0;for(a=3153;3166>=a;a++)d[a]=0;for(a=3168;3172>=a;a++)d[a]=0;for(a=3174;3203>=a;a++)d[a]=0;for(a=3294;3358>=a;a++)d[a]=0;for(a=3367;3403>=a;a++)d[a]=0;for(a=3408;3416>=a;a++)d[a]=0;for(a=3417;3438>=a;a++)d[a]=
2;for(a=3441;3446>=a;a++)d[a]=2;for(a=3447;3450>=a;a++)d[a]=0;for(a=3451;3459>=a;a++)d[a]=2;for(a=3460;3478>=a;a++)d[a]=0;for(a=3554;3559>=a;a++)d[a]=0;for(a=3560;3570>=a;a++)d[a]=2;for(a=3571;3581>=a;a++)d[a]=0;for(a=3594;3597>=a;a++)d[a]=0;for(a=3601;3604>=a;a++)d[a]=0;for(a=3637;3639>=a;a++)d[a]=0;for(a=3665;3667>=a;a++)d[a]=0;for(a=3693;3695>=a;a++)d[a]=0;for(a=3701;3727>=a;a++)d[a]=0;for(a=3728;3739>=a;a++)d[a]=2;for(a=3740;3751>=a;a++)d[a]=0;for(a=3753;3760>=a;a++)d[a]=2;for(a=3761;3773>=a;a++)d[a]=
0;for(a=3775;3777>=a;a++)d[a]=0;for(a=3779;3781>=a;a++)d[a]=0;for(a=3783;3785>=a;a++)d[a]=0;for(a=3788;3791>=a;a++)d[a]=0;for(a=3797;3802>=a;a++)d[a]=0;for(a=3814;3816>=a;a++)d[a]=0;for(a=3825;3829>=a;a++)d[a]=0;for(a=3832;3841>=a;a++)d[a]=0;for(a=3844;3852>=a;a++)d[a]=0;for(a=3873;3885>=a;a++)d[a]=0;for(a=3890;3893>=a;a++)d[a]=0;for(a=3907;3912>=a;a++)d[a]=0;for(a=3942;3950>=a;a++)d[a]=0;for(a=3968;3970>=a;a++)d[a]=0;for(a=3973;3976>=a;a++)d[a]=0;for(a=3986;3989>=a;a++)d[a]=0;for(a=3994;3997>=a;a++)d[a]=
0;for(a=4048;4051>=a;a++)d[a]=0;for(a=4056;4063>=a;a++)d[a]=0;for(a=4093;4096>=a;a++)d[a]=0;for(a=4390;4398>=a;a++)d[a]=0;for(a=4399;4413>=a;a++)d[a]=2;for(a=4418;4433>=a;a++)d[a]=2;for(a=4455;4457>=a;a++)d[a]=2;for(a=4484;4489>=a;a++)d[a]=0;for(a=4491;4554>=a;a++)d[a]=0;for(a=4568;4589>=a;a++)d[a]=0;for(a=4652;4656>=a;a++)d[a]=0;for(a=4766;4800>=a;a++)d[a]=0;for(a=5014;5016>=a;a++)d[a]=0;for(a=5069;5072>=a;a++)d[a]=0;for(a=5105;5130>=a;a++)d[a]=0;for(a=5173;5188>=a;a++)d[a]=0;for(a=5253;5259>=a;a++)d[a]=
0;for(a=5269;5275>=a;a++)d[a]=0;for(a=5292;5311>=a;a++)d[a]=0;for(a=5329;5331>=a;a++)d[a]=0;for(a=5343;5349>=a;a++)d[a]=0;for(a=5355;5357>=a;a++)d[a]=0;for(a=5387;5389>=a;a++)d[a]=0;for(a=5459;5463>=a;a++)d[a]=0;for(a=5479;5482>=a;a++)d[a]=0;for(a=5518;5520>=a;a++)d[a]=0;for(a=5530;5539>=a;a++)d[a]=0;for(a=5550;5552>=a;a++)d[a]=0;for(a=5562;5583>=a;a++)d[a]=0;for(a=5623;5625>=a;a++)d[a]=2;for(a=5631;5639>=a;a++)d[a]=0;for(a=5649;5653>=a;a++)d[a]=0;for(a=5663;5680>=a;a++)d[a]=0;for(a=5682;5685>=a;a++)d[a]=
0;for(a=5875;5877>=a;a++)d[a]=0;for(a=5921;5940>=a;a++)d[a]=0;for(a=6050;6125>=a;a++)d[a]=0;for(a=6244;6275>=a;a++)d[a]=0;for(a=6328;6348>=a;a++)d[a]=0;for(a=6350;6356>=a;a++)d[a]=0;for(a=6366;6372>=a;a++)d[a]=0;for(a=6381;6387>=a;a++)d[a]=0;for(a=6393;6404>=a;a++)d[a]=0;for(a=6480;6483>=a;a++)d[a]=0;for(a=6511;6514>=a;a++)d[a]=0;for(a=6579;6581>=a;a++)d[a]=0;for(a=6619;6624>=a;a++)d[a]=0;for(a=6625;6627>=a;a++)d[a]=2;for(a=6628;6632>=a;a++)d[a]=0;for(a=6634;6637>=a;a++)d[a]=0;for(a=6669;6692>=a;a++)d[a]=
0;for(a=6707;6709>=a;a++)d[a]=0;for(a=6720;6723>=a;a++)d[a]=0;for(a=6732;6738>=a;a++)d[a]=0;for(a=6931;6933>=a;a++)d[a]=0;for(a=6956;6959>=a;a++)d[a]=0;for(a=7005;7007>=a;a++)d[a]=0;for(a=7057;7070>=a;a++)d[a]=2;for(a=7074;7082>=a;a++)d[a]=0;for(a=7109;7118>=a;a++)d[a]=0;for(a=7119;7127>=a;a++)d[a]=1;for(a=7374;7376>=a;a++)d[a]=0;for(a=7528;7586>=a;a++)d[a]=0;for(a=7587;7645>=a;a++)d[a]=2;for(a=7755;7787>=a;a++)d[a]=0;for(a=7791;7795>=a;a++)d[a]=0;for(a=7799;7801>=a;a++)d[a]=0;for(a=7803;7805>=a;a++)d[a]=
0;for(a=7825;7831>=a;a++)d[a]=0;for(a=7845;7859>=a;a++)d[a]=0;for(a=8013;8032>=a;a++)d[a]=0;for(a=20002;20032>=a;a++)d[a]=0;for(a=20062;20092>=a;a++)d[a]=0;for(a=20135;20138>=a;a++)d[a]=0;for(a=20248;20258>=a;a++)d[a]=0;for(a=20348;20358>=a;a++)d[a]=0;for(a=20436;20440>=a;a++)d[a]=0;for(a=20822;20824>=a;a++)d[a]=0;for(a=20934;20936>=a;a++)d[a]=0;for(a=21035;21037>=a;a++)d[a]=0;for(a=21095;21097>=a;a++)d[a]=0;for(a=21148;21150>=a;a++)d[a]=0;for(a=21413;21423>=a;a++)d[a]=0;for(a=21473;21483>=a;a++)d[a]=
0;for(a=21780;21782>=a;a++)d[a]=0;for(a=21891;21894>=a;a++)d[a]=0;for(a=21896;21899>=a;a++)d[a]=0;for(a=22171;22177>=a;a++)d[a]=0;for(a=22181;22187>=a;a++)d[a]=0;for(a=22191;22197>=a;a++)d[a]=0;for(a=22234;22236>=a;a++)d[a]=0;for(a=22521;22525>=a;a++)d[a]=0;for(a=22991;22994>=a;a++)d[a]=0;for(a=23028;23038>=a;a++)d[a]=0;for(a=23830;23853>=a;a++)d[a]=0;for(a=23866;23872>=a;a++)d[a]=0;for(a=23877;23884>=a;a++)d[a]=0;for(a=23886;23894>=a;a++)d[a]=0;for(a=23946;23948>=a;a++)d[a]=0;for(a=24311;24313>=
a;a++)d[a]=0;for(a=24342;24347>=a;a++)d[a]=0;for(a=24370;24374>=a;a++)d[a]=10;for(a=24375;24381>=a;a++)d[a]=0;for(a=24718;24721>=a;a++)d[a]=0;for(a=24817;24821>=a;a++)d[a]=0;for(a=24877;24882>=a;a++)d[a]=0;for(a=24891;24893>=a;a++)d[a]=0;for(a=25391;25395>=a;a++)d[a]=0;for(a=25828;25838>=a;a++)d[a]=0;for(a=26191;26195>=a;a++)d[a]=0;for(a=26391;26393>=a;a++)d[a]=0;for(a=26701;26722>=a;a++)d[a]=0;for(a=26729;26799>=a;a++)d[a]=2;for(a=26801;26803>=a;a++)d[a]=2;for(a=26811;26813>=a;a++)d[a]=2;for(a=26847;26870>=
a;a++)d[a]=2;for(a=26891;26899>=a;a++)d[a]=0;for(a=26901;26923>=a;a++)d[a]=0;for(a=26929;26946>=a;a++)d[a]=0;for(a=26948;26998>=a;a++)d[a]=0;for(a=27037;27040>=a;a++)d[a]=0;for(a=27205;27232>=a;a++)d[a]=0;for(a=27258;27260>=a;a++)d[a]=0;for(a=27391;27398>=a;a++)d[a]=0;for(a=27561;27564>=a;a++)d[a]=0;for(a=27571;27574>=a;a++)d[a]=0;for(a=27581;27584>=a;a++)d[a]=0;for(a=27591;27594>=a;a++)d[a]=0;for(a=28191;28193>=a;a++)d[a]=0;for(a=28348;28358>=a;a++)d[a]=0;for(a=28402;28432>=a;a++)d[a]=0;for(a=28462;28492>=
a;a++)d[a]=0;for(a=29118;29122>=a;a++)d[a]=0;for(a=29168;29172>=a;a++)d[a]=0;for(a=29177;29185>=a;a++)d[a]=0;for(a=29187;29195>=a;a++)d[a]=0;for(a=29900;29903>=a;a++)d[a]=0;for(a=30161;30179>=a;a++)d[a]=0;for(a=30491;30494>=a;a++)d[a]=0;for(a=30729;30732>=a;a++)d[a]=0;for(a=31251;31259>=a;a++)d[a]=0;for(a=31265;31268>=a;a++)d[a]=0;for(a=31275;31279>=a;a++)d[a]=0;for(a=31281;31297>=a;a++)d[a]=0;for(a=31461;31469>=a;a++)d[a]=0;for(a=31491;31495>=a;a++)d[a]=0;for(a=31917;31922>=a;a++)d[a]=0;for(a=31965;32E3>=
a;a++)d[a]=0;for(a=32001;32003>=a;a++)d[a]=2;for(a=32005;32031>=a;a++)d[a]=2;for(a=32033;32060>=a;a++)d[a]=2;for(a=32064;32067>=a;a++)d[a]=2;for(a=32074;32077>=a;a++)d[a]=2;for(a=32081;32086>=a;a++)d[a]=0;for(a=32107;32130>=a;a++)d[a]=0;for(a=32133;32158>=a;a++)d[a]=0;for(a=32164;32167>=a;a++)d[a]=2;for(a=32180;32199>=a;a++)d[a]=0;for(a=32201;32260>=a;a++)d[a]=0;for(a=32301;32360>=a;a++)d[a]=0;for(a=32601;32662>=a;a++)d[a]=0;for(a=32664;32667>=a;a++)d[a]=2;for(a=32701;32761>=a;a++)d[a]=0;for(a=53001;53004>=
a;a++)d[a]=0;for(a=53008;53019>=a;a++)d[a]=0;for(a=53021;53032>=a;a++)d[a]=0;for(a=53042;53046>=a;a++)d[a]=0;for(a=53074;53080>=a;a++)d[a]=0;for(a=54001;54004>=a;a++)d[a]=0;for(a=54008;54019>=a;a++)d[a]=0;for(a=54021;54032>=a;a++)d[a]=0;for(a=54042;54046>=a;a++)d[a]=0;for(a=54048;54053>=a;a++)d[a]=0;for(a=54074;54080>=a;a++)d[a]=0;for(a=102001;102040>=a;a++)d[a]=0;for(a=102042;102063>=a;a++)d[a]=0;for(a=102065;102067>=a;a++)d[a]=0;for(a=102070;102117>=a;a++)d[a]=0;for(a=102122;102216>=a;a++)d[a]=
0;for(a=102221;102377>=a;a++)d[a]=0;for(a=102382;102388>=a;a++)d[a]=0;for(a=102389;102398>=a;a++)d[a]=2;for(a=102399;102444>=a;a++)d[a]=0;for(a=102445;102447>=a;a++)d[a]=2;for(a=102448;102458>=a;a++)d[a]=0;for(a=102459;102468>=a;a++)d[a]=2;for(a=102469;102496>=a;a++)d[a]=0;for(a=102500;102519>=a;a++)d[a]=1;for(a=102520;102524>=a;a++)d[a]=0;for(a=102525;102529>=a;a++)d[a]=2;for(a=102530;102568>=a;a++)d[a]=0;for(a=102570;102588>=a;a++)d[a]=0;for(a=102590;102598>=a;a++)d[a]=0;for(a=102601;102603>=a;a++)d[a]=
0;for(a=102605;102628>=a;a++)d[a]=0;for(a=102629;102646>=a;a++)d[a]=2;for(a=102648;102700>=a;a++)d[a]=2;for(a=102701;102703>=a;a++)d[a]=0;for(a=102707;102730>=a;a++)d[a]=2;for(a=102733;102758>=a;a++)d[a]=2;for(a=102767;102900>=a;a++)d[a]=0;for(a=102965;102969>=a;a++)d[a]=0;for(a=102971;102973>=a;a++)d[a]=0;for(a=102975;102989>=a;a++)d[a]=0;for(a=102990;102992>=a;a++)d[a]=1;for(a=102997;103002>=a;a++)d[a]=0;for(a=103003;103008>=a;a++)d[a]=2;for(a=103009;103011>=a;a++)d[a]=0;for(a=103012;103014>=a;a++)d[a]=
2;for(a=103019;103021>=a;a++)d[a]=0;for(a=103022;103024>=a;a++)d[a]=2;for(a=103029;103031>=a;a++)d[a]=0;for(a=103032;103034>=a;a++)d[a]=2;for(a=103065;103068>=a;a++)d[a]=0;for(a=103074;103076>=a;a++)d[a]=0;for(a=103077;103079>=a;a++)d[a]=1;for(a=103080;103082>=a;a++)d[a]=0;for(a=103083;103085>=a;a++)d[a]=2;for(a=103090;103093>=a;a++)d[a]=0;for(a=103097;103099>=a;a++)d[a]=0;for(a=103100;103102>=a;a++)d[a]=2;for(a=103107;103109>=a;a++)d[a]=0;for(a=103110;103112>=a;a++)d[a]=2;for(a=103113;103116>=a;a++)d[a]=
0;for(a=103117;103120>=a;a++)d[a]=2;for(a=103153;103157>=a;a++)d[a]=0;for(a=103158;103162>=a;a++)d[a]=2;for(a=103163;103165>=a;a++)d[a]=0;for(a=103166;103168>=a;a++)d[a]=1;for(a=103169;103171>=a;a++)d[a]=2;for(a=103186;103188>=a;a++)d[a]=0;for(a=103189;103191>=a;a++)d[a]=2;for(a=103192;103195>=a;a++)d[a]=0;for(a=103196;103199>=a;a++)d[a]=2;for(a=103200;103224>=a;a++)d[a]=0;for(a=103225;103227>=a;a++)d[a]=1;for(a=103232;103237>=a;a++)d[a]=0;for(a=103238;103243>=a;a++)d[a]=2;for(a=103244;103246>=a;a++)d[a]=
0;for(a=103247;103249>=a;a++)d[a]=2;for(a=103254;103256>=a;a++)d[a]=0;for(a=103257;103259>=a;a++)d[a]=2;for(a=103264;103266>=a;a++)d[a]=0;for(a=103267;103269>=a;a++)d[a]=2;for(a=103300;103375>=a;a++)d[a]=0;for(a=103381;103383>=a;a++)d[a]=0;for(a=103384;103386>=a;a++)d[a]=1;for(a=103387;103389>=a;a++)d[a]=0;for(a=103390;103392>=a;a++)d[a]=2;for(a=103397;103399>=a;a++)d[a]=0;for(a=103400;103471>=a;a++)d[a]=2;for(a=103476;103478>=a;a++)d[a]=0;for(a=103479;103481>=a;a++)d[a]=2;for(a=103486;103488>=a;a++)d[a]=
0;for(a=103489;103491>=a;a++)d[a]=2;for(a=103492;103495>=a;a++)d[a]=0;for(a=103496;103499>=a;a++)d[a]=2;for(a=103528;103543>=a;a++)d[a]=0;for(a=103544;103548>=a;a++)d[a]=2;for(a=103549;103551>=a;a++)d[a]=0;for(a=103552;103554>=a;a++)d[a]=1;for(a=103555;103557>=a;a++)d[a]=2;for(a=103558;103560>=a;a++)d[a]=0;for(a=103571;103573>=a;a++)d[a]=0;for(a=103574;103576>=a;a++)d[a]=2;for(a=103577;103580>=a;a++)d[a]=0;for(a=103581;103583>=a;a++)d[a]=2;for(a=103600;103694>=a;a++)d[a]=0;for(a=103700;103793>=a;a++)d[a]=
2;for(a=103794;103871>=a;a++)d[a]=0;for(a=103900;103971>=a;a++)d[a]=2;return d})},"esri/layers/vectorTiles/layers/support/vectorTileLayerLoader":function(){define("require exports dojo/has dojo/_base/lang ../../core/promiseUtils ../../core/urlUtils ../../config ../../request".split(" "),function(a,d,b,c,e,f,g,h){function n(b){if(b){var c=f.getOrigin(b);return f.canUseXhr(c)||-1!==t.indexOf(c)||t.push(c),b}}function k(b,c,e){if(null!=c.sources){e&&-1!==e.path.indexOf("root.json")&&(e.path=e.path.substr(0,
e.path.indexOf("root.json")),b.styleUrl=e.path);var a=l(c,e),g=c.sprite||null,h=c.glyphs||null,a=e&&e.path||a&&a.url;return a&&(c.sprite&&!f.isAbsolute(c.sprite)&&(g=f.normalize(f.join(a,c.sprite))),c.glyphs&&!f.isAbsolute(c.glyphs)&&(h=f.normalize(f.join(a,c.glyphs)))),b.style=c,b.spriteUrl=g,b.glyphsUrl=h,q(b,c,e)}return c.hasOwnProperty("tileInfo")?(b.layerDefinition=c,b.serviceUrl=e.path,m(b,c,e)):void 0}function m(b,c,e){if(u&&!c.hasOwnProperty("defaultStyles"))throw Error("Service definition must have 'defaultStyles' element!");
c=c.defaultStyles;return f.isAbsolute(c)?b.styleUrl=f.normalize(c):b.styleUrl=f.normalize(f.join(e.path,c)),n(b.styleUrl),h(f.join(b.styleUrl,"root.json"),{responseType:"json"}).then(function(c){var e=c.data.sprite||null,a=c.data.glyphs||null;return e&&!f.isAbsolute(e)&&(e=f.normalize(f.join(b.styleUrl,e))),a&&!f.isAbsolute(a)&&(a=f.normalize(f.join(b.styleUrl,a))),b.spriteUrl=e,b.glyphsUrl=a,b.style=c.data,c.data})}function q(b,c,a){c=l(c,a);return c||e.reject("Source isn't available in the syle object!"),
c.url?(b.serviceUrl=c.url,f.isAbsolute(b.serviceUrl)||(b.serviceUrl=f.join(a.path,b.serviceUrl)),n(b.serviceUrl),h(b.serviceUrl,{query:{f:"json"},responseType:"json"}).then(function(c){return b.layerDefinition=p(c.data),b})):(b.layerDefinition=p(c),e.resolve(b))}function l(b,c){if(!b.sources)return null;var e=b.sources,a=null;if(e.esri){if(a=e.esri,c&&a.url&&!f.isAbsolute(a.url))e=c.path.substring(0,c.path.lastIndexOf("/")),a.url=f.join(e,a.url)}else{for(var g=0,h=Object.keys(e);g<h.length;g++){var d=
h[g];if(-1!==d.toLocaleLowerCase().indexOf("street")&&"vector"===a.type){a=e[d];break}}if(!a)for(g=0,h=Object.keys(e);g<h.length&&(d=h[g],a=e[d],"vector"!==a.type);g++);}return a}function p(b){if(b.hasOwnProperty("tileInfo"))return b;for(var c={xmin:-2.0037507067161843E7,ymin:-2.0037507067161843E7,xmax:2.0037507067161843E7,ymax:2.0037507067161843E7,spatialReference:{wkid:102100}},e=(c.xmax-c.xmin)/512,f=[],a=b.hasOwnProperty("minzoom")?parseFloat(b.minzoom):0,g=b.hasOwnProperty("maxzoom")?parseFloat(b.maxzoom):
16;g>a;a++){var h=e/Math.pow(2,a);f.push({level:a,scale:Math.floor(3779.527559055118*h),resolution:h})}return b.tiles.forEach(n),{capabilities:"TilesOnly",initialExtent:c,fullExtent:c,minScale:f[0].scale,maxScale:f[f.length-1].scale,tiles:b.tiles,tileInfo:{rows:512,cols:512,dpi:96,format:"pbf",origin:{x:-2.0037508342787E7,y:2.0037508342787E7},lods:f,spatialReference:{wkid:102100}}}}Object.defineProperty(d,"__esModule",{value:!0});var u=b("dojo-debug-messages"),t=g.defaults&&g.defaults.io.corsEnabledServers||
g.request.corsEnabledServers;d.loadMetadata=function(b){if(!b)return e.reject("invalid input URL!");var a={layerDefinition:null,parsedUrl:null,serviceUrl:null,style:null,styleUrl:null,url:null,spriteUrl:null,glyphsUrl:null};if("string"!=typeof b)return k(a,b,null).then(function(){return a});b=a.url=f.normalize(b);var g=a.parsedUrl=f.urlToObject(b);return n(b),h(g.path,{responseType:"json",query:c.mixin({f:"json"},g.query)}).then(function(b){return k(a,b.data,g)}).then(function(){return a})}})},"esri/layers/vectorTiles/config":function(){define(["require",
"exports","esri/config"],function(a,d,b){return Object.defineProperty(b,"workers",{get:function(){return b.defaults.workers},set:function(c){return b.defaults.workers=c}}),b})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleRepository":function(){define(["require","exports","./StyleLayer","dojo/has"],function(a,d,b,c){return function(){function e(b,a){if(this.styleJSON=b,this.version=parseFloat(b.version),this.sprite=a?a.spriteUrl:b.sprite,this.glyphs=a?a.glyphsUrl:b.glyphs,c("stable-symbol-rendering")){var f=
(b.layers||[]).filter(function(b){return b.layout&&b.layout["text-font"]})[0];f&&(b.layers||[]).forEach(function(b){b.layout&&b.layout["text-font"]&&(b.layout["text-font"]=f.layout["text-font"])})}this.layers=(b.layers||[]).map(e._create);this._identifyRefLayers()}return e.prototype._identifyRefLayers=function(){for(var b=[],c=[],e=0,a=0,d=this.layers;a<d.length;a++){var m=d[a];if(1===m.type){var q=m,l=m.sourceLayer,l=l+("|"+JSON.stringify(m.minzoom)),l=l+("|"+JSON.stringify(m.maxzoom)),l=l+("|"+
JSON.stringify(m.filter));(q.hasDataDrivenFill||q.hasDataDrivenOutline)&&(l+="|"+JSON.stringify(e));b.push({key:l,layer:m})}2===m.type&&(q=m,l=m.sourceLayer,l+="|"+JSON.stringify(m.minzoom),l+="|"+JSON.stringify(m.maxzoom),l+="|"+JSON.stringify(m.filter),l+="|"+JSON.stringify(m.layout&&m.layout["line-cap"]),l+="|"+JSON.stringify(m.layout&&m.layout["line-join"]),q.hasDataDrivenLine&&(l+="|"+JSON.stringify(e)),c.push({key:l,layer:m}));++e}this._assignRefLayers(b);this._assignRefLayers(c)},e.prototype._assignRefLayers=
function(b){b.sort(function(b,c){return b.key<c.key?-1:b.key>c.key?1:0});for(var c,e,a=b.length,f=0;a>f;f++){var d=b[f];if(d.key===c)d.layer.refLayerId=e;else if(c=d.key,e=d.layer.id,1===d.layer.type&&!d.layer.getPaintProperty("fill-outline-color"))for(var q=f+1;a>q;q++){var l=b[q];if(l.key!==c)break;if(l.layer.getPaintProperty("fill-outline-color")){b[f]=l;b[q]=d;e=l.layer.id;break}}}},e._create=function(c,e,a){e=1-1/(a.length+1)*(1+e);switch(c.type){case "background":return new b.BackgroundStyleLayer(0,
c,e);case "fill":return new b.FillStyleLayer(1,c,e);case "line":return new b.LineStyleLayer(2,c,e);case "symbol":return new b.SymbolStyleLayer(3,c,e);case "raster":throw Error("Unsupported vector tile raster layer");case "circle":throw Error("Unsupported vector tile circle layer");}throw Error("Unknown vector tile layer");},e}()})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleLayer":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ./StyleDefinition ./StyleProperty ./Filter".split(" "),
function(a,d,b,c,e,f,g){Object.defineProperty(d,"__esModule",{value:!0});a=function(){function b(b,c,a){switch(this.type=b,this.id=c.id,this.source=c.source,this.sourceLayer=c["source-layer"],this.minzoom=c.minzoom,this.maxzoom=c.maxzoom,this.filter=c.filter,this.layout=c.layout,this.paint=c.paint,this.z=a,b){case 0:this._layoutDefinition=e.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=e.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=e.StyleDefinition.fillLayoutDefinition;
this._paintDefinition=e.StyleDefinition.fillPaintDefinition;break;case 2:this._layoutDefinition=e.StyleDefinition.lineLayoutDefinition;this._paintDefinition=e.StyleDefinition.linePaintDefinition;break;case 3:this._layoutDefinition=e.StyleDefinition.symbolLayoutDefinition,this._paintDefinition=e.StyleDefinition.symbolPaintDefinition}this._layoutProperties=this._parseLayout(this.layout);this._paintProperties=this._parsePaint(this.paint)}return b.prototype.getFeatureFilter=function(){return void 0!==
this._featureFilter?this._featureFilter:this._featureFilter=g.createFilter(this.filter)},b.prototype.getLayoutProperty=function(b){var c=this._layoutProperties;return c?c[b]:void 0},b.prototype.getPaintProperty=function(b){var c=this._paintProperties;return c?c[b]:void 0},b.prototype.getLayoutValue=function(b,c,e){var a,f=this._layoutProperties;f&&(f=f[b])&&(a=f.getValue(c,e));b=this._layoutDefinition[b];return void 0===a&&(a=b["default"]),"enum"===b.type&&(a=b.values.indexOf(a)),a},b.prototype.getPaintValue=
function(b,c,e){var a,f=this._paintProperties;f&&(f=f[b])&&(a=f.getValue(c,e));b=this._paintDefinition[b];return void 0===a&&(a=b["default"]),"enum"===b.type&&(a=b.values.indexOf(a)),a},b.prototype._parseLayout=function(b){var c={},e;for(e in b){var a=this._layoutDefinition[e];a&&(c[e]=new f(e,a,b[e]))}return c},b.prototype._parsePaint=function(b){var c={},e;for(e in b){var a=this._paintDefinition[e];a&&(c[e]=new f(e,a,b[e]))}return c},b}();d.StyleLayer=a;c=function(c){function e(b,e,a){return c.call(this,
b,e,a)||this}return b(e,c),e}(a);d.BackgroundStyleLayer=c;c=function(c){function e(b,e,a){b=c.call(this,b,e,a)||this;b.hasDataDrivenFill=!1;(e=b.getPaintProperty("fill-color"))&&e.isDataDriven&&(b.hasDataDrivenFill=!0);(a=b.getPaintProperty("fill-opacity"))&&a.isDataDriven&&(b.hasDataDrivenFill=!0);b.hasDataDrivenOutline=!1;a=b.getPaintProperty("fill-outline-color");return a&&a.isDataDriven&&(b.hasDataDrivenOutline=!0),a||e&&e.isDataDriven&&(b.hasDataDrivenOutline=!0),b}return b(e,c),e}(a);d.FillStyleLayer=
c;c=function(c){function e(b,e,a){b=c.call(this,b,e,a)||this;b.hasDataDrivenLine=!1;(e=b.getPaintProperty("line-color"))&&e.isDataDriven&&(b.hasDataDrivenLine=!0);(e=b.getPaintProperty("line-opacity"))&&e.isDataDriven&&(b.hasDataDrivenLine=!0);e=b.getPaintProperty("line-width");return e&&e.isDataDriven&&(b.hasDataDrivenLine=!0),b}return b(e,c),e}(a);d.LineStyleLayer=c;a=function(c){function e(b,e,a){b=c.call(this,b,e,a)||this;b.hasDataDrivenIcon=!1;(e=b.getPaintProperty("icon-color"))&&e.isDataDriven&&
(b.hasDataDrivenIcon=!0);(e=b.getPaintProperty("icon-opacity"))&&e.isDataDriven&&(b.hasDataDrivenIcon=!0);(e=b.getLayoutProperty("icon-size"))&&e.isDataDriven&&(b.hasDataDrivenIcon=!0);b.hasDataDrivenText=!1;(e=b.getPaintProperty("text-color"))&&e.isDataDriven&&(b.hasDataDrivenText=!0);(e=b.getPaintProperty("text-opacity"))&&e.isDataDriven&&(b.hasDataDrivenText=!0);e=b.getLayoutProperty("text-size");return e&&e.isDataDriven&&(b.hasDataDrivenText=!0),b}return b(e,c),e}(a);d.SymbolStyleLayer=a;a=function(){return function(b,
c,e){this.cap=b.getLayoutValue("line-cap",c,e);this.join=b.getLayoutValue("line-join",c,e);this.miterLimit=b.getLayoutValue("line-miter-limit",c,e);this.roundLimit=b.getLayoutValue("line-round-limit",c,e)}}();d.LineLayout=a;a=function(){return function(b,c,e,a){this.allowOverlap=b.getLayoutValue("icon-allow-overlap",c,a);this.ignorePlacement=b.getLayoutValue("icon-ignore-placement",c,a);this.optional=b.getLayoutValue("icon-optional",c,a);this.rotationAlignment=b.getLayoutValue("icon-rotation-alignment",
c,a);this.size=b.getLayoutValue("icon-size",c,a);this.rotate=b.getLayoutValue("icon-rotate",c,a);this.padding=b.getLayoutValue("icon-padding",c,a);this.keepUpright=b.getLayoutValue("icon-keep-upright",c,a);this.offset=b.getLayoutValue("icon-offset",c,a);2===this.rotationAlignment&&(this.rotationAlignment=e?0:1)}}();d.IconLayout=a;a=function(){return function(b,c,e,a){this.allowOverlap=b.getLayoutValue("text-allow-overlap",c,a);this.ignorePlacement=b.getLayoutValue("text-ignore-placement",c,a);this.optional=
b.getLayoutValue("text-optional",c,a);this.rotationAlignment=b.getLayoutValue("text-rotation-alignment",c,a);this.fontArray=b.getLayoutValue("text-font",c,a);this.maxWidth=b.getLayoutValue("text-max-width",c,a);this.lineHeight=b.getLayoutValue("text-line-height",c,a);this.letterSpacing=b.getLayoutValue("text-letter-spacing",c,a);this.justify=b.getLayoutValue("text-justify",c,a);this.anchor=b.getLayoutValue("text-anchor",c,a);this.maxAngle=b.getLayoutValue("text-max-angle",c,a);this.size=b.getLayoutValue("text-size",
c,a);this.rotate=b.getLayoutValue("text-rotate",c,a);this.padding=b.getLayoutValue("text-padding",c,a);this.keepUpright=b.getLayoutValue("text-keep-upright",c,a);this.transform=b.getLayoutValue("text-transform",c,a);this.offset=b.getLayoutValue("text-offset",c,a);2===this.rotationAlignment&&(this.rotationAlignment=e?0:1)}}();d.TextLayout=a})},"esri/layers/vectorTiles/core/tsSupport/decorateHelper":function(){define([],function(){return function(a,d,b,c){var e,f=arguments.length,g=3>f?d:null===c?c=
Object.getOwnPropertyDescriptor(d,b):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,d,b,c);else for(var h=a.length-1;0<=h;h--)(e=a[h])&&(g=(3>f?e(g):3<f?e(d,b,g):e(d,b))||g);return 3<f&&g&&Object.defineProperty(d,b,g),g}})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleDefinition":function(){define(["require","exports"],function(a,d){Object.defineProperty(d,"__esModule",{value:!0});var b=function(){function b(){}return b.backgroundLayoutDefinition=
{visibility:{type:"enum",values:["visible","none"],"default":"visible"}},b.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"}},b.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"},"line-cap":{type:"enum",values:["butt","round","square"],"default":"butt"},"line-join":{type:"enum",values:["bevel","round","miter"],"default":"miter"},"line-miter-limit":{type:"number","default":2},"line-round-limit":{type:"number","default":1.05}},
b.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"},"symbol-placement":{type:"enum",values:["point","line"],"default":"point"},"symbol-spacing":{type:"number",minimum:1,"default":250},"symbol-avoid-edges":{type:"boolean","default":!1},"icon-image":{type:"string"},"icon-allow-overlap":{type:"boolean","default":!1},"icon-ignore-placement":{type:"boolean","default":!1},"icon-optional":{type:"boolean","default":!1},"icon-rotation-alignment":{type:"enum",values:["map",
"viewport","auto"],"default":"auto"},"icon-size":{type:"number",minimum:0,"default":1},"icon-rotate":{type:"number","default":0},"icon-padding":{type:"number",minimum:0,"default":2},"icon-keep-upright":{type:"boolean","default":!1},"icon-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-field":{type:"string"},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],"default":"auto"},"text-font":{type:"array",value:"string","default":["Open Sans Regular","Arial Unicode MS Regular"]},
"text-size":{type:"number",minimum:0,"default":16},"text-max-width":{type:"number",minimum:0,"default":10},"text-line-height":{type:"number","default":1.2},"text-letter-spacing":{type:"number","default":0},"text-justify":{type:"enum",values:["left","center","right"],"default":"center"},"text-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),"default":"center"},"text-max-angle":{type:"number",minimum:0,"default":45},"text-rotate":{type:"number",
"default":0},"text-padding":{type:"number",minimum:0,"default":2},"text-keep-upright":{type:"boolean","default":!0},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],"default":"none"},"text-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-allow-overlap":{type:"boolean","default":!1},"text-ignore-placement":{type:"boolean","default":!1},"text-optional":{type:"boolean","default":!1}},b.backgroundPaintDefinition={"background-opacity":{type:"number",minimum:0,maximum:1,
"default":1},"background-color":{type:"color","default":[0,0,0,1]},"background-pattern":{type:"string"}},b.fillPaintDefinition={"fill-opacity":{type:"number",minimum:0,maximum:1,"default":1},"fill-antialias":{type:"boolean","default":!0},"fill-color":{type:"color","default":[0,0,0,1]},"fill-outline-color":{type:"color","default":[0,0,0,0]},"fill-translate":{type:"array",value:"number",length:2,"default":[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"fill-pattern":{type:"string"}},
b.linePaintDefinition={"line-opacity":{type:"number",minimum:0,maximum:1,"default":1},"line-color":{type:"color","default":[0,0,0,1]},"line-translate":{type:"array",value:"number",length:2,"default":[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"line-width":{type:"number",minimum:0,"default":1},"line-gap-width":{type:"number",minimum:0,"default":0},"line-offset":{type:"number","default":0},"line-blur":{type:"number",minimum:0,"default":0},"line-dasharray":{type:"array",
value:"number","default":[]},"line-pattern":{type:"string"}},b.symbolPaintDefinition={"icon-opacity":{type:"number",minimum:0,maximum:1,"default":1},"icon-color":{type:"color","default":[0,0,0,1]},"icon-halo-color":{type:"color","default":[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,"default":0},"icon-halo-blur":{type:"number",minimum:0,"default":0},"icon-translate":{type:"array",value:"number",length:2,"default":[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},
"text-opacity":{type:"number",minimum:0,maximum:1,"default":1},"text-color":{type:"color","default":[0,0,0,1]},"text-halo-color":{type:"color","default":[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,"default":0},"text-halo-blur":{type:"number",minimum:0,"default":0},"text-translate":{type:"array",value:"number",length:2,"default":[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"}},b.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,
"default":1},"raster-hue-rotate":{type:"number","default":0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,"default":0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,"default":1},"raster-saturation":{type:"number",minimum:-1,maximum:1,"default":0},"raster-contrast":{type:"number",minimum:-1,maximum:1,"default":0},"raster-fade-duration":{type:"number",minimum:0,"default":300}},b.circlePaintDefinition={"circle-opacity":{type:"number",minimum:0,maximum:1,"default":1},"circle-radius":{type:"number",
minimum:0,"default":5},"circle-color":{type:"color","default":[0,0,0,1]},"circle-blur":{type:"number",minimum:0,"default":0},"circle-translate":{type:"array",value:"number",length:2,"default":[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"}},b}();d.StyleDefinition=b})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleProperty":function(){define(["require","exports","../../../Color","../GeometryUtils"],function(a,d,b,c){return function(){function e(b,c,
a){this.isDataDriven=!1;switch(c.type){case "number":b=!0;break;case "color":b=!0;a=e._parseColor(a);break;case "array":b="number"===c.value;break;default:b=!1}var f=a.stops&&0<a.stops.length;if(this.isDataDriven=!!a.property,this.isDataDriven)if(f)switch(a.type){case "identity":this.getValue=this._buildIdentity(a,c);break;case "categorical":this.getValue=this._buildCategorical(a,c);break;default:b&&"interval"===a.type&&(b=!1),b?this.getValue=this._buildInterpolate(a,c):this.getValue=this._buildInterval(a,
c)}else this.getValue=this._buildIdentity(a,c);else f?b?this.getValue=this._buildZoomInterpolate(a):this.getValue=this._buildZoomInterval(a):this.getValue=this._buildSimple(a)}return e.prototype._buildSimple=function(b){return function(){return b}},e.prototype._buildIdentity=function(b,c){return function(a,f){var g;return f&&(g=f.values[b.property],"color"===c.type&&(g=e._parseColor(g))),void 0!==g?g:void 0!==b["default"]?b["default"]:c["default"]}},e.prototype._buildCategorical=function(b,c){var e=
this;return function(a,f){var g;return f&&(g=f.values[b.property]),g=e._categorical(g,b.stops),void 0!==g?g:void 0!==b["default"]?b["default"]:c["default"]}},e.prototype._buildInterval=function(b,c){var e=this;return function(a,f){var g;return f&&(g=f.values[b.property]),"number"==typeof g?e._interval(g,b.stops):void 0!==b["default"]?b["default"]:c["default"]}},e.prototype._buildInterpolate=function(b,c){var e=this;return function(a,f){var g;return f&&(g=f.values[b.property]),"number"==typeof g?e._interpolate(g,
b.stops,b.base||1):void 0!==b["default"]?b["default"]:c["default"]}},e.prototype._buildZoomInterpolate=function(b){var c=this;return function(e){return c._interpolate(e,b.stops,b.base||1)}},e.prototype._buildZoomInterval=function(b){var c=this;return function(e){return c._interval(e,b.stops)}},e.prototype._categorical=function(b,c){for(var e=c.length,a=0;e>a;a++)if(c[a][0]===b)return c[a][1]},e.prototype._interval=function(b,c){for(var e=c.length,a=0,f=0;e>f&&c[f][0]<=b;f++)a=f;return c[a][1]},e.prototype._interpolate=
function(b,e,a){for(var f,g,h=e.length,d=0;h>d;d++){var l=e[d];if(!(l[0]<=b)){g=l;break}f=l}if(f&&g){d=g[0]-f[0];b-=f[0];a=1===a?b/d:(Math.pow(a,b)-1)/(Math.pow(a,d)-1);if(Array.isArray(f[1])){f=f[1];g=g[1];b=[];for(d=0;d<f.length;d++)b.push(c.interpolate(f[d],g[d],a));return b}return c.interpolate(f[1],g[1],a)}return f?f[1]:g?g[1]:void 0},e._isEmpty=function(b){for(var c in b)if(b.hasOwnProperty(c))return!1;return!0},e._parseColor=function(c){if(Array.isArray(c))return c;if("string"!=typeof c)return c&&
c["default"]&&(c["default"]=e._parseColor(c["default"])),c&&c.stops&&(c.stops=c.stops.map(function(b){return[b[0],e._parseColor(b[1])]})),c;c=new b(c);if(!this._isEmpty(c))return b.toUnitRGBA(c)},e}()})},"esri/layers/vectorTiles/Color":function(){define(["require","exports","esri/Color"],function(a,d,b){return function(){function c(c){return new b(c)}return c.toUnitRGBA=function(b){return[b.r/255,b.g/255,b.b/255,null!=b.a?b.a:1]},c}()})},"esri/layers/vectorTiles/views/vectorTiles/GeometryUtils":function(){define(["require",
"exports"],function(a,d){function b(b,c){return b%=c,0<=b?b:b+c}Object.defineProperty(d,"__esModule",{value:!0});d.C_INFINITY=Number.POSITIVE_INFINITY;d.C_PI=Math.PI;d.C_2PI=2*d.C_PI;d.C_PI_BY_2=d.C_PI/2;d.C_RAD_TO_256=128/d.C_PI;d.C_256_TO_RAD=d.C_PI/128;d.C_DEG_TO_256=256/360;d.C_DEG_TO_RAD=d.C_PI/180;d.C_SQRT2=1.414213562;d.C_SQRT2_INV=1/d.C_SQRT2;var c=1/Math.LN2;d.positiveMod=b;d.radToByte=function(c){return b(c*d.C_RAD_TO_256,256)};d.degToByte=function(c){return b(c*d.C_DEG_TO_256,256)};d.log2=
function(b){return Math.log(b)*c};d.sqr=function(b){return b*b};d.clamp=function(b,c,a){return Math.min(Math.max(b,c),a)};d.interpolate=function(b,c,a){return b*(1-a)+c*a};d.between=function(b,c,a){return b>=c&&a>=b||b>=a&&c>=b}})},"esri/layers/vectorTiles/views/vectorTiles/style/Filter":function(){define(["require","exports"],function(a,d){return function(){function b(c,e,a){this._op=c;"$type"===e?(a instanceof Array?this._val=a.map(function(c){return b._types.indexOf(c)}):this._val=b._types.indexOf(a),
this._op+=11):(this._key=e,this._val=a)}return b.prototype.filter=function(b){switch(this._op){case 0:return this._val;case 1:return b.values[this._key]===this._val;case 2:return b.values[this._key]!==this._val;case 3:return b.values[this._key]<this._val;case 4:return b.values[this._key]>this._val;case 5:return b.values[this._key]<=this._val;case 6:return b.values[this._key]>=this._val;case 7:return-1!==this._val.indexOf(b.values[this._key]);case 8:return-1===this._val.indexOf(b.values[this._key]);
case 9:for(var c=0,a=this._val;c<a.length;c++){var g=a[c];if(g.filter(b))return!0}return!1;case 10:c=0;for(a=this._val;c<a.length;c++)if(g=a[c],!g.filter(b))return!1;return!0;case 11:c=0;for(a=this._val;c<a.length;c++)if(g=a[c],g.filter(b))return!1;return!0;case 12:return b.type===this._val;case 13:return b.type!==this._val;case 14:return b.type<this._val;case 15:return b.type>this._val;case 16:return b.type>=this._val;case 17:return b.type<=this._val;case 18:return-1!==this._val.indexOf(b.type);
case 19:return-1===this._val.indexOf(b.type)}},b.createFilter=function(c){if(!c)return new b(0,void 0,!0);var e=c[0];if(1>=c.length)return new b(0,void 0,"any"!==e);switch(e){case "\x3d\x3d":return new b(1,c[1],c[2]);case "!\x3d":return new b(2,c[1],c[2]);case "\x3e":return new b(4,c[1],c[2]);case "\x3c":return new b(3,c[1],c[2]);case "\x3e\x3d":return new b(6,c[1],c[2]);case "\x3c\x3d":return new b(5,c[1],c[2]);case "in":return new b(7,c[1],c.slice(2));case "!in":return new b(8,c[1],c.slice(2));
case "any":return new b(9,void 0,c.slice(1).map(b.createFilter.bind(this)));case "all":return new b(10,void 0,c.slice(1).map(b.createFilter.bind(this)));case "none":return new b(11,void 0,c.slice(1).map(b.createFilter.bind(this)));default:throw Error("invalid operator: "+e);}},b._types=["Unknown","Point","LineString","Polygon"],b}()})},"esri/layers/vectorTiles/views/vectorTiles/VectorTileContainer":function(){define("require exports ../../core/tsSupport/extendsHelper dojo/has ../../core/promiseUtils ../../core/libs/gl-matrix/vec3 ../../core/libs/gl-matrix/mat4 ../2d/engine/Container ./renderers/Renderer ./GeometryUtils".split(" "),
function(a,d,b,c,e,f,g,h,n,k){return function(a){function h(){var b=a.call(this)||this;return b.isInitialized=!1,b._displayWidth=0,b._displayHeight=0,b._pointToCallbacks=new Map,b._tileCoordinateScale=f.create(),b._orientationVec=f.create(),b._displayScale=f.create(),b._orientationVec.set([0,0,1]),b._defaultTransform=g.create(),b}return b(h,a),h.prototype.initialize=function(b,c,e,a){this._renderer=new n;this._renderer.initialize(b,c);this._tileInfoView=a;this._tileInfo=e;this.isInitialized=!0},h.prototype.destroy=
function(){this._renderer&&(this._renderer.dispose(),this._renderer=null)},h.prototype.hittest=function(b,c){var a=this,f=[b,c];return e.create(function(b,c){a._pointToCallbacks.set(f,{resolve:b,reject:c});a.requestRender()},function(){a._pointToCallbacks.has(f)&&a._pointToCallbacks["delete"](f)})},h.prototype.prepareChildrenRenderParameters=function(b){var c=b.state;return c&&this._tileInfo&&this.isInitialized?(b.displayLevel=this._tileInfo.scaleToZoom(c.scale),b.requiredLevel=this._tileInfoView.getClosestInfoForScale(c.scale).level,
b.renderer=this._renderer,b):b},h.prototype.renderChildren=function(b){var e=this;if(0!==this.children.length&&this.isInitialized&&b&&b.state){this.sortChildren(function(b,c){return b.key.level-c.key.level});for(var f=this.children.length,g=1;f>=g;g++){var h=this.children[g-1];h.attached&&(h.stencilData.reference=g,h.stencilData.mask=255)}this._updateTilesTransform(b.state,this._tileInfoView.getClosestInfoForScale(b.state.scale).level,this.children);f=b.context;if(f.setDepthWriteEnabled(!0),this._renderer.setStateParams(b.state,
b.devicePixelRatio,b.displayLevel),this._renderer.drawClippingMasks(f,this.children),f.setStencilWriteMask(0),f.setBlendFunctionSeparate(1,771,1,771),f.setStencilOp(7680,7680,7681),f.setDepthFunction(515),f.setBlendingEnabled(!1),f.setStencilTestEnabled(!0),f.setDepthTestEnabled(!0),f.setDepthWriteEnabled(!0),b.drawphase=0,a.prototype.renderChildren.call(this,b),f.setDepthWriteEnabled(!1),f.setBlendingEnabled(!0),b.drawphase=1,a.prototype.renderChildren.call(this,b),b.drawphase=2,a.prototype.renderChildren.call(this,
b),f.setStencilTestEnabled(!1),f.setDepthTestEnabled(!1),c("esri-vector-tiles-debug"))for(g=0,h=this.children;g<h.length;g++){var d=h[g];d.attached&&d.visible&&this._renderer.renderTileInfo(f,d)}0<this._pointToCallbacks.size&&(this._pointToCallbacks.forEach(function(c,a){c.resolve(e._hitTest(b,a[0],a[1]))}),this._pointToCallbacks.clear());this._renderer.needsRedraw()&&this.requestRender()}},h.prototype.removeAllChildren=function(){for(var b=0;b<this.children.length;b++)this.children[b].dispose();
a.prototype.removeAllChildren.call(this)},h.prototype._hitTest=function(b,c,e){var a=this._tileInfoView.getClosestInfoForScale(b.state.scale).level,f=[0,0];b.state.toMap(f,[c,e]);var g=b.state.clone(),h=g.viewpoint.clone(),d=h.targetGeometry;d.x=f[0];d.y=f[1];h.targetGeometry=d;g.viewpoint=h;g.size=[3,3];this._renderer.setStateParams(g,b.devicePixelRatio,b.displayLevel);return(b=this._renderer.hitTest({budget:b.budget,devicePixelRatio:b.devicePixelRatio,stationary:b.stationary,opacity:b.opacity,context:b.context,
displayLevel:b.displayLevel,requiredLevel:b.requiredLevel,renderer:b.renderer,layerOpacity:b.layerOpacity,state:g,drawphase:3},c,e,this.children,a,3,this._updateTilesTransform.bind(this)))&&0!==b.length?b[0]:null},h.prototype._updateTilesTransform=function(b,c,e){var a=1/b.width,f=1/b.height,g=[0,0];this._calculateRelativeViewProjMat(this._tileInfo.lodAt(c).resolution,b.resolution,b.rotation,this._tileInfo.size[1],4096,b.width,b.height,this._defaultTransform);for(var h=0;h<e.length;h++){var d=e[h];
b.toScreen(g,d.coords);g[1]=b.height-g[1];d.tileTransform.displayCoord[0]=2*g[0]*a-1;d.tileTransform.displayCoord[1]=2*g[1]*f-1;d.key.level===c&&4096===d.coordRange?d.tileTransform.transform.set(this._defaultTransform):this._calculateRelativeViewProjMat(this._tileInfo.lodAt(d.key.level).resolution,b.resolution,b.rotation,this._tileInfo.size[1],d.coordRange,b.width,b.height,d.tileTransform.transform)}},h.prototype._calculateRelativeViewProjMat=function(b,c,e,a,f,h,d,n){var l=.125;512!==a&&4096!==f&&
(l=a/f);b=b/c*l;this._tileCoordinateScale.set([b,b,1]);(h!==this._displayWidth||d!==this._displayHeight)&&(this._displayScale.set([2/h,-2/d,1]),this._displayWidth=h,this._displayHeight=d);g.identity(n);g.scale(n,n,this._tileCoordinateScale);g.rotate(n,n,-e*k.C_DEG_TO_RAD,this._orientationVec);g.scale(n,n,this._displayScale);g.transpose(n,n)},h}(h)})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec3":function(){define(["./common"],function(a){var d={};return d.create=function(){var b=new a.ARRAY_TYPE(3);
return b[0]=0,b[1]=0,b[2]=0,b},d.clone=function(b){var c=new a.ARRAY_TYPE(3);return c[0]=b[0],c[1]=b[1],c[2]=b[2],c},d.fromValues=function(b,c,e){var f=new a.ARRAY_TYPE(3);return f[0]=b,f[1]=c,f[2]=e,f},d.copy=function(b,c){return b[0]=c[0],b[1]=c[1],b[2]=c[2],b},d.set=function(b,c,e,a){return b[0]=c,b[1]=e,b[2]=a,b},d.add=function(b,c,e){return b[0]=c[0]+e[0],b[1]=c[1]+e[1],b[2]=c[2]+e[2],b},d.subtract=function(b,c,e){return b[0]=c[0]-e[0],b[1]=c[1]-e[1],b[2]=c[2]-e[2],b},d.sub=d.subtract,d.multiply=
function(b,c,e){return b[0]=c[0]*e[0],b[1]=c[1]*e[1],b[2]=c[2]*e[2],b},d.mul=d.multiply,d.divide=function(b,c,e){return b[0]=c[0]/e[0],b[1]=c[1]/e[1],b[2]=c[2]/e[2],b},d.div=d.divide,d.ceil=function(b,c){return b[0]=Math.ceil(c[0]),b[1]=Math.ceil(c[1]),b[2]=Math.ceil(c[2]),b},d.floor=function(b,c){return b[0]=Math.floor(c[0]),b[1]=Math.floor(c[1]),b[2]=Math.floor(c[2]),b},d.min=function(b,c,e){return b[0]=Math.min(c[0],e[0]),b[1]=Math.min(c[1],e[1]),b[2]=Math.min(c[2],e[2]),b},d.max=function(b,c,
e){return b[0]=Math.max(c[0],e[0]),b[1]=Math.max(c[1],e[1]),b[2]=Math.max(c[2],e[2]),b},d.round=function(b,c){return b[0]=Math.round(c[0]),b[1]=Math.round(c[1]),b[2]=Math.round(c[2]),b},d.scale=function(b,c,e){return b[0]=c[0]*e,b[1]=c[1]*e,b[2]=c[2]*e,b},d.scaleAndAdd=function(b,c,e,a){return b[0]=c[0]+e[0]*a,b[1]=c[1]+e[1]*a,b[2]=c[2]+e[2]*a,b},d.distance=function(b,c){var e=c[0]-b[0],a=c[1]-b[1],g=c[2]-b[2];return Math.sqrt(e*e+a*a+g*g)},d.dist=d.distance,d.squaredDistance=function(b,c){var e=
c[0]-b[0],a=c[1]-b[1],g=c[2]-b[2];return e*e+a*a+g*g},d.sqrDist=d.squaredDistance,d.length=function(b){var c=b[0],e=b[1];b=b[2];return Math.sqrt(c*c+e*e+b*b)},d.len=d.length,d.squaredLength=function(b){var c=b[0],e=b[1];b=b[2];return c*c+e*e+b*b},d.sqrLen=d.squaredLength,d.negate=function(b,c){return b[0]=-c[0],b[1]=-c[1],b[2]=-c[2],b},d.inverse=function(b,c){return b[0]=1/c[0],b[1]=1/c[1],b[2]=1/c[2],b},d.normalize=function(b,c){var e=c[0],a=c[1],g=c[2],e=e*e+a*a+g*g;return 0<e&&(e=1/Math.sqrt(e),
b[0]=c[0]*e,b[1]=c[1]*e,b[2]=c[2]*e),b},d.dot=function(b,c){return b[0]*c[0]+b[1]*c[1]+b[2]*c[2]},d.cross=function(b,c,e){var a=c[0],g=c[1];c=c[2];var h=e[0],d=e[1];e=e[2];return b[0]=g*e-c*d,b[1]=c*h-a*e,b[2]=a*d-g*h,b},d.lerp=function(b,c,e,a){var f=c[0],h=c[1];c=c[2];return b[0]=f+a*(e[0]-f),b[1]=h+a*(e[1]-h),b[2]=c+a*(e[2]-c),b},d.hermite=function(b,c,e,a,g,h){var f=h*h,d=f*(2*h-3)+1,m=f*(h-2)+h,q=f*(h-1);h=f*(3-2*h);return b[0]=c[0]*d+e[0]*m+a[0]*q+g[0]*h,b[1]=c[1]*d+e[1]*m+a[1]*q+g[1]*h,b[2]=
c[2]*d+e[2]*m+a[2]*q+g[2]*h,b},d.bezier=function(b,c,e,a,g,h){var f=1-h,d=f*f,m=h*h,q=d*f,d=3*h*d,f=3*m*f;h*=m;return b[0]=c[0]*q+e[0]*d+a[0]*f+g[0]*h,b[1]=c[1]*q+e[1]*d+a[1]*f+g[1]*h,b[2]=c[2]*q+e[2]*d+a[2]*f+g[2]*h,b},d.random=function(b,c){c=c||1;var e=2*a.RANDOM()*Math.PI,f=2*a.RANDOM()-1,g=Math.sqrt(1-f*f)*c;return b[0]=Math.cos(e)*g,b[1]=Math.sin(e)*g,b[2]=f*c,b},d.transformMat4=function(b,c,e){var a=c[0],g=c[1];c=c[2];var h=e[3]*a+e[7]*g+e[11]*c+e[15];return h=h||1,b[0]=(e[0]*a+e[4]*g+e[8]*
c+e[12])/h,b[1]=(e[1]*a+e[5]*g+e[9]*c+e[13])/h,b[2]=(e[2]*a+e[6]*g+e[10]*c+e[14])/h,b},d.transformMat3=function(b,c,e){var a=c[0],g=c[1];c=c[2];return b[0]=a*e[0]+g*e[3]+c*e[6],b[1]=a*e[1]+g*e[4]+c*e[7],b[2]=a*e[2]+g*e[5]+c*e[8],b},d.transformQuat=function(b,c,e){var a=c[0],g=c[1],h=c[2];c=e[0];var d=e[1],k=e[2];e=e[3];var m=e*a+d*h-k*g,q=e*g+k*a-c*h,l=e*h+c*g-d*a,a=-c*a-d*g-k*h;return b[0]=m*e+a*-c+q*-k-l*-d,b[1]=q*e+a*-d+l*-c-m*-k,b[2]=l*e+a*-k+m*-d-q*-c,b},d.rotateX=function(b,c,e,a){var f=[],
h=[];return f[0]=c[0]-e[0],f[1]=c[1]-e[1],f[2]=c[2]-e[2],h[0]=f[0],h[1]=f[1]*Math.cos(a)-f[2]*Math.sin(a),h[2]=f[1]*Math.sin(a)+f[2]*Math.cos(a),b[0]=h[0]+e[0],b[1]=h[1]+e[1],b[2]=h[2]+e[2],b},d.rotateY=function(b,c,e,a){var f=[],h=[];return f[0]=c[0]-e[0],f[1]=c[1]-e[1],f[2]=c[2]-e[2],h[0]=f[2]*Math.sin(a)+f[0]*Math.cos(a),h[1]=f[1],h[2]=f[2]*Math.cos(a)-f[0]*Math.sin(a),b[0]=h[0]+e[0],b[1]=h[1]+e[1],b[2]=h[2]+e[2],b},d.rotateZ=function(b,c,e,a){var f=[],h=[];return f[0]=c[0]-e[0],f[1]=c[1]-e[1],
f[2]=c[2]-e[2],h[0]=f[0]*Math.cos(a)-f[1]*Math.sin(a),h[1]=f[0]*Math.sin(a)+f[1]*Math.cos(a),h[2]=f[2],b[0]=h[0]+e[0],b[1]=h[1]+e[1],b[2]=h[2]+e[2],b},d.forEach=function(){var b=d.create();return function(c,e,a,g,h,d){e||(e=3);a||(a=0);for(g=g?Math.min(g*e+a,c.length):c.length;g>a;a+=e)b[0]=c[a],b[1]=c[a+1],b[2]=c[a+2],h(b,b,d),c[a]=b[0],c[a+1]=b[1],c[a+2]=b[2];return c}}(),d.angle=function(b,c){var e=d.fromValues(b[0],b[1],b[2]),a=d.fromValues(c[0],c[1],c[2]);d.normalize(e,e);d.normalize(a,a);e=
d.dot(e,a);return 1<e?0:Math.acos(e)},d.str=function(b){return"vec3("+b[0]+", "+b[1]+", "+b[2]+")"},d.exactEquals=function(b,c){return b[0]===c[0]&&b[1]===c[1]&&b[2]===c[2]},d.equals=function(b,c){var e=b[0],f=b[1],g=b[2],h=c[0],d=c[1],k=c[2];return Math.abs(e-h)<=a.EPSILON*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(f-d)<=a.EPSILON*Math.max(1,Math.abs(f),Math.abs(d))&&Math.abs(g-k)<=a.EPSILON*Math.max(1,Math.abs(g),Math.abs(k))},d})},"esri/layers/vectorTiles/core/libs/gl-matrix/common":function(){define([],
function(){var a={EPSILON:1E-6};a.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array;a.RANDOM=Math.random;a.ENABLE_SIMD=!1;a.SIMD_AVAILABLE=a.ARRAY_TYPE===Float32Array&&"SIMD"in this;a.USE_SIMD=a.ENABLE_SIMD&&a.SIMD_AVAILABLE;a.setMatrixArrayType=function(b){a.ARRAY_TYPE=b};var d=Math.PI/180;return a.toRadian=function(b){return b*d},a.equals=function(b,c){return Math.abs(b-c)<=a.EPSILON*Math.max(1,Math.abs(b),Math.abs(c))},a})},"esri/layers/vectorTiles/core/libs/gl-matrix/mat4":function(){define(["./common"],
function(a){var d={scalar:{},SIMD:{}};return d.create=function(){var b=new a.ARRAY_TYPE(16);return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b},d.clone=function(b){var c=new a.ARRAY_TYPE(16);return c[0]=b[0],c[1]=b[1],c[2]=b[2],c[3]=b[3],c[4]=b[4],c[5]=b[5],c[6]=b[6],c[7]=b[7],c[8]=b[8],c[9]=b[9],c[10]=b[10],c[11]=b[11],c[12]=b[12],c[13]=b[13],c[14]=b[14],c[15]=b[15],c},d.copy=function(b,c){return b[0]=c[0],b[1]=c[1],b[2]=
c[2],b[3]=c[3],b[4]=c[4],b[5]=c[5],b[6]=c[6],b[7]=c[7],b[8]=c[8],b[9]=c[9],b[10]=c[10],b[11]=c[11],b[12]=c[12],b[13]=c[13],b[14]=c[14],b[15]=c[15],b},d.fromValues=function(b,c,e,f,g,h,d,k,m,q,l,p,u,t,r,v){var n=new a.ARRAY_TYPE(16);return n[0]=b,n[1]=c,n[2]=e,n[3]=f,n[4]=g,n[5]=h,n[6]=d,n[7]=k,n[8]=m,n[9]=q,n[10]=l,n[11]=p,n[12]=u,n[13]=t,n[14]=r,n[15]=v,n},d.set=function(b,c,e,a,g,h,d,k,m,q,l,p,u,t,r,v,w){return b[0]=c,b[1]=e,b[2]=a,b[3]=g,b[4]=h,b[5]=d,b[6]=k,b[7]=m,b[8]=q,b[9]=l,b[10]=p,b[11]=
u,b[12]=t,b[13]=r,b[14]=v,b[15]=w,b},d.identity=function(b){return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b},d.scalar.transpose=function(b,c){if(b===c){var e=c[1],a=c[2],g=c[3],h=c[6],d=c[7],k=c[11];b[1]=c[4];b[2]=c[8];b[3]=c[12];b[4]=e;b[6]=c[9];b[7]=c[13];b[8]=a;b[9]=h;b[11]=c[14];b[12]=g;b[13]=d;b[14]=k}else b[0]=c[0],b[1]=c[4],b[2]=c[8],b[3]=c[12],b[4]=c[1],b[5]=c[5],b[6]=c[9],b[7]=c[13],b[8]=c[2],b[9]=c[6],b[10]=c[10],
b[11]=c[14],b[12]=c[3],b[13]=c[7],b[14]=c[11],b[15]=c[15];return b},d.SIMD.transpose=function(b,c){var e,a,g,h,d,k,m,q,l,p;return e=SIMD.Float32x4.load(c,0),a=SIMD.Float32x4.load(c,4),g=SIMD.Float32x4.load(c,8),h=SIMD.Float32x4.load(c,12),d=SIMD.Float32x4.shuffle(e,a,0,1,4,5),k=SIMD.Float32x4.shuffle(g,h,0,1,4,5),m=SIMD.Float32x4.shuffle(d,k,0,2,4,6),q=SIMD.Float32x4.shuffle(d,k,1,3,5,7),SIMD.Float32x4.store(b,0,m),SIMD.Float32x4.store(b,4,q),d=SIMD.Float32x4.shuffle(e,a,2,3,6,7),k=SIMD.Float32x4.shuffle(g,
h,2,3,6,7),l=SIMD.Float32x4.shuffle(d,k,0,2,4,6),p=SIMD.Float32x4.shuffle(d,k,1,3,5,7),SIMD.Float32x4.store(b,8,l),SIMD.Float32x4.store(b,12,p),b},d.transpose=a.USE_SIMD?d.SIMD.transpose:d.scalar.transpose,d.scalar.invert=function(b,c){var e=c[0],a=c[1],g=c[2],h=c[3],d=c[4],k=c[5],m=c[6],q=c[7],l=c[8],p=c[9],u=c[10],t=c[11],r=c[12],v=c[13],w=c[14],x=c[15],y=e*k-a*d,z=e*m-g*d,A=e*q-h*d,B=a*m-g*k,H=a*q-h*k,J=g*q-h*m,M=l*v-p*r,K=l*w-u*r,D=l*x-t*r,E=p*w-u*v,I=p*x-t*v,F=u*x-t*w,C=y*F-z*I+A*E+B*D-H*K+J*
M;return C?(C=1/C,b[0]=(k*F-m*I+q*E)*C,b[1]=(g*I-a*F-h*E)*C,b[2]=(v*J-w*H+x*B)*C,b[3]=(u*H-p*J-t*B)*C,b[4]=(m*D-d*F-q*K)*C,b[5]=(e*F-g*D+h*K)*C,b[6]=(w*A-r*J-x*z)*C,b[7]=(l*J-u*A+t*z)*C,b[8]=(d*I-k*D+q*M)*C,b[9]=(a*D-e*I-h*M)*C,b[10]=(r*H-v*A+x*y)*C,b[11]=(p*A-l*H-t*y)*C,b[12]=(k*K-d*E-m*M)*C,b[13]=(e*E-a*K+g*M)*C,b[14]=(v*z-r*B-w*y)*C,b[15]=(l*B-p*z+u*y)*C,b):null},d.SIMD.invert=function(b,c){var a,f,g,h,d,k,m,q,l,p,u=SIMD.Float32x4.load(c,0),t=SIMD.Float32x4.load(c,4),r=SIMD.Float32x4.load(c,8),
v=SIMD.Float32x4.load(c,12);return d=SIMD.Float32x4.shuffle(u,t,0,1,4,5),f=SIMD.Float32x4.shuffle(r,v,0,1,4,5),a=SIMD.Float32x4.shuffle(d,f,0,2,4,6),f=SIMD.Float32x4.shuffle(f,d,1,3,5,7),d=SIMD.Float32x4.shuffle(u,t,2,3,6,7),h=SIMD.Float32x4.shuffle(r,v,2,3,6,7),g=SIMD.Float32x4.shuffle(d,h,0,2,4,6),h=SIMD.Float32x4.shuffle(h,d,1,3,5,7),d=SIMD.Float32x4.mul(g,h),d=SIMD.Float32x4.swizzle(d,1,0,3,2),k=SIMD.Float32x4.mul(f,d),m=SIMD.Float32x4.mul(a,d),d=SIMD.Float32x4.swizzle(d,2,3,0,1),k=SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,
d),k),m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,d),m),m=SIMD.Float32x4.swizzle(m,2,3,0,1),d=SIMD.Float32x4.mul(f,g),d=SIMD.Float32x4.swizzle(d,1,0,3,2),k=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,d),k),l=SIMD.Float32x4.mul(a,d),d=SIMD.Float32x4.swizzle(d,2,3,0,1),k=SIMD.Float32x4.sub(k,SIMD.Float32x4.mul(h,d)),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,d),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),d=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,2,3,0,1),h),d=SIMD.Float32x4.swizzle(d,1,0,3,2),g=SIMD.Float32x4.swizzle(g,
2,3,0,1),k=SIMD.Float32x4.add(SIMD.Float32x4.mul(g,d),k),q=SIMD.Float32x4.mul(a,d),d=SIMD.Float32x4.swizzle(d,2,3,0,1),k=SIMD.Float32x4.sub(k,SIMD.Float32x4.mul(g,d)),q=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,d),q),q=SIMD.Float32x4.swizzle(q,2,3,0,1),d=SIMD.Float32x4.mul(a,f),d=SIMD.Float32x4.swizzle(d,1,0,3,2),q=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,d),q),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,d),l),d=SIMD.Float32x4.swizzle(d,2,3,0,1),q=SIMD.Float32x4.sub(SIMD.Float32x4.mul(h,d),q),l=SIMD.Float32x4.sub(l,
SIMD.Float32x4.mul(g,d)),d=SIMD.Float32x4.mul(a,h),d=SIMD.Float32x4.swizzle(d,1,0,3,2),m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(g,d)),q=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,d),q),d=SIMD.Float32x4.swizzle(d,2,3,0,1),m=SIMD.Float32x4.add(SIMD.Float32x4.mul(g,d),m),q=SIMD.Float32x4.sub(q,SIMD.Float32x4.mul(f,d)),d=SIMD.Float32x4.mul(a,g),d=SIMD.Float32x4.swizzle(d,1,0,3,2),m=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,d),m),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(f,d)),d=SIMD.Float32x4.swizzle(d,2,
3,0,1),m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(h,d)),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,d),l),p=SIMD.Float32x4.mul(a,k),p=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(p,2,3,0,1),p),p=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(p,1,0,3,2),p),d=SIMD.Float32x4.reciprocalApproximation(p),p=SIMD.Float32x4.sub(SIMD.Float32x4.add(d,d),SIMD.Float32x4.mul(p,SIMD.Float32x4.mul(d,d))),(p=SIMD.Float32x4.swizzle(p,0,0,0,0))?(SIMD.Float32x4.store(b,0,SIMD.Float32x4.mul(p,k)),SIMD.Float32x4.store(b,4,SIMD.Float32x4.mul(p,
m)),SIMD.Float32x4.store(b,8,SIMD.Float32x4.mul(p,q)),SIMD.Float32x4.store(b,12,SIMD.Float32x4.mul(p,l)),b):null},d.invert=a.USE_SIMD?d.SIMD.invert:d.scalar.invert,d.scalar.adjoint=function(b,c){var a=c[0],f=c[1],g=c[2],h=c[3],d=c[4],k=c[5],m=c[6],q=c[7],l=c[8],p=c[9],u=c[10],t=c[11],r=c[12],v=c[13],w=c[14],x=c[15];return b[0]=k*(u*x-t*w)-p*(m*x-q*w)+v*(m*t-q*u),b[1]=-(f*(u*x-t*w)-p*(g*x-h*w)+v*(g*t-h*u)),b[2]=f*(m*x-q*w)-k*(g*x-h*w)+v*(g*q-h*m),b[3]=-(f*(m*t-q*u)-k*(g*t-h*u)+p*(g*q-h*m)),b[4]=-(d*
(u*x-t*w)-l*(m*x-q*w)+r*(m*t-q*u)),b[5]=a*(u*x-t*w)-l*(g*x-h*w)+r*(g*t-h*u),b[6]=-(a*(m*x-q*w)-d*(g*x-h*w)+r*(g*q-h*m)),b[7]=a*(m*t-q*u)-d*(g*t-h*u)+l*(g*q-h*m),b[8]=d*(p*x-t*v)-l*(k*x-q*v)+r*(k*t-q*p),b[9]=-(a*(p*x-t*v)-l*(f*x-h*v)+r*(f*t-h*p)),b[10]=a*(k*x-q*v)-d*(f*x-h*v)+r*(f*q-h*k),b[11]=-(a*(k*t-q*p)-d*(f*t-h*p)+l*(f*q-h*k)),b[12]=-(d*(p*w-u*v)-l*(k*w-m*v)+r*(k*u-m*p)),b[13]=a*(p*w-u*v)-l*(f*w-g*v)+r*(f*u-g*p),b[14]=-(a*(k*w-m*v)-d*(f*w-g*v)+r*(f*m-g*k)),b[15]=a*(k*u-m*p)-d*(f*u-g*p)+l*(f*m-
g*k),b},d.SIMD.adjoint=function(b,c){var a,f,g,h,d,k,m,q,l,p,u,t,r;a=SIMD.Float32x4.load(c,0);f=SIMD.Float32x4.load(c,4);g=SIMD.Float32x4.load(c,8);h=SIMD.Float32x4.load(c,12);return l=SIMD.Float32x4.shuffle(a,f,0,1,4,5),k=SIMD.Float32x4.shuffle(g,h,0,1,4,5),d=SIMD.Float32x4.shuffle(l,k,0,2,4,6),k=SIMD.Float32x4.shuffle(k,l,1,3,5,7),l=SIMD.Float32x4.shuffle(a,f,2,3,6,7),q=SIMD.Float32x4.shuffle(g,h,2,3,6,7),m=SIMD.Float32x4.shuffle(l,q,0,2,4,6),q=SIMD.Float32x4.shuffle(q,l,1,3,5,7),l=SIMD.Float32x4.mul(m,
q),l=SIMD.Float32x4.swizzle(l,1,0,3,2),p=SIMD.Float32x4.mul(k,l),u=SIMD.Float32x4.mul(d,l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(k,l),p),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,l),u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),l=SIMD.Float32x4.mul(k,m),l=SIMD.Float32x4.swizzle(l,1,0,3,2),p=SIMD.Float32x4.add(SIMD.Float32x4.mul(q,l),p),r=SIMD.Float32x4.mul(d,l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(q,l)),r=SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,
l),r),r=SIMD.Float32x4.swizzle(r,2,3,0,1),l=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,2,3,0,1),q),l=SIMD.Float32x4.swizzle(l,1,0,3,2),m=SIMD.Float32x4.swizzle(m,2,3,0,1),p=SIMD.Float32x4.add(SIMD.Float32x4.mul(m,l),p),t=SIMD.Float32x4.mul(d,l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(m,l)),t=SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,l),t),t=SIMD.Float32x4.swizzle(t,2,3,0,1),l=SIMD.Float32x4.mul(d,k),l=SIMD.Float32x4.swizzle(l,1,0,3,2),t=SIMD.Float32x4.add(SIMD.Float32x4.mul(q,
l),t),r=SIMD.Float32x4.sub(SIMD.Float32x4.mul(m,l),r),l=SIMD.Float32x4.swizzle(l,2,3,0,1),t=SIMD.Float32x4.sub(SIMD.Float32x4.mul(q,l),t),r=SIMD.Float32x4.sub(r,SIMD.Float32x4.mul(m,l)),l=SIMD.Float32x4.mul(d,q),l=SIMD.Float32x4.swizzle(l,1,0,3,2),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(m,l)),t=SIMD.Float32x4.add(SIMD.Float32x4.mul(k,l),t),l=SIMD.Float32x4.swizzle(l,2,3,0,1),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(m,l),u),t=SIMD.Float32x4.sub(t,SIMD.Float32x4.mul(k,l)),l=SIMD.Float32x4.mul(d,m),
l=SIMD.Float32x4.swizzle(l,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(q,l),u),r=SIMD.Float32x4.sub(r,SIMD.Float32x4.mul(k,l)),l=SIMD.Float32x4.swizzle(l,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(q,l)),r=SIMD.Float32x4.add(SIMD.Float32x4.mul(k,l),r),SIMD.Float32x4.store(b,0,p),SIMD.Float32x4.store(b,4,u),SIMD.Float32x4.store(b,8,t),SIMD.Float32x4.store(b,12,r),b},d.adjoint=a.USE_SIMD?d.SIMD.adjoint:d.scalar.adjoint,d.determinant=function(b){var c=b[0],a=b[1],f=b[2],g=b[3],h=b[4],d=b[5],
k=b[6],m=b[7],q=b[8],l=b[9],p=b[10],u=b[11],t=b[12],r=b[13],v=b[14];b=b[15];return(c*d-a*h)*(p*b-u*v)-(c*k-f*h)*(l*b-u*r)+(c*m-g*h)*(l*v-p*r)+(a*k-f*d)*(q*b-u*t)-(a*m-g*d)*(q*v-p*t)+(f*m-g*k)*(q*r-l*t)},d.SIMD.multiply=function(b,c,a){var e=SIMD.Float32x4.load(c,0),g=SIMD.Float32x4.load(c,4),h=SIMD.Float32x4.load(c,8);c=SIMD.Float32x4.load(c,12);var d=SIMD.Float32x4.load(a,0),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,0,0,0,0),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,
1,1,1,1),g),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,2,2,2),h),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,3,3,3,3),c))));SIMD.Float32x4.store(b,0,d);d=SIMD.Float32x4.load(a,4);d=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,0,0,0,0),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,1,1,1,1),g),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,2,2,2),h),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,3,3,3,3),c))));SIMD.Float32x4.store(b,
4,d);d=SIMD.Float32x4.load(a,8);d=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,0,0,0,0),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,1,1,1,1),g),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,2,2,2),h),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,3,3,3,3),c))));SIMD.Float32x4.store(b,8,d);a=SIMD.Float32x4.load(a,12);e=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(a,0,0,0,0),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(a,
1,1,1,1),g),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(a,2,2,2,2),h),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(a,3,3,3,3),c))));return SIMD.Float32x4.store(b,12,e),b},d.scalar.multiply=function(b,c,a){var e=c[0],g=c[1],d=c[2],n=c[3],k=c[4],m=c[5],q=c[6],l=c[7],p=c[8],u=c[9],t=c[10],r=c[11],v=c[12],w=c[13],x=c[14];c=c[15];var y=a[0],z=a[1],A=a[2],B=a[3];return b[0]=y*e+z*k+A*p+B*v,b[1]=y*g+z*m+A*u+B*w,b[2]=y*d+z*q+A*t+B*x,b[3]=y*n+z*l+A*r+B*c,y=a[4],z=a[5],A=a[6],B=a[7],b[4]=y*e+
z*k+A*p+B*v,b[5]=y*g+z*m+A*u+B*w,b[6]=y*d+z*q+A*t+B*x,b[7]=y*n+z*l+A*r+B*c,y=a[8],z=a[9],A=a[10],B=a[11],b[8]=y*e+z*k+A*p+B*v,b[9]=y*g+z*m+A*u+B*w,b[10]=y*d+z*q+A*t+B*x,b[11]=y*n+z*l+A*r+B*c,y=a[12],z=a[13],A=a[14],B=a[15],b[12]=y*e+z*k+A*p+B*v,b[13]=y*g+z*m+A*u+B*w,b[14]=y*d+z*q+A*t+B*x,b[15]=y*n+z*l+A*r+B*c,b},d.multiply=a.USE_SIMD?d.SIMD.multiply:d.scalar.multiply,d.mul=d.multiply,d.scalar.translate=function(b,c,a){var e,g,d,n,k,m,q,l,p,u,t,r,v=a[0],w=a[1];a=a[2];return c===b?(b[12]=c[0]*v+c[4]*
w+c[8]*a+c[12],b[13]=c[1]*v+c[5]*w+c[9]*a+c[13],b[14]=c[2]*v+c[6]*w+c[10]*a+c[14],b[15]=c[3]*v+c[7]*w+c[11]*a+c[15]):(e=c[0],g=c[1],d=c[2],n=c[3],k=c[4],m=c[5],q=c[6],l=c[7],p=c[8],u=c[9],t=c[10],r=c[11],b[0]=e,b[1]=g,b[2]=d,b[3]=n,b[4]=k,b[5]=m,b[6]=q,b[7]=l,b[8]=p,b[9]=u,b[10]=t,b[11]=r,b[12]=e*v+k*w+p*a+c[12],b[13]=g*v+m*w+u*a+c[13],b[14]=d*v+q*w+t*a+c[14],b[15]=n*v+l*w+r*a+c[15]),b},d.SIMD.translate=function(b,c,a){var e=SIMD.Float32x4.load(c,0),g=SIMD.Float32x4.load(c,4),d=SIMD.Float32x4.load(c,
8),n=SIMD.Float32x4.load(c,12);a=SIMD.Float32x4(a[0],a[1],a[2],0);c!==b&&(b[0]=c[0],b[1]=c[1],b[2]=c[2],b[3]=c[3],b[4]=c[4],b[5]=c[5],b[6]=c[6],b[7]=c[7],b[8]=c[8],b[9]=c[9],b[10]=c[10],b[11]=c[11]);e=SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(a,0,0,0,0));g=SIMD.Float32x4.mul(g,SIMD.Float32x4.swizzle(a,1,1,1,1));d=SIMD.Float32x4.mul(d,SIMD.Float32x4.swizzle(a,2,2,2,2));c=SIMD.Float32x4.add(e,SIMD.Float32x4.add(g,SIMD.Float32x4.add(d,n)));return SIMD.Float32x4.store(b,12,c),b},d.translate=a.USE_SIMD?
d.SIMD.translate:d.scalar.translate,d.scalar.scale=function(b,c,a){var e=a[0],g=a[1];a=a[2];return b[0]=c[0]*e,b[1]=c[1]*e,b[2]=c[2]*e,b[3]=c[3]*e,b[4]=c[4]*g,b[5]=c[5]*g,b[6]=c[6]*g,b[7]=c[7]*g,b[8]=c[8]*a,b[9]=c[9]*a,b[10]=c[10]*a,b[11]=c[11]*a,b[12]=c[12],b[13]=c[13],b[14]=c[14],b[15]=c[15],b},d.SIMD.scale=function(b,c,a){var e,g,d;a=SIMD.Float32x4(a[0],a[1],a[2],0);return e=SIMD.Float32x4.load(c,0),SIMD.Float32x4.store(b,0,SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(a,0,0,0,0))),g=SIMD.Float32x4.load(c,
4),SIMD.Float32x4.store(b,4,SIMD.Float32x4.mul(g,SIMD.Float32x4.swizzle(a,1,1,1,1))),d=SIMD.Float32x4.load(c,8),SIMD.Float32x4.store(b,8,SIMD.Float32x4.mul(d,SIMD.Float32x4.swizzle(a,2,2,2,2))),b[12]=c[12],b[13]=c[13],b[14]=c[14],b[15]=c[15],b},d.scale=a.USE_SIMD?d.SIMD.scale:d.scalar.scale,d.rotate=function(b,c,e,f){var g,d,n,k,m,q,l,p,u,t,r,v,w,x,y,z,A,B,H,J,M,K,D,E,I=f[0],F=f[1];f=f[2];var C=Math.sqrt(I*I+F*F+f*f);return Math.abs(C)<a.EPSILON?null:(C=1/C,I*=C,F*=C,f*=C,g=Math.sin(e),d=Math.cos(e),
n=1-d,k=c[0],m=c[1],q=c[2],l=c[3],p=c[4],u=c[5],t=c[6],r=c[7],v=c[8],w=c[9],x=c[10],y=c[11],z=I*I*n+d,A=F*I*n+f*g,B=f*I*n-F*g,H=I*F*n-f*g,J=F*F*n+d,M=f*F*n+I*g,K=I*f*n+F*g,D=F*f*n-I*g,E=f*f*n+d,b[0]=k*z+p*A+v*B,b[1]=m*z+u*A+w*B,b[2]=q*z+t*A+x*B,b[3]=l*z+r*A+y*B,b[4]=k*H+p*J+v*M,b[5]=m*H+u*J+w*M,b[6]=q*H+t*J+x*M,b[7]=l*H+r*J+y*M,b[8]=k*K+p*D+v*E,b[9]=m*K+u*D+w*E,b[10]=q*K+t*D+x*E,b[11]=l*K+r*D+y*E,c!==b&&(b[12]=c[12],b[13]=c[13],b[14]=c[14],b[15]=c[15]),b)},d.scalar.rotateX=function(b,c,a){var e=Math.sin(a);
a=Math.cos(a);var g=c[4],d=c[5],n=c[6],k=c[7],m=c[8],q=c[9],l=c[10],p=c[11];return c!==b&&(b[0]=c[0],b[1]=c[1],b[2]=c[2],b[3]=c[3],b[12]=c[12],b[13]=c[13],b[14]=c[14],b[15]=c[15]),b[4]=g*a+m*e,b[5]=d*a+q*e,b[6]=n*a+l*e,b[7]=k*a+p*e,b[8]=m*a-g*e,b[9]=q*a-d*e,b[10]=l*a-n*e,b[11]=p*a-k*e,b},d.SIMD.rotateX=function(b,c,a){var e=SIMD.Float32x4.splat(Math.sin(a));a=SIMD.Float32x4.splat(Math.cos(a));c!==b&&(b[0]=c[0],b[1]=c[1],b[2]=c[2],b[3]=c[3],b[12]=c[12],b[13]=c[13],b[14]=c[14],b[15]=c[15]);var g=SIMD.Float32x4.load(c,
4);c=SIMD.Float32x4.load(c,8);return SIMD.Float32x4.store(b,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(g,a),SIMD.Float32x4.mul(c,e))),SIMD.Float32x4.store(b,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,a),SIMD.Float32x4.mul(g,e))),b},d.rotateX=a.USE_SIMD?d.SIMD.rotateX:d.scalar.rotateX,d.scalar.rotateY=function(b,c,a){var e=Math.sin(a);a=Math.cos(a);var g=c[0],d=c[1],n=c[2],k=c[3],m=c[8],q=c[9],l=c[10],p=c[11];return c!==b&&(b[4]=c[4],b[5]=c[5],b[6]=c[6],b[7]=c[7],b[12]=c[12],b[13]=c[13],b[14]=c[14],b[15]=
c[15]),b[0]=g*a-m*e,b[1]=d*a-q*e,b[2]=n*a-l*e,b[3]=k*a-p*e,b[8]=g*e+m*a,b[9]=d*e+q*a,b[10]=n*e+l*a,b[11]=k*e+p*a,b},d.SIMD.rotateY=function(b,c,a){var e=SIMD.Float32x4.splat(Math.sin(a));a=SIMD.Float32x4.splat(Math.cos(a));c!==b&&(b[4]=c[4],b[5]=c[5],b[6]=c[6],b[7]=c[7],b[12]=c[12],b[13]=c[13],b[14]=c[14],b[15]=c[15]);var g=SIMD.Float32x4.load(c,0);c=SIMD.Float32x4.load(c,8);return SIMD.Float32x4.store(b,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,a),SIMD.Float32x4.mul(c,e))),SIMD.Float32x4.store(b,
8,SIMD.Float32x4.add(SIMD.Float32x4.mul(g,e),SIMD.Float32x4.mul(c,a))),b},d.rotateY=a.USE_SIMD?d.SIMD.rotateY:d.scalar.rotateY,d.scalar.rotateZ=function(b,c,a){var e=Math.sin(a);a=Math.cos(a);var g=c[0],d=c[1],n=c[2],k=c[3],m=c[4],q=c[5],l=c[6],p=c[7];return c!==b&&(b[8]=c[8],b[9]=c[9],b[10]=c[10],b[11]=c[11],b[12]=c[12],b[13]=c[13],b[14]=c[14],b[15]=c[15]),b[0]=g*a+m*e,b[1]=d*a+q*e,b[2]=n*a+l*e,b[3]=k*a+p*e,b[4]=m*a-g*e,b[5]=q*a-d*e,b[6]=l*a-n*e,b[7]=p*a-k*e,b},d.SIMD.rotateZ=function(b,c,a){var e=
SIMD.Float32x4.splat(Math.sin(a));a=SIMD.Float32x4.splat(Math.cos(a));c!==b&&(b[8]=c[8],b[9]=c[9],b[10]=c[10],b[11]=c[11],b[12]=c[12],b[13]=c[13],b[14]=c[14],b[15]=c[15]);var g=SIMD.Float32x4.load(c,0);c=SIMD.Float32x4.load(c,4);return SIMD.Float32x4.store(b,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(g,a),SIMD.Float32x4.mul(c,e))),SIMD.Float32x4.store(b,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,a),SIMD.Float32x4.mul(g,e))),b},d.rotateZ=a.USE_SIMD?d.SIMD.rotateZ:d.scalar.rotateZ,d.fromTranslation=function(b,
c){return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=c[0],b[13]=c[1],b[14]=c[2],b[15]=1,b},d.fromScaling=function(b,c){return b[0]=c[0],b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=c[1],b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=c[2],b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b},d.fromRotation=function(b,c,e){var f,g,d,n=e[0],k=e[1];e=e[2];var m=Math.sqrt(n*n+k*k+e*e);return Math.abs(m)<a.EPSILON?null:(m=1/m,n*=m,k*=m,e*=m,f=Math.sin(c),g=Math.cos(c),d=1-g,b[0]=n*n*d+g,b[1]=
k*n*d+e*f,b[2]=e*n*d-k*f,b[3]=0,b[4]=n*k*d-e*f,b[5]=k*k*d+g,b[6]=e*k*d+n*f,b[7]=0,b[8]=n*e*d+k*f,b[9]=k*e*d-n*f,b[10]=e*e*d+g,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b)},d.fromXRotation=function(b,c){var a=Math.sin(c),f=Math.cos(c);return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=f,b[6]=a,b[7]=0,b[8]=0,b[9]=-a,b[10]=f,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b},d.fromYRotation=function(b,c){var a=Math.sin(c),f=Math.cos(c);return b[0]=f,b[1]=0,b[2]=-a,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=a,b[9]=0,
b[10]=f,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b},d.fromZRotation=function(b,c){var a=Math.sin(c),f=Math.cos(c);return b[0]=f,b[1]=a,b[2]=0,b[3]=0,b[4]=-a,b[5]=f,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b},d.fromRotationTranslation=function(b,c,a){var e=c[0],g=c[1],d=c[2],n=c[3],k=e+e,m=g+g,q=d+d;c=e*k;var l=e*m,e=e*q,p=g*m,g=g*q,d=d*q,k=n*k,m=n*m,n=n*q;return b[0]=1-(p+d),b[1]=l+n,b[2]=e-m,b[3]=0,b[4]=l-n,b[5]=1-(c+d),b[6]=g+k,b[7]=0,b[8]=e+m,b[9]=g-k,b[10]=1-
(c+p),b[11]=0,b[12]=a[0],b[13]=a[1],b[14]=a[2],b[15]=1,b},d.getTranslation=function(b,c){return b[0]=c[12],b[1]=c[13],b[2]=c[14],b},d.getRotation=function(b,c){var a=c[0]+c[5]+c[10],f=0;return 0<a?(f=2*Math.sqrt(a+1),b[3]=.25*f,b[0]=(c[6]-c[9])/f,b[1]=(c[8]-c[2])/f,b[2]=(c[1]-c[4])/f):c[0]>c[5]&c[0]>c[10]?(f=2*Math.sqrt(1+c[0]-c[5]-c[10]),b[3]=(c[6]-c[9])/f,b[0]=.25*f,b[1]=(c[1]+c[4])/f,b[2]=(c[8]+c[2])/f):c[5]>c[10]?(f=2*Math.sqrt(1+c[5]-c[0]-c[10]),b[3]=(c[8]-c[2])/f,b[0]=(c[1]+c[4])/f,b[1]=.25*
f,b[2]=(c[6]+c[9])/f):(f=2*Math.sqrt(1+c[10]-c[0]-c[5]),b[3]=(c[1]-c[4])/f,b[0]=(c[8]+c[2])/f,b[1]=(c[6]+c[9])/f,b[2]=.25*f),b},d.fromRotationTranslationScale=function(b,c,a,f){var e=c[0],d=c[1],n=c[2],k=c[3],m=e+e,q=d+d,l=n+n;c=e*m;var p=e*q,e=e*l,u=d*q,d=d*l,n=n*l,m=k*m,q=k*q,k=k*l,l=f[0],t=f[1];f=f[2];return b[0]=(1-(u+n))*l,b[1]=(p+k)*l,b[2]=(e-q)*l,b[3]=0,b[4]=(p-k)*t,b[5]=(1-(c+n))*t,b[6]=(d+m)*t,b[7]=0,b[8]=(e+q)*f,b[9]=(d-m)*f,b[10]=(1-(c+u))*f,b[11]=0,b[12]=a[0],b[13]=a[1],b[14]=a[2],b[15]=
1,b},d.fromRotationTranslationScaleOrigin=function(b,c,a,f,g){var e=c[0],d=c[1],k=c[2],m=c[3],q=e+e,l=d+d,p=k+k;c=e*q;var u=e*l,e=e*p,t=d*l,d=d*p,k=k*p,q=m*q,l=m*l,m=m*p,p=f[0],r=f[1];f=f[2];var v=g[0],w=g[1];g=g[2];return b[0]=(1-(t+k))*p,b[1]=(u+m)*p,b[2]=(e-l)*p,b[3]=0,b[4]=(u-m)*r,b[5]=(1-(c+k))*r,b[6]=(d+q)*r,b[7]=0,b[8]=(e+l)*f,b[9]=(d-q)*f,b[10]=(1-(c+t))*f,b[11]=0,b[12]=a[0]+v-(b[0]*v+b[4]*w+b[8]*g),b[13]=a[1]+w-(b[1]*v+b[5]*w+b[9]*g),b[14]=a[2]+g-(b[2]*v+b[6]*w+b[10]*g),b[15]=1,b},d.fromQuat=
function(b,c){var a=c[0],f=c[1],g=c[2],d=c[3],n=a+a,k=f+f,m=g+g,a=a*n,q=f*n,f=f*k,l=g*n,p=g*k,g=g*m,n=d*n,k=d*k,d=d*m;return b[0]=1-f-g,b[1]=q+d,b[2]=l-k,b[3]=0,b[4]=q-d,b[5]=1-a-g,b[6]=p+n,b[7]=0,b[8]=l+k,b[9]=p-n,b[10]=1-a-f,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b},d.frustum=function(b,c,a,f,g,d,n){var e=1/(a-c),h=1/(g-f),q=1/(d-n);return b[0]=2*d*e,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=2*d*h,b[6]=0,b[7]=0,b[8]=(a+c)*e,b[9]=(g+f)*h,b[10]=(n+d)*q,b[11]=-1,b[12]=0,b[13]=0,b[14]=n*d*2*q,b[15]=0,b},d.perspective=
function(b,c,a,f,g){c=1/Math.tan(c/2);var e=1/(f-g);return b[0]=c/a,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=c,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=(g+f)*e,b[11]=-1,b[12]=0,b[13]=0,b[14]=2*g*f*e,b[15]=0,b},d.perspectiveFromFieldOfView=function(b,c,a,f){var e=Math.tan(c.upDegrees*Math.PI/180),d=Math.tan(c.downDegrees*Math.PI/180),n=Math.tan(c.leftDegrees*Math.PI/180);c=Math.tan(c.rightDegrees*Math.PI/180);var k=2/(n+c),m=2/(e+d);return b[0]=k,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=m,b[6]=0,b[7]=0,b[8]=-((n-c)*k*.5),
b[9]=(e-d)*m*.5,b[10]=f/(a-f),b[11]=-1,b[12]=0,b[13]=0,b[14]=f*a/(a-f),b[15]=0,b},d.ortho=function(b,c,a,f,g,d,n){var e=1/(c-a),h=1/(f-g),q=1/(d-n);return b[0]=-2*e,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=-2*h,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=2*q,b[11]=0,b[12]=(c+a)*e,b[13]=(g+f)*h,b[14]=(n+d)*q,b[15]=1,b},d.lookAt=function(b,c,e,f){var g,h,n,k,m,q,l,p,u,t,r=c[0],v=c[1];c=c[2];var w=f[0],x=f[1];f=f[2];var y=e[0],z=e[1];e=e[2];return Math.abs(r-y)<a.EPSILON&&Math.abs(v-z)<a.EPSILON&&Math.abs(c-e)<a.EPSILON?
d.identity(b):(l=r-y,p=v-z,u=c-e,t=1/Math.sqrt(l*l+p*p+u*u),l*=t,p*=t,u*=t,g=x*u-f*p,h=f*l-w*u,n=w*p-x*l,t=Math.sqrt(g*g+h*h+n*n),t?(t=1/t,g*=t,h*=t,n*=t):(g=0,h=0,n=0),k=p*n-u*h,m=u*g-l*n,q=l*h-p*g,t=Math.sqrt(k*k+m*m+q*q),t?(t=1/t,k*=t,m*=t,q*=t):(k=0,m=0,q=0),b[0]=g,b[1]=k,b[2]=l,b[3]=0,b[4]=h,b[5]=m,b[6]=p,b[7]=0,b[8]=n,b[9]=q,b[10]=u,b[11]=0,b[12]=-(g*r+h*v+n*c),b[13]=-(k*r+m*v+q*c),b[14]=-(l*r+p*v+u*c),b[15]=1,b)},d.str=function(b){return"mat4("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+
", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+b[14]+", "+b[15]+")"},d.frob=function(b){return Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],2)+Math.pow(b[3],2)+Math.pow(b[4],2)+Math.pow(b[5],2)+Math.pow(b[6],2)+Math.pow(b[7],2)+Math.pow(b[8],2)+Math.pow(b[9],2)+Math.pow(b[10],2)+Math.pow(b[11],2)+Math.pow(b[12],2)+Math.pow(b[13],2)+Math.pow(b[14],2)+Math.pow(b[15],2))},d.add=function(b,c,a){return b[0]=c[0]+a[0],b[1]=c[1]+a[1],b[2]=
c[2]+a[2],b[3]=c[3]+a[3],b[4]=c[4]+a[4],b[5]=c[5]+a[5],b[6]=c[6]+a[6],b[7]=c[7]+a[7],b[8]=c[8]+a[8],b[9]=c[9]+a[9],b[10]=c[10]+a[10],b[11]=c[11]+a[11],b[12]=c[12]+a[12],b[13]=c[13]+a[13],b[14]=c[14]+a[14],b[15]=c[15]+a[15],b},d.subtract=function(b,c,a){return b[0]=c[0]-a[0],b[1]=c[1]-a[1],b[2]=c[2]-a[2],b[3]=c[3]-a[3],b[4]=c[4]-a[4],b[5]=c[5]-a[5],b[6]=c[6]-a[6],b[7]=c[7]-a[7],b[8]=c[8]-a[8],b[9]=c[9]-a[9],b[10]=c[10]-a[10],b[11]=c[11]-a[11],b[12]=c[12]-a[12],b[13]=c[13]-a[13],b[14]=c[14]-a[14],b[15]=
c[15]-a[15],b},d.sub=d.subtract,d.multiplyScalar=function(b,c,a){return b[0]=c[0]*a,b[1]=c[1]*a,b[2]=c[2]*a,b[3]=c[3]*a,b[4]=c[4]*a,b[5]=c[5]*a,b[6]=c[6]*a,b[7]=c[7]*a,b[8]=c[8]*a,b[9]=c[9]*a,b[10]=c[10]*a,b[11]=c[11]*a,b[12]=c[12]*a,b[13]=c[13]*a,b[14]=c[14]*a,b[15]=c[15]*a,b},d.multiplyScalarAndAdd=function(b,c,a,f){return b[0]=c[0]+a[0]*f,b[1]=c[1]+a[1]*f,b[2]=c[2]+a[2]*f,b[3]=c[3]+a[3]*f,b[4]=c[4]+a[4]*f,b[5]=c[5]+a[5]*f,b[6]=c[6]+a[6]*f,b[7]=c[7]+a[7]*f,b[8]=c[8]+a[8]*f,b[9]=c[9]+a[9]*f,b[10]=
c[10]+a[10]*f,b[11]=c[11]+a[11]*f,b[12]=c[12]+a[12]*f,b[13]=c[13]+a[13]*f,b[14]=c[14]+a[14]*f,b[15]=c[15]+a[15]*f,b},d.exactEquals=function(b,c){return b[0]===c[0]&&b[1]===c[1]&&b[2]===c[2]&&b[3]===c[3]&&b[4]===c[4]&&b[5]===c[5]&&b[6]===c[6]&&b[7]===c[7]&&b[8]===c[8]&&b[9]===c[9]&&b[10]===c[10]&&b[11]===c[11]&&b[12]===c[12]&&b[13]===c[13]&&b[14]===c[14]&&b[15]===c[15]},d.equals=function(b,c){var e=b[0],f=b[1],g=b[2],d=b[3],n=b[4],k=b[5],m=b[6],q=b[7],l=b[8],p=b[9],u=b[10],t=b[11],r=b[12],v=b[13],
w=b[14],x=b[15],y=c[0],z=c[1],A=c[2],B=c[3],H=c[4],J=c[5],M=c[6],K=c[7],D=c[8],E=c[9],I=c[10],F=c[11],C=c[12],G=c[13],N=c[14],P=c[15];return Math.abs(e-y)<=a.EPSILON*Math.max(1,Math.abs(e),Math.abs(y))&&Math.abs(f-z)<=a.EPSILON*Math.max(1,Math.abs(f),Math.abs(z))&&Math.abs(g-A)<=a.EPSILON*Math.max(1,Math.abs(g),Math.abs(A))&&Math.abs(d-B)<=a.EPSILON*Math.max(1,Math.abs(d),Math.abs(B))&&Math.abs(n-H)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(H))&&Math.abs(k-J)<=a.EPSILON*Math.max(1,Math.abs(k),Math.abs(J))&&
Math.abs(m-M)<=a.EPSILON*Math.max(1,Math.abs(m),Math.abs(M))&&Math.abs(q-K)<=a.EPSILON*Math.max(1,Math.abs(q),Math.abs(K))&&Math.abs(l-D)<=a.EPSILON*Math.max(1,Math.abs(l),Math.abs(D))&&Math.abs(p-E)<=a.EPSILON*Math.max(1,Math.abs(p),Math.abs(E))&&Math.abs(u-I)<=a.EPSILON*Math.max(1,Math.abs(u),Math.abs(I))&&Math.abs(t-F)<=a.EPSILON*Math.max(1,Math.abs(t),Math.abs(F))&&Math.abs(r-C)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(C))&&Math.abs(v-G)<=a.EPSILON*Math.max(1,Math.abs(v),Math.abs(G))&&Math.abs(w-
N)<=a.EPSILON*Math.max(1,Math.abs(w),Math.abs(N))&&Math.abs(x-P)<=a.EPSILON*Math.max(1,Math.abs(x),Math.abs(P))},d})},"esri/layers/vectorTiles/views/2d/engine/Container":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./DisplayObject"],function(a,d,b,c){var e;!function(b){b[b.BEFORE=0]="BEFORE";b[b.ATTACHING=1]="ATTACHING";b[b.DETACHING=2]="DETACHING";b[b.RENDERING=3]="RENDERING";b[b.AFTER=4]="AFTER";b[b.DONE=5]="DONE"}(e||(e={}));return function(c){function a(){var b=
null!==c&&c.apply(this,arguments)||this;return b._childrenSet=new Set,b._childrenToAttach=[],b._childrenToDetach=[],b._renderPhase=e.DONE,b.children=[],b}return b(a,c),Object.defineProperty(a.prototype,"numChildren",{get:function(){return this.children.length},enumerable:!0,configurable:!0}),a.prototype.detach=function(b){var c=this.children;b=this.prepareChildrenRenderParameters(b);for(var a=c.length,e=0;a>e;e++){var f=c[e];f.attached&&(this.detachChild(f,b),f.attached=!1,f.parent=null)}},a.prototype.doRender=
function(b){var c=this.prepareChildrenRenderParameters(b);this._renderPhase=e.BEFORE;this.beforeRenderChildren(b,c);this._renderPhase=e.ATTACHING;this.attachChildren(c)||this.requestRender();this._renderPhase=e.DETACHING;for(var a=this._childrenToDetach;0<a.length;){var f=a.shift();this.detachChild(f,c);f.attached=!1;f.parent=null}this._renderPhase=e.RENDERING;this.renderChildren(c);this._renderPhase=e.AFTER;this.afterRenderChildren(b,c);this._renderPhase=e.DONE},a.prototype.addChild=function(b){return this.addChildAt(b,
this.children.length)},a.prototype.addChildAt=function(b,c){if((void 0===c&&(c=this.numChildren),!b)||this.contains(b))return b;var a=b.parent;a&&a!==this&&a.removeChild(b);c>=this.numChildren?this.children.push(b):this.children.splice(c,0,b);this._childrenSet.add(b);a=this._childrenToDetach.indexOf(b);return-1<a&&this._childrenToDetach.splice(a,1),this._childrenToAttach.push(b),this._renderPhase>=e.RENDERING&&this.requestRender(),b},a.prototype.contains=function(b){return this._childrenSet.has(b)},
a.prototype.getChildIndex=function(b){return this.children.indexOf(b)},a.prototype.getChildAt=function(b){return 0>b||b>this.children.length?null:this.children[b]},a.prototype.removeAllChildren=function(){for(var b=this.numChildren;b--;)this.removeChildAt(0)},a.prototype.removeChild=function(b){return this.contains(b)?this.removeChildAt(this.getChildIndex(b)):b},a.prototype.removeChildAt=function(b){if(0>b||b>=this.children.length)return null;b=this.children.splice(b,1)[0];this._childrenSet["delete"](b);
if(b.attached)this._childrenToDetach.push(b),this._renderPhase>=e.RENDERING&&this.requestRender();else{var c=this._childrenToAttach.indexOf(b);-1<c&&this._childrenToAttach.splice(c,1)}return b},a.prototype.requestChildRender=function(b){b&&b.parent===this&&this._renderPhase>=e.RENDERING&&this.requestRender()},a.prototype.setChildIndex=function(b,c){var a=this.getChildIndex(b);-1<a&&(this.children.splice(a,1),this.children.splice(c,0,b),this._renderPhase>=e.RENDERING&&this.requestRender())},a.prototype.sortChildren=
function(b){return this._renderPhase>e.RENDERING&&this.requestRender(),this.children.sort(b)},a.prototype.attachChildren=function(b){var c=this._childrenToAttach;if(0===c.length)return!0;for(var a=0===c.length;!a;)a=c.shift(),this.attachChild(a,b)&&(a.attached=!0,a.parent=this),a=0===c.length;return 0===c.length},a.prototype.renderChildren=function(b){for(var c=this.children,a=c.length,e=0;a>e;e++){var f=c[e];f.attached&&this.renderChild(f,b)}},a.prototype.beforeRenderChildren=function(b,c){},a.prototype.attachChild=
function(b,c){return b.attach(c)},a.prototype.detachChild=function(b,c){b.detach(c)},a.prototype.renderChild=function(b,c){b.processRender(c)},a.prototype.afterRenderChildren=function(b,c){},a}(c)})},"esri/layers/vectorTiles/views/2d/engine/DisplayObject":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./Evented"],function(a,d,b,c){return function(c){function a(){var b=null!==c&&c.apply(this,arguments)||this;return b._renderRequestedCalled=!1,b._attached=!1,b._opacity=
1,b.renderRequested=!1,b._visible=!0,b}return b(a,c),Object.defineProperty(a.prototype,"attached",{get:function(){return this._attached},set:function(b){this._attached!==b&&(this._attached=b,b?this.hasEventListener("attach")&&this.emit("attach"):this.hasEventListener("detach")&&this.emit("detach"))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"opacity",{get:function(){return this._opacity},set:function(b){this._opacity!==b&&(this._opacity=b,this.requestRender())},enumerable:!0,
configurable:!0}),Object.defineProperty(a.prototype,"visible",{get:function(){return this._visible},set:function(b){this._visible!==b&&(this._visible=b,this.requestRender())},enumerable:!0,configurable:!0}),a.prototype.attach=function(b){return!0},a.prototype.detach=function(b){},a.prototype.processRender=function(b){this._renderRequestedCalled=!1;this.doRender(b);this._renderRequestedCalled||(this.renderRequested=!1);this.hasEventListener("post-render")&&this.emit("post-render")},a.prototype.requestRender=
function(){var b=this.renderRequested;this.renderRequested=this._renderRequestedCalled=!0;this.parent&&this.parent.requestChildRender(this);b!==this.renderRequested&&this.hasEventListener("will-render")&&this.emit("will-render")},a.prototype.dispose=function(){},a}(c.Evented)})},"esri/layers/vectorTiles/views/2d/engine/Evented":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","dojo/aspect","dojo/on"],function(a,d,b,c,e){Object.defineProperty(d,"__esModule",{value:!0});
a=function(){function b(){}return b.prototype.on=function(b,a){return c.after(this,"on"+b,a,!0)},b.prototype.once=function(b,c){return e.once(this,b,c)},b.prototype.emit=function(b){e.emit(this,b,this)},b.prototype.hasEventListener=function(b){b="on"+b;return!(!this[b]||!this[b].after)},b}();d.Evented=a;d.EventedMixin=function(a){return function(a){function f(){return null!==a&&a.apply(this,arguments)||this}return b(f,a),f.prototype.on=function(b,a){return c.after(this,"on"+b,a,!0)},f.prototype.once=
function(b,c){return e.once(this,b,c)},f.prototype.emit=function(b,c){e.emit(this,b,c)},f.prototype.hasEventListener=function(b){b="on"+b;return!(!this[b]||!this[b].after)},f}(a)}})},"esri/layers/vectorTiles/views/vectorTiles/renderers/Renderer":function(){define("require exports ../../webgl/FramebufferObject ../../../core/libs/gl-matrix/mat4 ../GeometryUtils ./BackgroundRenderer ./LineRenderer ./FillRenderer ./SymbolRenderer ./TileInfoRenderer ./FadeRecorder".split(" "),function(a,d,b,c,e,f,g,h,
n,k,m){return function(){function a(){this._extrudeRotateVector=new Float32Array([0,0,1]);this._extrudeScaleVector=new Float32Array([1,1,1]);this._state={rotation:0,width:0,height:0};this._cachedRotation=this._cachedHeight=this._cachedWidth=0}return a.prototype.initialize=function(b,c,a){void 0===a&&(a=!0);this._SpriteMosaic=b;this._glyphMosaic=c;this._ignoreSpeed=!a;this._backgroundRenderer=new f;this._lineRenderer=new g;this._fillRenderer=new h;this._symbolRenderer=new n;this._tileInfoRenderer=
new k;this._fadeRecorder=new m.FadeRecorder(300);this._extrudeMatrix=new Float32Array(16);this._extrudeNoRotationMatrix=new Float32Array(16);this._backgroundColor=new Float32Array([1,0,0,1])},a.prototype.dispose=function(){this._backgroundRenderer&&(this._backgroundRenderer.dispose(),this._backgroundRenderer=null);this._lineRenderer&&(this._lineRenderer.dispose(),this._lineRenderer=null);this._fillRenderer&&(this._fillRenderer.dispose(),this._fillRenderer=null);this._symbolRenderer&&(this._symbolRenderer.dispose(),
this._symbolRenderer=null);this._tileInfoRenderer&&(this._tileInfoRenderer.dispose(),this._tileInfoRenderer=null);this._hittestFBO&&(this._hittestFBO.dispose(),this._hittestFBO=null)},a.prototype.setStateParams=function(b,a,f){this._fadeRecorder.recordLevel(f);this._state=b;(this._state.width!==this._cachedWidth||this._state.height!==this._cachedHeight||this._state.rotation!==this._cachedRotation)&&(this._extrudeScaleVector[0]=2/b.width,this._extrudeScaleVector[1]=-2/b.height,c.identity(this._extrudeMatrix),
c.rotate(this._extrudeMatrix,this._extrudeMatrix,-b.rotation*e.C_DEG_TO_RAD,this._extrudeRotateVector),c.scale(this._extrudeMatrix,this._extrudeMatrix,this._extrudeScaleVector),c.transpose(this._extrudeMatrix,this._extrudeMatrix),c.identity(this._extrudeNoRotationMatrix),c.scale(this._extrudeNoRotationMatrix,this._extrudeNoRotationMatrix,this._extrudeScaleVector),c.transpose(this._extrudeNoRotationMatrix,this._extrudeNoRotationMatrix),this._cachedWidth=this._state.width,this._cachedHeight=this._state.height,
this._cachedRotation=this._state.rotation)},a.prototype.drawClippingMasks=function(b,c){if(0!==c.length){b.setDepthWriteEnabled(!1);b.setDepthTestEnabled(!1);b.setStencilTestEnabled(!0);b.setBlendingEnabled(!1);b.setColorMask(!1,!1,!1,!1);b.setStencilOp(7680,7680,7681);b.setStencilWriteMask(255);b.setClearStencil(0);b.clear(b.gl.STENCIL_BUFFER_BIT);for(var a=0;a<c.length;a++){var e=c[a];e.attached&&e.visible&&(b.setStencilFunctionSeparate(1032,519,e.stencilData.reference,e.stencilData.mask),this._backgroundRenderer.renderSolidColor(b,
{u_matrix:e.tileTransform.transform,u_normalized_origin:e.tileTransform.displayCoord,u_coord_range:e.coordRange,u_depth:0,u_color:this._backgroundColor}))}b.setColorMask(!0,!0,!0,!0);b.setBlendingEnabled(!0)}},a.prototype.renderDebug=function(b,c){var a=c.key;this._backgroundColor.set([a.col%2,a.row%2,0===a.col%2&&0===a.row%2?1:0,.5]);this._backgroundRenderer.renderSolidColor(b,{u_matrix:c.tileTransform.transform,u_normalized_origin:c.tileTransform.displayCoord,u_coord_range:c.coordRange,u_depth:0,
u_color:this._backgroundColor})},a.prototype.renderBucket=function(b,c,a,e,f,g,d,h){if(!(void 0!==d.minzoom&&d.minzoom>a||void 0!==d.maxzoom&&d.maxzoom<=a))switch(c.type){case 0:2!==f&&this._renderBackground(b,c,a,f,g,d,h);break;case 1:2!==f&&this._renderFill(b,c,a,f,g,d,h);break;case 2:1!==f&&3!==f||this._renderLine(b,c,a,f,g,d,h);break;case 3:2!==f&&3!==f||this._renderSymbol(b,c,a,f,e,g,d,h)}},a.prototype.renderTileInfo=function(b,c){this._tileInfoRenderer.render(b,c)},a.prototype.needsRedraw=function(){return this._fadeRecorder.needsRedraw()},
a.prototype.hitTest=function(c,a,e,f,g,d,h){var l=[0,0],k=[0,0],n=c.state;n.toMap(l,[0,0]);n.toMap(k,[d,d]);a=f.filter(function(b){return!(l[0]>b.bounds[2]||k[0]<b.bounds[0]||l[1]<b.bounds[3]||k[1]>b.bounds[1])});if(0===a.length)return[];a.sort(function(b,c){return b.key.level-c.key.level});e=a.length;for(f=1;e>=f;f++){var m=a[f-1];m.attached&&(m.stencilData.reference=f,m.stencilData.mask=255)}h(n,g,a);g=c.context;this._hittestFBO||(this._hittestFBO=b.create(g,{colorTarget:0,depthStencilTarget:3,
width:d,height:d}));h=g.getViewport();n=g.getBoundFramebufferObject();g.bindFramebuffer(this._hittestFBO);g.setViewport(0,0,d,d);f=g.gl;g.setDepthWriteEnabled(!0);g.setStencilWriteMask(255);g.setClearColor(1,1,1,1);g.setClearDepth(1);g.setClearStencil(0);g.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT|f.STENCIL_BUFFER_BIT);g.setDepthWriteEnabled(!1);this.drawClippingMasks(g,a);g.setBlendingEnabled(!1);g.setStencilWriteMask(0);g.setStencilOp(7680,7680,7681);g.setDepthFunction(515);g.setDepthTestEnabled(!0);
g.setDepthWriteEnabled(!0);g.setStencilTestEnabled(!0);for(f=0;e>f;f++)m=a[f],m.attached&&m.doRender(c);g.setStencilTestEnabled(!1);g.setDepthTestEnabled(!1);this._readbackBuffer||(this._readbackBuffer=new Uint8Array(4*d*d),this._readbackBuffer32=new Uint32Array(this._readbackBuffer.buffer));this._hittestFBO.readPixels(0,0,d,d,6408,5121,this._readbackBuffer);c=new Set;d*=d;a=this._readbackBuffer32[Math.round(d/2)];4294967295!==a&&c.add(a);for(f=0;d>f;f++)a=this._readbackBuffer32[f],4294967295!==a&&
c.add(a);g.bindFramebuffer(n);g.setViewport(h.x,h.y,h.width,h.height);var p=[];return c.forEach(function(b){p.push(b)}),p},a.prototype._renderBackground=function(b,c,a,e,f,g,d){this._backgroundRenderer.render(b,c,a,e,f,g,this._SpriteMosaic,this._SpriteMosaic.pixelRatio,d)},a.prototype._renderLine=function(b,c,a,e,f,g,d){this._lineRenderer.render(b,c,a,e,this._state,f,g,this._SpriteMosaic,this._extrudeMatrix,this._SpriteMosaic.pixelRatio,d)},a.prototype._renderFill=function(b,c,a,e,f,g,d){this._fillRenderer.render(b,
c,a,this._state.rotation,e,f,g,this._SpriteMosaic,this._extrudeMatrix,this._SpriteMosaic.pixelRatio,d)},a.prototype._renderSymbol=function(b,c,a,e,f,g,d,h){var l=!0;f===g.key.level&&(l=!1);b.setStencilTestEnabled(l);this._symbolRenderer.render(b,c,a,e,this._state.rotation,this._fadeRecorder.getFadeValues(this._ignoreSpeed),g,d,this._SpriteMosaic,this._glyphMosaic,this._extrudeMatrix,this._extrudeNoRotationMatrix,this._SpriteMosaic.pixelRatio,h)},a}()})},"esri/layers/vectorTiles/views/webgl/FramebufferObject":function(){define(["require",
"exports","./Texture"],function(a,d,b){return function(){function c(a,f,g,d){if(this._context=null,this._glName=null,this._depthAttachment=null,this._stencilAttachment=null,this._colorAttachment=null,this._initialized=!1,this._context=a,this._desc={colorTarget:f.colorTarget,depthStencilTarget:f.depthStencilTarget,width:f.width,height:f.height,multisampled:f.multisampled},this._id=c._nextId++,g)a=void 0,g instanceof b?(this._colorAttachment=g,a=g.descriptor):(a=g,this._colorAttachment=new b(this._context,
a)),0!==this._desc.colorTarget&&console.error("Framebuffer is initialized with a texture however the descriptor indicates using a renderbuffer color attachment!"),c._validateTextureDimensions(a,this._desc);d&&(this._context.extensions.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),g=void 0,d instanceof b?(this._depthStencilTexture=d,g=this._depthStencilTexture.descriptor):(g=d,this._depthStencilTexture=
new b(this._context,g)),c._validateTextureDimensions(g,this._desc))}return c.create=function(b,a){return new c(b,a)},c.createWithAttachments=function(b,a,g,d){return new c(b,g,a,d)},Object.defineProperty(c.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0}),
Object.defineProperty(c.prototype,"colorTexture",{get:function(){return this._colorAttachment instanceof b?this._colorAttachment:null},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"depthStencilTexture",{get:function(){return this._depthStencilTexture},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"width",{get:function(){return this._desc.width},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"height",{get:function(){return this._desc.height},
enumerable:!0,configurable:!0}),c.prototype.dispose=function(){this._context&&this._glName&&(this._disposeColorAttachment(),this._disposeDepthStencilAttachments(),this._context.gl.deleteFramebuffer(this._glName),this._glName=null)},c.prototype.attachColorTexture=function(b){if(b){if(c._validateTextureDimensions(b.descriptor,this._desc),this._disposeColorAttachment(),this._initialized){this._context.bindFramebuffer(this);var a=this._context.gl;a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,
a.TEXTURE_2D,b.glName,0)}this._colorAttachment=b}},c.prototype.detachColorTexture=function(){var c=void 0;if(this._colorAttachment instanceof b){if(c=this._colorAttachment,this._initialized){this._context.bindFramebuffer(this);var a=this._context.gl;this._context.gl.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,null,0)}this._colorAttachment=null}return c},c.prototype.attachDepthStencilTexture=function(b){if(b){var a=b.descriptor;if(34041!==a.pixelFormat&&console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!"),
34042!==a.dataType&&console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8_WEBGL!"),this._context.extensions.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture!"),c._validateTextureDimensions(a,this._desc),4!==this._desc.depthStencilTarget&&(this._desc.depthStencilTarget=4),this._disposeDepthStencilAttachments(),this._initialized)this._context.bindFramebuffer(this),a=this._context.gl,a.framebufferTexture2D(a.FRAMEBUFFER,
a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,b.glName,0);this._depthStencilTexture=b}},c.prototype.detachDepthStencilTexture=function(){var b=this._depthStencilTexture;if(b&&this._initialized){this._context.bindFramebuffer(this);var c=this._context.gl;this._context.gl.framebufferTexture2D(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.TEXTURE_2D,null,0)}return this._depthStencilTexture=null,b},c.prototype.copyToTexture=function(b,c,a,d,n,k,m){(0>b||0>c||0>n||0>k)&&console.error("Offsets cannot be negative!");
(0>=a||0>=d)&&console.error("Copy width and height must be greater than zero!");var e=this._desc,f=m.descriptor;3553!==m.descriptor.target&&console.error("Texture target must be TEXTURE_2D!");(b+a>e.width||c+d>e.height||n+a>f.width||k+d>f.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");e=this._context;e.bindTexture(m);e.bindFramebuffer(this);e.gl.copyTexSubImage2D(3553,0,n,k,b,c,a,d)},c.prototype.readPixels=function(b,c,a,d,n,k,m){(0>=
a||0>=d)&&console.error("Copy width and height must be greater than zero!");m||console.error("Target memory is not initialized!");this._context.bindFramebuffer(this);this._context.gl.readPixels(b,c,a,d,n,k,m)},c.prototype.resize=function(a,f){var e=this._desc;if(e.width!==a||e.height!==f){if(!this._initialized){if(e.width=a,e.height=f,this._colorAttachment instanceof b)e=this._colorAttachment,e.resize(a,f);return void(this._depthStencilTexture&&this._depthStencilTexture.resize(a,f))}if(e.width=a,
e.height=f,this._colorAttachment instanceof b){var e=this._colorAttachment,d=e.descriptor;d.width=a;d.height=f;this._colorAttachment.dispose();this._colorAttachment=new b(this._context,d);c._validateTextureDimensions(e.descriptor,this._desc)}else this._colorAttachment&&this._disposeColorAttachment();null!=this._depthStencilTexture?(d=this._depthStencilTexture.descriptor,d.width=a,d.height=f,this._depthStencilTexture.dispose(),this._depthStencilTexture=new b(this._context,d)):(this._depthAttachment||
this._stencilAttachment)&&this._disposeDepthStencilAttachments();this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null);this._initialized=!1}},c.prototype.initialize=function(){if(this._initialized)return!1;var c=this._context.gl;this._glName&&c.deleteFramebuffer(this._glName);var a=c.createFramebuffer(),g=this._desc;if(c.bindFramebuffer(c.FRAMEBUFFER,a),!this._colorAttachment)if(0===g.colorTarget)this._colorAttachment=new b(this._context,{target:3553,pixelFormat:6408,
dataType:5121,samplingMode:9728,wrapMode:33071,width:g.width,height:g.height});else{var d=c.createRenderbuffer();c.bindRenderbuffer(c.RENDERBUFFER,d);c.renderbufferStorage(c.RENDERBUFFER,c.RGBA4,g.width,g.height);c.framebufferRenderbuffer(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.RENDERBUFFER,d);this._colorAttachment=d}this._colorAttachment instanceof b&&c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,this._colorAttachment.glName,0);switch(g.depthStencilTarget){case 1:case 3:d=c.createRenderbuffer();
c.bindRenderbuffer(c.RENDERBUFFER,d);var n=1===g.depthStencilTarget?c.DEPTH_ATTACHMENT:c.DEPTH_STENCIL_ATTACHMENT;c.renderbufferStorage(c.RENDERBUFFER,1===g.depthStencilTarget?c.DEPTH_COMPONENT16:c.DEPTH_STENCIL,g.width,g.height);c.framebufferRenderbuffer(c.FRAMEBUFFER,n,c.RENDERBUFFER,d);this._depthAttachment=d;break;case 2:d=c.createRenderbuffer();c.bindRenderbuffer(c.RENDERBUFFER,d);c.renderbufferStorage(c.RENDERBUFFER,c.STENCIL_INDEX8,g.width,g.height);c.framebufferRenderbuffer(c.FRAMEBUFFER,
c.STENCIL_ATTACHMENT,c.RENDERBUFFER,d);this._stencilAttachment=d;break;case 4:this._depthStencilTexture||(this._context.extensions.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),this._depthStencilTexture=new b(this._context,{target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:g.width,height:g.height})),c.framebufferTexture2D(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,
c.TEXTURE_2D,this._depthStencilTexture.glName,0)}return c.checkFramebufferStatus(c.FRAMEBUFFER)!==c.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer is incomplete!"),this._glName=a,this._initialized=!0,!0},c.prototype._disposeColorAttachment=function(){if(this._colorAttachment instanceof b){var c=this._colorAttachment;if(this._initialized){this._context.bindFramebuffer(this);var a=this._context.gl;a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,null,0)}c.dispose()}else this._colorAttachment instanceof
WebGLRenderbuffer&&(c=this._colorAttachment,a=this._context.gl,this._initialized&&(this._context.bindFramebuffer(this),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.RENDERBUFFER,null)),this._context.gl.deleteRenderbuffer(c));this._colorAttachment=null},c.prototype._disposeDepthStencilAttachments=function(){var b=this._context.gl;if(this._depthAttachment){if(this._initialized){this._context.bindFramebuffer(this);var c=this._context.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,1===this._desc.depthStencilTarget?
c.DEPTH_ATTACHMENT:c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,null)}b.deleteRenderbuffer(this._depthAttachment);this._depthAttachment=null}this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),c=this._context.gl,c.framebufferRenderbuffer(c.FRAMEBUFFER,c.STENCIL_ATTACHMENT,c.RENDERBUFFER,null)),b.deleteRenderbuffer(this._stencilAttachment),this._stencilAttachment=null);this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),b=this._context.gl,
b.framebufferTexture2D(b.FRAMEBUFFER,b.DEPTH_STENCIL_ATTACHMENT,b.TEXTURE_2D,null,0)),this._depthStencilTexture.dispose(),this._depthStencilTexture=null)},c._validateTextureDimensions=function(b,c){console.assert(0<=b.width&&0<=b.height);3553!==b.target&&console.error("Texture type must be TEXTURE_2D!");void 0!==c.width&&0<=c.width&&void 0!==c.height&&0<=c.height?(c.width!==b.width||c.height!==b.height)&&console.error("Color attachment texture must match the framebuffer's!"):(c.width=b.width,c.height=
b.height)},c._nextId=0,c}()})},"esri/layers/vectorTiles/views/webgl/Texture":function(){define(["require","exports"],function(a,d){return function(){function b(c,a,f){this._glName=this._context=null;this._id=-1;this._desc=void 0;this._wrapModeDirty=this._samplingModeDirty=!1;this._boundToUnits=new Set;this._context=c;this._desc={pixelFormat:a.pixelFormat,internalFormat:a.internalFormat,dataType:a.dataType,target:a.target?a.target:3553,samplingMode:a.samplingMode?a.samplingMode:9729,wrapMode:a.wrapMode?
a.wrapMode:10497,maxAnisotropy:a.maxAnisotropy,flipped:void 0!==a.flipped?a.flipped:!1,hasMipmap:void 0!==a.hasMipmap?a.hasMipmap:!1,level:void 0!==a.level?a.level:0,unpackAlignment:a.unpackAlignment?a.unpackAlignment:4,width:a.width,height:a.height,preMultiplyAlpha:void 0!==a.preMultiplyAlpha?a.preMultiplyAlpha:!1};this._id=++b._nextId;this.setData(f)}return Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"glName",
{get:function(){return this._glName},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0}),b.prototype.dispose=function(){var b=this;if(this._context){if(this._glName){var a=this._context.gl;this._boundToUnits.forEach(function(c){b._context.bindTexture(null,c)});a.deleteTexture(this._glName);this._glName=null}this._context=null}},b.prototype.resize=function(b,a){var c=this._desc;c.width===b&&c.height===a||
(c.width=b,c.height=a,this.setData(null))},b.prototype.setData=function(c){var a=this._context.gl;this._glName||(this._glName=a.createTexture());void 0===c&&(c=null);null===c&&(this._desc.width=this._desc.width||4,this._desc.height=this._desc.height||4);var f=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var d=this._desc;b._validateTexture(d);a.pixelStorei(a.UNPACK_ALIGNMENT,d.unpackAlignment);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,d.flipped?1:0);a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
d.preMultiplyAlpha);c instanceof ImageData||c instanceof HTMLImageElement||c instanceof HTMLCanvasElement||c instanceof HTMLVideoElement?(d.width&&d.height&&console.assert(c.width===d.width&&c.height===d.height),a.texImage2D(a.TEXTURE_2D,d.level,d.internalFormat?d.internalFormat:d.pixelFormat,d.pixelFormat,d.dataType,c),void 0===this._desc.width&&(this._desc.width=c.width),void 0===this._desc.height&&(this._desc.height=c.height)):((null==d.width||null==d.height)&&console.error("Width and height must be specified!"),
a.texImage2D(a.TEXTURE_2D,d.level,d.internalFormat?d.internalFormat:d.pixelFormat,d.width,d.height,0,d.pixelFormat,d.dataType,c));d.hasMipmap&&this.generateMipmap();b._applySamplingMode(a,this._desc);b._applyWrapMode(a,this._desc);b._applyAnisotropicFilteringParameters(this._context,this._desc);this._context.bindTexture(f,0)},b.prototype.updateData=function(b,a,f,d,h,n){n||console.error("An attempt to use uninitialized data!");this._glName||console.error("An attempt to update uninitialized texture!");
var c=this._context.gl,e=this._desc,g=this._context.getBoundTexture(0);this._context.bindTexture(this,0);(0>a||0>f||d>e.width||h>e.height||a+d>e.width||f+h>e.height)&&console.error("An attempt to update out of bounds of the texture!");n instanceof ImageData||n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement?(console.assert(n.width===d&&n.height===h),c.texSubImage2D(c.TEXTURE_2D,b,a,f,e.pixelFormat,e.dataType,n)):c.texSubImage2D(c.TEXTURE_2D,b,a,f,d,h,e.pixelFormat,
e.dataType,n);this._context.bindTexture(g,0)},b.prototype.generateMipmap=function(){var c=this._desc;c.hasMipmap||(c.hasMipmap=!0,b._validateTexture(c));9729===c.samplingMode?(this._samplingModeDirty=!0,c.samplingMode=9985):9728===c.samplingMode&&(this._samplingModeDirty=!0,c.samplingMode=9984);c=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var a=this._context.gl;a.generateMipmap(a.TEXTURE_2D);this._context.bindTexture(c,0)},b.prototype.setSamplingMode=function(c){c!==this._desc.samplingMode&&
(this._desc.samplingMode=c,b._validateTexture(this._desc),this._samplingModeDirty=!0)},b.prototype.setWrapMode=function(c){c!==this._desc.wrapMode&&(this._desc.wrapMode=c,b._validateTexture(this._desc),this._wrapModeDirty=!0)},b.prototype.applyChanges=function(){var c=this._context.gl,a=this._desc;this._samplingModeDirty&&(b._applySamplingMode(c,a),this._samplingModeDirty=!1);this._wrapModeDirty&&(b._applyWrapMode(c,a),this._wrapModeDirty=!1)},b.prototype.setBoundToUnit=function(b,a){a?this._boundToUnits.add(b):
this._boundToUnits["delete"](b)},b._isPowerOfTwo=function(b){return 0===(b&b-1)},b._validateTexture=function(c){(0>c.width||0>c.height)&&console.error("Negative dimension parameters are not allowed!");b._isPowerOfTwo(c.width)&&b._isPowerOfTwo(c.height)||(33071!==c.wrapMode&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),c.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))},b._applySamplingMode=function(b,a){var c=a.samplingMode;9985===c||9987===
c?c=9729:(9984===c||9986===c)&&(c=9728);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,c);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,a.samplingMode)},b._applyWrapMode=function(b,a){b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,a.wrapMode);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,a.wrapMode)},b._applyAnisotropicFilteringParameters=function(b,a){if(null!=a.maxAnisotropy){var c=b.extensions.textureFilterAnisotropic;if(c){var e=b.gl;e.texParameterf(e.TEXTURE_2D,c.TEXTURE_MAX_ANISOTROPY_EXT,
a.maxAnisotropy)}}},b._nextId=0,b}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/BackgroundRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat3 ../../../core/libs/gl-matrix/vec4 ../../webgl/VertexArrayObject ../../webgl/BufferObject ../MemoryBuffer ../../webgl/ShaderVariations ./vtShaderSnippets ./rendererUtils".split(" "),function(a,d,b,c,e,f,g,h,n,k){return function(){function a(){this._solidAttributeLocations={a_pos:0};this._attributeLocations={a_pos:0,a_id:1};
this._patternMatrix=b.create();this._color=c.create();this._rendererInitialized=this._solidrendererInitialized=!1;this._color.set([1,0,0,1])}return a.prototype.dispose=function(){this._solidVertexArrayObject&&(this._solidVertexArrayObject.dispose(),this._solidVertexArrayObject=null);this._vertexArrayObject&&(this._vertexArrayObject.dispose(),this._vertexArrayObject=null)},a.prototype.renderSolidColor=function(b,c){this._solidrendererInitialized||this._initializeSolidRenderer(b);b.bindVAO(this._solidVertexArrayObject);
var a=this._shaderVariations.getProgram([!1,!1],void 0,void 0,this._solidAttributeLocations);b.bindProgram(a);a.setUniformMatrix4fv("u_transformMatrix",c.u_matrix);a.setUniform2fv("u_normalized_origin",c.u_normalized_origin);a.setUniform1f("u_coord_range",c.u_coord_range||4096);a.setUniform1f("u_depth",c.u_depth||0);a.setUniform4fv("u_color",c.u_color||this._color);b.drawArrays(5,0,4);b.bindVAO()},a.prototype.render=function(c,a,e,f,d,g,h,n,m){this._rendererInitialized||this._initialize(c);var l=
g.getPaintValue("background-color",e);m*=g.getPaintValue("background-opacity",e);var p=g.getPaintValue("background-pattern",e),q=void 0!==p,u=l[3]*m,t=q||1>u;if(!(t&&0===f||!t&&1===f)){t=3===f;f=this._shaderVariations.getProgram([q,t],void 0,void 0,this._attributeLocations);if(c.bindVAO(this._vertexArrayObject),c.bindProgram(f),f.setUniform1f("u_coord_range",d.coordRange),f.setUniform1f("u_depth",g.z||0),f.setUniformMatrix4fv("u_transformMatrix",d.tileTransform.transform),f.setUniform2fv("u_normalized_origin",
d.tileTransform.displayCoord),q){g=h.getMosaicItemPosition(p,!0);if(!g)return;e=d.coordRange/512/Math.pow(2,Math.floor(e)-d.key.level)/n;b.identity(this._patternMatrix);d=1/(g.size[1]*e);this._patternMatrix[0]=1/(g.size[0]*e);this._patternMatrix[4]=d;h.bind(c,9729,0);f.setUniformMatrix3fv("u_pattern_matrix",this._patternMatrix);f.setUniform1f("u_opacity",m);f.setUniform2f("u_pattern_tl",g.tl[0],g.tl[1]);f.setUniform2f("u_pattern_br",g.br[0],g.br[1]);f.setUniform1i("u_texture",0)}else this._color[0]=
u*l[0],this._color[1]=u*l[1],this._color[2]=u*l[2],this._color[3]=u,f.setUniform4fv("u_color",this._color);t&&(a=k.int32To4Bytes(a.layerID),f.setUniform4f("u_id",a[0],a[1],a[2],a[3]));c.drawArrays(5,0,4);c.bindVAO()}},a.prototype._initializeSolidRenderer=function(b){if(this._solidrendererInitialized)return!0;if(!this._shaderVariations){var c=new h("background",["backgroundVS","backgroundFS"],[],n,b);c.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");c.addDefine("ID","ID",[!0,!0],"ID");this._shaderVariations=
c}c=new Int8Array([0,0,1,0,0,1,1,1]);c=f.createVertex(b,35044,c);return this._solidVertexArrayObject=new e(b,{a_pos:0},{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},{geometry:c}),this._solidrendererInitialized=!0,!0},a.prototype._initialize=function(b){if(this._rendererInitialized)return!0;if(!this._shaderVariations){var c=new h("background",["backgroundVS","backgroundFS"],[],n,b);c.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");c.addDefine("ID","ID",[!0,
!0],"ID");this._shaderVariations=c}c=[];c.push(g.i1616to32(0,0));c.push(g.i1616to32(1,0));c.push(g.i1616to32(0,1));c.push(g.i1616to32(1,1));c=new Uint32Array(c);c=f.createVertex(b,35044,c);return this._vertexArrayObject=new e(b,{a_pos:0},{geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:4,normalized:!1,divisor:0}]},{geometry:c}),this._rendererInitialized=!0,!0},a}()})},"esri/layers/vectorTiles/core/libs/gl-matrix/mat3":function(){define(["./common"],function(a){var d={};return d.create=function(){var b=
new a.ARRAY_TYPE(9);return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=1,b[5]=0,b[6]=0,b[7]=0,b[8]=1,b},d.fromMat4=function(b,c){return b[0]=c[0],b[1]=c[1],b[2]=c[2],b[3]=c[4],b[4]=c[5],b[5]=c[6],b[6]=c[8],b[7]=c[9],b[8]=c[10],b},d.clone=function(b){var c=new a.ARRAY_TYPE(9);return c[0]=b[0],c[1]=b[1],c[2]=b[2],c[3]=b[3],c[4]=b[4],c[5]=b[5],c[6]=b[6],c[7]=b[7],c[8]=b[8],c},d.copy=function(b,c){return b[0]=c[0],b[1]=c[1],b[2]=c[2],b[3]=c[3],b[4]=c[4],b[5]=c[5],b[6]=c[6],b[7]=c[7],b[8]=c[8],b},d.fromValues=function(b,
c,e,f,d,h,n,k,m){var g=new a.ARRAY_TYPE(9);return g[0]=b,g[1]=c,g[2]=e,g[3]=f,g[4]=d,g[5]=h,g[6]=n,g[7]=k,g[8]=m,g},d.set=function(b,c,a,f,d,h,n,k,m,q){return b[0]=c,b[1]=a,b[2]=f,b[3]=d,b[4]=h,b[5]=n,b[6]=k,b[7]=m,b[8]=q,b},d.identity=function(b){return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=1,b[5]=0,b[6]=0,b[7]=0,b[8]=1,b},d.transpose=function(b,c){if(b===c){var a=c[1],f=c[2],d=c[5];b[1]=c[3];b[2]=c[6];b[3]=a;b[5]=c[7];b[6]=f;b[7]=d}else b[0]=c[0],b[1]=c[3],b[2]=c[6],b[3]=c[1],b[4]=c[4],b[5]=c[7],b[6]=
c[2],b[7]=c[5],b[8]=c[8];return b},d.invert=function(b,c){var a=c[0],f=c[1],d=c[2],h=c[3],n=c[4],k=c[5],m=c[6],q=c[7],l=c[8],p=l*n-k*q,u=-l*h+k*m,t=q*h-n*m,r=a*p+f*u+d*t;return r?(r=1/r,b[0]=p*r,b[1]=(-l*f+d*q)*r,b[2]=(k*f-d*n)*r,b[3]=u*r,b[4]=(l*a-d*m)*r,b[5]=(-k*a+d*h)*r,b[6]=t*r,b[7]=(-q*a+f*m)*r,b[8]=(n*a-f*h)*r,b):null},d.adjoint=function(b,c){var a=c[0],f=c[1],d=c[2],h=c[3],n=c[4],k=c[5],m=c[6],q=c[7],l=c[8];return b[0]=n*l-k*q,b[1]=d*q-f*l,b[2]=f*k-d*n,b[3]=k*m-h*l,b[4]=a*l-d*m,b[5]=d*h-a*
k,b[6]=h*q-n*m,b[7]=f*m-a*q,b[8]=a*n-f*h,b},d.determinant=function(b){var c=b[3],a=b[4],f=b[5],d=b[6],h=b[7],n=b[8];return b[0]*(n*a-f*h)+b[1]*(-n*c+f*d)+b[2]*(h*c-a*d)},d.multiply=function(b,c,a){var e=c[0],d=c[1],h=c[2],n=c[3],k=c[4],m=c[5],q=c[6],l=c[7];c=c[8];var p=a[0],u=a[1],t=a[2],r=a[3],v=a[4],w=a[5],x=a[6],y=a[7];a=a[8];return b[0]=p*e+u*n+t*q,b[1]=p*d+u*k+t*l,b[2]=p*h+u*m+t*c,b[3]=r*e+v*n+w*q,b[4]=r*d+v*k+w*l,b[5]=r*h+v*m+w*c,b[6]=x*e+y*n+a*q,b[7]=x*d+y*k+a*l,b[8]=x*h+y*m+a*c,b},d.mul=d.multiply,
d.translate=function(b,a,e){var c=a[0],d=a[1],h=a[2],n=a[3],k=a[4],m=a[5],q=a[6],l=a[7];a=a[8];var p=e[0];e=e[1];return b[0]=c,b[1]=d,b[2]=h,b[3]=n,b[4]=k,b[5]=m,b[6]=p*c+e*n+q,b[7]=p*d+e*k+l,b[8]=p*h+e*m+a,b},d.rotate=function(b,a,e){var c=a[0],d=a[1],h=a[2],n=a[3],k=a[4],m=a[5],q=a[6],l=a[7];a=a[8];var p=Math.sin(e);e=Math.cos(e);return b[0]=e*c+p*n,b[1]=e*d+p*k,b[2]=e*h+p*m,b[3]=e*n-p*c,b[4]=e*k-p*d,b[5]=e*m-p*h,b[6]=q,b[7]=l,b[8]=a,b},d.scale=function(b,a,e){var c=e[0];e=e[1];return b[0]=c*a[0],
b[1]=c*a[1],b[2]=c*a[2],b[3]=e*a[3],b[4]=e*a[4],b[5]=e*a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b},d.fromTranslation=function(b,a){return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=1,b[5]=0,b[6]=a[0],b[7]=a[1],b[8]=1,b},d.fromRotation=function(b,a){var c=Math.sin(a),f=Math.cos(a);return b[0]=f,b[1]=c,b[2]=0,b[3]=-c,b[4]=f,b[5]=0,b[6]=0,b[7]=0,b[8]=1,b},d.fromScaling=function(b,a){return b[0]=a[0],b[1]=0,b[2]=0,b[3]=0,b[4]=a[1],b[5]=0,b[6]=0,b[7]=0,b[8]=1,b},d.fromMat2d=function(b,a){return b[0]=a[0],b[1]=a[1],b[2]=
0,b[3]=a[2],b[4]=a[3],b[5]=0,b[6]=a[4],b[7]=a[5],b[8]=1,b},d.fromQuat=function(b,a){var c=a[0],f=a[1],d=a[2],h=a[3],n=c+c,k=f+f,m=d+d,c=c*n,q=f*n,f=f*k,l=d*n,p=d*k,d=d*m,n=h*n,k=h*k,h=h*m;return b[0]=1-f-d,b[3]=q-h,b[6]=l+k,b[1]=q+h,b[4]=1-c-d,b[7]=p-n,b[2]=l-k,b[5]=p+n,b[8]=1-c-f,b},d.normalFromMat4=function(b,a){var c=a[0],f=a[1],d=a[2],h=a[3],n=a[4],k=a[5],m=a[6],q=a[7],l=a[8],p=a[9],u=a[10],t=a[11],r=a[12],v=a[13],w=a[14],x=a[15],y=c*k-f*n,z=c*m-d*n,A=c*q-h*n,B=f*m-d*k,H=f*q-h*k,J=d*q-h*m,M=l*
v-p*r,K=l*w-u*r,l=l*x-t*r,D=p*w-u*v,p=p*x-t*v,u=u*x-t*w;return(t=y*u-z*p+A*D+B*l-H*K+J*M)?(t=1/t,b[0]=(k*u-m*p+q*D)*t,b[1]=(m*l-n*u-q*K)*t,b[2]=(n*p-k*l+q*M)*t,b[3]=(d*p-f*u-h*D)*t,b[4]=(c*u-d*l+h*K)*t,b[5]=(f*l-c*p-h*M)*t,b[6]=(v*J-w*H+x*B)*t,b[7]=(w*A-r*J-x*z)*t,b[8]=(r*H-v*A+x*y)*t,b):null},d.str=function(b){return"mat3("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+")"},d.frob=function(b){return Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],
2)+Math.pow(b[3],2)+Math.pow(b[4],2)+Math.pow(b[5],2)+Math.pow(b[6],2)+Math.pow(b[7],2)+Math.pow(b[8],2))},d.add=function(b,a,e){return b[0]=a[0]+e[0],b[1]=a[1]+e[1],b[2]=a[2]+e[2],b[3]=a[3]+e[3],b[4]=a[4]+e[4],b[5]=a[5]+e[5],b[6]=a[6]+e[6],b[7]=a[7]+e[7],b[8]=a[8]+e[8],b},d.subtract=function(b,a,e){return b[0]=a[0]-e[0],b[1]=a[1]-e[1],b[2]=a[2]-e[2],b[3]=a[3]-e[3],b[4]=a[4]-e[4],b[5]=a[5]-e[5],b[6]=a[6]-e[6],b[7]=a[7]-e[7],b[8]=a[8]-e[8],b},d.sub=d.subtract,d.multiplyScalar=function(b,a,e){return b[0]=
a[0]*e,b[1]=a[1]*e,b[2]=a[2]*e,b[3]=a[3]*e,b[4]=a[4]*e,b[5]=a[5]*e,b[6]=a[6]*e,b[7]=a[7]*e,b[8]=a[8]*e,b},d.multiplyScalarAndAdd=function(b,a,e,f){return b[0]=a[0]+e[0]*f,b[1]=a[1]+e[1]*f,b[2]=a[2]+e[2]*f,b[3]=a[3]+e[3]*f,b[4]=a[4]+e[4]*f,b[5]=a[5]+e[5]*f,b[6]=a[6]+e[6]*f,b[7]=a[7]+e[7]*f,b[8]=a[8]+e[8]*f,b},d.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&b[3]===a[3]&&b[4]===a[4]&&b[5]===a[5]&&b[6]===a[6]&&b[7]===a[7]&&b[8]===a[8]},d.equals=function(b,c){var e=b[0],f=b[1],
d=b[2],h=b[3],n=b[4],k=b[5],m=b[6],q=b[7],l=b[8],p=c[0],u=c[1],t=c[2],r=c[3],v=c[4],w=c[5],x=b[6],y=c[7],z=c[8];return Math.abs(e-p)<=a.EPSILON*Math.max(1,Math.abs(e),Math.abs(p))&&Math.abs(f-u)<=a.EPSILON*Math.max(1,Math.abs(f),Math.abs(u))&&Math.abs(d-t)<=a.EPSILON*Math.max(1,Math.abs(d),Math.abs(t))&&Math.abs(h-r)<=a.EPSILON*Math.max(1,Math.abs(h),Math.abs(r))&&Math.abs(n-v)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(k-w)<=a.EPSILON*Math.max(1,Math.abs(k),Math.abs(w))&&Math.abs(m-
x)<=a.EPSILON*Math.max(1,Math.abs(m),Math.abs(x))&&Math.abs(q-y)<=a.EPSILON*Math.max(1,Math.abs(q),Math.abs(y))&&Math.abs(l-z)<=a.EPSILON*Math.max(1,Math.abs(l),Math.abs(z))},d})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec4":function(){define(["./common"],function(a){var d={};return d.create=function(){var b=new a.ARRAY_TYPE(4);return b[0]=0,b[1]=0,b[2]=0,b[3]=0,b},d.clone=function(b){var c=new a.ARRAY_TYPE(4);return c[0]=b[0],c[1]=b[1],c[2]=b[2],c[3]=b[3],c},d.fromValues=function(b,c,e,f){var d=
new a.ARRAY_TYPE(4);return d[0]=b,d[1]=c,d[2]=e,d[3]=f,d},d.copy=function(b,a){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},d.set=function(b,a,e,f,d){return b[0]=a,b[1]=e,b[2]=f,b[3]=d,b},d.add=function(b,a,e){return b[0]=a[0]+e[0],b[1]=a[1]+e[1],b[2]=a[2]+e[2],b[3]=a[3]+e[3],b},d.subtract=function(b,a,e){return b[0]=a[0]-e[0],b[1]=a[1]-e[1],b[2]=a[2]-e[2],b[3]=a[3]-e[3],b},d.sub=d.subtract,d.multiply=function(b,a,e){return b[0]=a[0]*e[0],b[1]=a[1]*e[1],b[2]=a[2]*e[2],b[3]=a[3]*e[3],b},d.mul=
d.multiply,d.divide=function(b,a,e){return b[0]=a[0]/e[0],b[1]=a[1]/e[1],b[2]=a[2]/e[2],b[3]=a[3]/e[3],b},d.div=d.divide,d.ceil=function(b,a){return b[0]=Math.ceil(a[0]),b[1]=Math.ceil(a[1]),b[2]=Math.ceil(a[2]),b[3]=Math.ceil(a[3]),b},d.floor=function(b,a){return b[0]=Math.floor(a[0]),b[1]=Math.floor(a[1]),b[2]=Math.floor(a[2]),b[3]=Math.floor(a[3]),b},d.min=function(b,a,e){return b[0]=Math.min(a[0],e[0]),b[1]=Math.min(a[1],e[1]),b[2]=Math.min(a[2],e[2]),b[3]=Math.min(a[3],e[3]),b},d.max=function(b,
a,e){return b[0]=Math.max(a[0],e[0]),b[1]=Math.max(a[1],e[1]),b[2]=Math.max(a[2],e[2]),b[3]=Math.max(a[3],e[3]),b},d.round=function(b,a){return b[0]=Math.round(a[0]),b[1]=Math.round(a[1]),b[2]=Math.round(a[2]),b[3]=Math.round(a[3]),b},d.scale=function(b,a,e){return b[0]=a[0]*e,b[1]=a[1]*e,b[2]=a[2]*e,b[3]=a[3]*e,b},d.scaleAndAdd=function(b,a,e,f){return b[0]=a[0]+e[0]*f,b[1]=a[1]+e[1]*f,b[2]=a[2]+e[2]*f,b[3]=a[3]+e[3]*f,b},d.distance=function(b,a){var c=a[0]-b[0],f=a[1]-b[1],d=a[2]-b[2],h=a[3]-b[3];
return Math.sqrt(c*c+f*f+d*d+h*h)},d.dist=d.distance,d.squaredDistance=function(b,a){var c=a[0]-b[0],f=a[1]-b[1],d=a[2]-b[2],h=a[3]-b[3];return c*c+f*f+d*d+h*h},d.sqrDist=d.squaredDistance,d.length=function(b){var a=b[0],e=b[1],f=b[2];b=b[3];return Math.sqrt(a*a+e*e+f*f+b*b)},d.len=d.length,d.squaredLength=function(b){var a=b[0],e=b[1],f=b[2];b=b[3];return a*a+e*e+f*f+b*b},d.sqrLen=d.squaredLength,d.negate=function(b,a){return b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],b[3]=-a[3],b},d.inverse=function(b,a){return b[0]=
1/a[0],b[1]=1/a[1],b[2]=1/a[2],b[3]=1/a[3],b},d.normalize=function(b,a){var c=a[0],f=a[1],d=a[2],h=a[3],n=c*c+f*f+d*d+h*h;return 0<n&&(n=1/Math.sqrt(n),b[0]=c*n,b[1]=f*n,b[2]=d*n,b[3]=h*n),b},d.dot=function(b,a){return b[0]*a[0]+b[1]*a[1]+b[2]*a[2]+b[3]*a[3]},d.lerp=function(b,a,e,f){var c=a[0],d=a[1],n=a[2];a=a[3];return b[0]=c+f*(e[0]-c),b[1]=d+f*(e[1]-d),b[2]=n+f*(e[2]-n),b[3]=a+f*(e[3]-a),b},d.random=function(b,c){return c=c||1,b[0]=a.RANDOM(),b[1]=a.RANDOM(),b[2]=a.RANDOM(),b[3]=a.RANDOM(),d.normalize(b,
b),d.scale(b,b,c),b},d.transformMat4=function(b,a,e){var c=a[0],d=a[1],h=a[2];a=a[3];return b[0]=e[0]*c+e[4]*d+e[8]*h+e[12]*a,b[1]=e[1]*c+e[5]*d+e[9]*h+e[13]*a,b[2]=e[2]*c+e[6]*d+e[10]*h+e[14]*a,b[3]=e[3]*c+e[7]*d+e[11]*h+e[15]*a,b},d.transformQuat=function(b,a,e){var c=a[0],d=a[1],h=a[2],n=e[0],k=e[1],m=e[2];e=e[3];var q=e*c+k*h-m*d,l=e*d+m*c-n*h,p=e*h+n*d-k*c,c=-n*c-k*d-m*h;return b[0]=q*e+c*-n+l*-m-p*-k,b[1]=l*e+c*-k+p*-n-q*-m,b[2]=p*e+c*-m+q*-k-l*-n,b[3]=a[3],b},d.forEach=function(){var b=d.create();
return function(a,e,f,d,h,n){e||(e=4);f||(f=0);for(d=d?Math.min(d*e+f,a.length):a.length;d>f;f+=e)b[0]=a[f],b[1]=a[f+1],b[2]=a[f+2],b[3]=a[f+3],h(b,b,n),a[f]=b[0],a[f+1]=b[1],a[f+2]=b[2],a[f+3]=b[3];return a}}(),d.str=function(b){return"vec4("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+")"},d.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&b[3]===a[3]},d.equals=function(b,c){var e=b[0],f=b[1],d=b[2],h=b[3],n=c[0],k=c[1],m=c[2],q=c[3];return Math.abs(e-n)<=a.EPSILON*Math.max(1,Math.abs(e),
Math.abs(n))&&Math.abs(f-k)<=a.EPSILON*Math.max(1,Math.abs(f),Math.abs(k))&&Math.abs(d-m)<=a.EPSILON*Math.max(1,Math.abs(d),Math.abs(m))&&Math.abs(h-q)<=a.EPSILON*Math.max(1,Math.abs(h),Math.abs(q))},d})},"esri/layers/vectorTiles/views/webgl/VertexArrayObject":function(){define(["require","exports"],function(a,d){return function(){function b(a,e,f,d,h){this._locations=this._layout=this._glName=this._context=null;this._indexBuffer=this._buffers=void 0;this._initialized=!1;this._context=a;this._layout=
f;this._buffers=d;this._locations=e;h&&(this._indexBuffer=h);this._id=b._nextId++}return Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"vertexBuffers",{get:function(){return this._buffers},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"indexBuffer",{get:function(){return this._indexBuffer},
enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0}),b.prototype.dispose=function(b){if(void 0===b&&(b=!0),this._context){var a=this._context.extensions.vao;a&&this._glName&&(a.deleteVertexArrayOES(this._glName),this._glName=null);if(this._context.getBoundVAO()===this&&this._context.bindVAO(null),
b){for(var c in this._buffers)this._buffers[c].dispose(),delete this._buffers[c];this._indexBuffer&&(this._indexBuffer.dispose(),this._indexBuffer=null)}this._context=null}},b.prototype.initialize=function(){if(!this._initialized){var b=this._context.extensions.vao;if(b){var a=b.createVertexArrayOES();b.bindVertexArrayOES(a);this._bindLayout();b.bindVertexArrayOES(null);this._glName=a}this._initialized=!0}},b.prototype.bind=function(){this.initialize();var b=this._context.extensions.vao;b?b.bindVertexArrayOES(this.glName):
(this._context.bindVAO(null),this._bindLayout())},b.prototype._bindLayout=function(){var b=this._buffers,a=this._context.extensions.vao,f=this._layout,d=this._indexBuffer;b||console.error("Vertex buffer dictionary is empty!");var h,n,k=this._context.gl,m=0,q;for(q in b)for((h=b[q])||console.error("Vertex buffer is uninitialized!"),(n=f[q])||console.error("Vertex element descriptor is empty!"),this._context.bindBuffer(h),m=0;m<n.length;++m){h=n[m];var l=this._locations[h.name],p=h.baseInstance?h.baseInstance*
h.stride:0;if(void 0===l&&console.error("There is no location for vertex attribute '"+h.name+"' defined."),h.baseInstance&&!h.divisor&&console.error("Vertex attribute '"+h.name+"' uses baseInstanceOffset without divisor."),4>=h.count){if(k.enableVertexAttribArray(l),k.vertexAttribPointer(l,h.count,h.type,h.normalized,h.stride,h.offset+p),h.divisor&&0<h.divisor){var u=this._context.extensions.angleInstancedArrays;u&&u.vertexAttribDivisorANGLE(l,h.divisor)}}else if(16===h.count&&5126===h.type)for(var t=
0;4>t;t++)(k.enableVertexAttribArray(l+t),k.vertexAttribPointer(l+t,4,h.type,h.normalized,h.stride,h.offset+16*t+p),h.divisor&&0<h.divisor)&&(u=this._context.extensions.angleInstancedArrays)&&u.vertexAttribDivisorANGLE(l+t,h.divisor);else console.error("Unsupported vertex attribute element count: "+h.count)}d&&(a?k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,d.glName):this._context.bindBuffer(d))},b.prototype.unbind=function(){this.initialize();var b=this._context.extensions.vao;b?b.bindVertexArrayOES(null):
this._unbindLayout()},b.prototype._unbindLayout=function(){var b=this._buffers,a=this._layout,f=this._locations,d=this._context;b||console.error("Vertex buffer dictionary is empty!");var h,n,k,m=d.gl,q=0,l=0,p;for(p in b){(h=b[p])||console.error("Vertex buffer is uninitialized!");n=a[p];q=0;for(l=n.length;l>q;++q)k=n[q],m.disableVertexAttribArray(f[k.name]);d.unbindBuffer(h.bufferType)}(b=this._indexBuffer)&&d.unbindBuffer(b.bufferType)},b._nextId=0,b}()})},"esri/layers/vectorTiles/views/webgl/BufferObject":function(){define(["require",
"exports"],function(a,d){return function(){function b(a,e,f,d,h){this._glName=this._context=null;this._bufferType=void 0;this._usage=35044;this._size=-1;this._indexType=void 0;this._context=a;this._bufferType=e;this._usage=f;this._id=b._nextId++;this._glName=this._context.gl.createBuffer();d&&this.setData(d,h)}return b.createIndex=function(a,e,f,d){return new b(a,34963,e,f,d)},b.createVertex=function(a,e,f){return new b(a,34962,e,f)},Object.defineProperty(b.prototype,"id",{get:function(){return this._id},
enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"usage",{get:function(){return this._usage},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"bufferType",{get:function(){return this._bufferType},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,
"indexType",{get:function(){return this._indexType},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"byteSize",{get:function(){return 34962===this._bufferType?this._size:5125===this._indexType?4*this._size:2*this._size},enumerable:!0,configurable:!0}),b.prototype.dispose=function(){this._context&&(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),this._context=null)},b.prototype.setData=function(b,a){if(b){if("number"==typeof b){if(0>b&&console.error("Buffer size cannot be negative!"),
34963===this._bufferType&&a)switch(this._indexType=a,this._size=b,a){case 5123:b*=2;break;case 5125:b*=4}}else{var c=b.byteLength;b instanceof Uint16Array&&(c/=2,this._indexType=5123);b instanceof Uint32Array&&(c/=4,this._indexType=5125);this._size=c}c=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);this._context.gl.bufferData(this._bufferType,b,this._usage);this._context.bindVAO(c)}},b.prototype.setSubData=function(b,a,f,d){if(void 0===a&&(a=0),void 0===f&&
(f=0),b){(0>a||a>=this._size)&&console.error("offset is out of range!");var c=a,e=f,g=d,m=b.byteLength;b instanceof Uint16Array&&(m/=2,c*=2,e*=2,g*=2);b instanceof Uint32Array&&(m/=4,c*=4,e*=4,g*=4);void 0===d&&(d=m-1);f>=d&&console.error("end must be bigger than start!");a+f-d>this._size&&console.error("An attempt to write beyond the end of the buffer!");a=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);this._context.gl.bufferSubData(this._bufferType,c,(b instanceof
ArrayBuffer?b:b.buffer).slice(e,g));this._context.bindVAO(a)}},b._nextId=0,b}()})},"esri/layers/vectorTiles/views/vectorTiles/MemoryBuffer":function(){define(["require","exports"],function(a,d){return function(){function b(b){this._array=[];0>=b&&console.error("strideInBytes must be positive!");this._stride=b}return Object.defineProperty(b.prototype,"array",{get:function(){return this._array},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"index",{get:function(){return 4*this._array.length/
this._stride},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"itemSize",{get:function(){return this._stride},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"sizeInBytes",{get:function(){return 4*this._array.length},enumerable:!0,configurable:!0}),b.prototype.reset=function(){this.array.length=0},b.prototype.toBuffer=function(){return(new Uint32Array(this._array)).buffer},b.i1616to32=function(b,a){return 65535&b|a<<16},b.i8888to32=function(b,a,f,d){return 255&
b|(255&a)<<8|(255&f)<<16|d<<24},b.i8816to32=function(b,a,f){return 255&b|(255&a)<<8|f<<16},b}()})},"esri/layers/vectorTiles/views/webgl/ShaderVariations":function(){define(["require","exports","./Program","./Util","./ShaderSourceVariator"],function(a,d,b,c,e){function f(b){return b.reduce(function(b,a,c){return a&&(b|=1<<c),b},0)}return function(){function a(b,a,c,e,f,d){"string"==typeof b?this._initParams(b,a,c,e,f,d):this._initObject({programNamePrefix:b.programNamePrefix,shaderSnippetPrefixes:b.shaderSnippetPrefixes,
baseDefines:b.baseDefines,snippets:b.snippets,rctx:b.rctx,vertexAttribLocs:b.vertexAttribLocs})}return a.prototype._initObject=function(b){this._initParams(b.programNamePrefix,b.shaderSnippetPrefixes,b.baseDefines,b.snippets,b.rctx,b.vertexAttribLocs)},a.prototype._initParams=function(b,a,c,f,d,g){this._defaultSnippets=f;this._defaultRctx=d;this._defaultVertexAttribLocs=g;this._programCache=new Map;this._variationInfo=new Map;this._shaderSourceVariator=new e(b,a,c)},a.prototype.addDefine=function(b,
a,c,e){this._shaderSourceVariator.addDefine(b,a,c,e)},a.prototype.addBinaryShaderSnippetSuffix=function(b,a,c){this._shaderSourceVariator.addBinaryShaderSnippetSuffix(b,a,c)},a.prototype.addNaryShaderSnippetSuffix=function(b,a){this._shaderSourceVariator.addNaryShaderSnippetSuffix(b,a)},a.prototype.getProgram=function(a,e,d,g){if(e=e||this._defaultSnippets,d=d||this._defaultRctx,g=g||this._defaultVertexAttribLocs,!e)throw Error("No ShaderSnippets provided to getProgram nor to ShaderVariations constructor.");
if(!d)throw Error("No RenderingContext provided to getProgram nor to ShaderVariations constructor.");if(!g)throw Error("No VertexAttributeLocations provided to getProgram nor to ShaderVariations constructor.");var h=f(a);if(this._programCache[h])return this._programCache[h];var l,n=this._shaderSourceVariator.getShaderVariation(a);a=n.shaderSnippetNames[0];l=e[a];c.assert(null!=l,"shader snippet '"+a+"' does not exist");a=n.shaderSnippetNames[1];e=e[a];c.assert(null!=e,"shader snippet '"+a+"' does not exist");
d=new b(d,l,e,g,n.defines);return this._programCache[h]=d,d},a.prototype.getProgramByKey=function(a){if(this._programCache[a])return this._programCache[a];if(!this._variationInfo[a])return null;var e,f,d,g=this._variationInfo[a];d=this._defaultSnippets;var h=this._defaultRctx,p=this._defaultVertexAttribLocs;e=g.shaderSnippetNames[0];f=d[e];c.assert(null!=f,"shader snippet '"+e+"' does not exist");e=g.shaderSnippetNames[1];d=d[e];c.assert(null!=d,"shader snippet '"+e+"' does not exist");e=new b(h,
f,d,p,g.defines);return this._programCache[a]=e,e},a.prototype.getProgramInfo=function(b){var a=this._shaderSourceVariator.getShaderVariation(b);b=f(b);return this._variationInfo[b]||(this._variationInfo[b]=a),{name:a.programName,key:b}},a}()})},"esri/layers/vectorTiles/views/webgl/Program":function(){define(["require","exports","dojo/has"],function(a,d,b){var c=b("dojo-debug-messages");return function(){function b(a,c,e,d,k){if(void 0===k&&(k={}),this._context=null,this._glName=null,this._locations=
{},this._id=void 0,this._initialized=!1,this._vShader=null,this._fShader=null,this._defines={},this._nameToUniformLocation={},this._nameToAttribLocation={},this._nameToUniform1={},this._nameToUniform2={},this._nameToUniform3={},this._nameToUniform4={},this._nameToUniformMatrix3={},this._nameToUniformMatrix4={},a||console.error("RenderingContext isn't initialized!"),0===c.length&&console.error("Shaders source should not be empty!"),this._context=a,this._vertexShaderSource=c,this._fragmentShaderSource=
e,Array.isArray(k))for(a=0;a<k.length;a++)this._defines[k[a]]="1";else this._defines=k;this._id=b._nextId++;this._locations=d}return Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0}),b.prototype.getDefine=function(b){return this._defines[b]},
b.prototype.dispose=function(){if(this._context){var b=this._context.gl;this._vShader&&(b.deleteShader(this._vShader),this._vShader=null);this._fShader&&(b.deleteShader(this._fShader),this._fShader=null);this._glName&&(b.deleteProgram(this._glName),this._glName=null);this._context=null}},b.prototype.initialize=function(){if(!this._initialized){this._vShader=this._loadShader(35633);this._fShader=this._loadShader(35632);this._vShader&&this._fShader||console.error("Error loading shaders!");var b=this._context.gl,
a=b.createProgram();b.attachShader(a,this._vShader);b.attachShader(a,this._fShader);for(var c in this._locations)b.bindAttribLocation(a,this._locations[c],c);b.linkProgram(a);b.getProgramParameter(a,b.LINK_STATUS)||console.error("Could not initialize shader\nVALIDATE_STATUS: "+b.getProgramParameter(a,b.VALIDATE_STATUS)+", gl error ["+b.getError()+"]infoLog: "+b.getProgramInfoLog(a));this._glName=a;this._initialized=!0}},b.prototype.getUniformLocation=function(b){return this.initialize(),void 0===
this._nameToUniformLocation[b]&&(this._nameToUniformLocation[b]=this._context.gl.getUniformLocation(this._glName,b)),this._nameToUniformLocation[b]},b.prototype.hasUniform=function(b){return null!==this.getUniformLocation(b)},b.prototype.getAttribLocation=function(b){return this.initialize(),void 0===this._nameToAttribLocation[b]&&(this._nameToAttribLocation[b]=this._context.gl.getAttribLocation(this._glName,b)),this._nameToAttribLocation[b]},b.prototype.setUniform1i=function(b,a){var c=this._nameToUniform1[b];
if(void 0===c||a!==c)this._context.bindProgram(this),this._context.gl.uniform1i(this.getUniformLocation(b),a),this._nameToUniform1[b]=a},b.prototype.setUniform1f=function(b,a){var c=this._nameToUniform1[b];if(void 0===c||a!==c)this._context.bindProgram(this),this._context.gl.uniform1f(this.getUniformLocation(b),a),this._nameToUniform1[b]=a},b.prototype.setUniform1fv=function(a,c){var e=this._nameToUniform2[a];void 0!==e&&b._arraysEqual(c,e)||(this._context.bindProgram(this),this._context.gl.uniform1fv(this.getUniformLocation(a),
c),void 0===e?this._nameToUniform2[a]=new Float32Array(c):e.set(c))},b.prototype.setUniform2f=function(b,a,c){var e=this._nameToUniform2[b];if(void 0===e||a!==e[0]||c!==e[1])this._context.bindProgram(this),this._context.gl.uniform2f(this.getUniformLocation(b),a,c),void 0===e?this._nameToUniform2[b]=new Float32Array([a,c]):(e[0]=a,e[1]=c)},b.prototype.setUniform2fv=function(a,e){c&&0!==e.length%2&&console.error("Value array must have even number of elements!");var f=this._nameToUniform2[a];void 0!==
f&&b._arraysEqual(e,f)||(this._context.bindProgram(this),this._context.gl.uniform2fv(this.getUniformLocation(a),e),void 0===f?this._nameToUniform2[a]=new Float32Array(e):f.set(e))},b.prototype.setUniform3f=function(b,a,c,e){var f=this._nameToUniform3[b];if(void 0===f||a!==f[0]||c!==f[1]||e!==f[2])this._context.bindProgram(this),this._context.gl.uniform3f(this.getUniformLocation(b),a,c,e),void 0===f?this._nameToUniform3[b]=new Float32Array([a,c,e]):(f[0]=a,f[1]=c,f[2]=e)},b.prototype.setUniform3fv=
function(a,e){c&&0!==e.length%3&&console.error("Value array must contain sets of three values!");var f=this._nameToUniform3[a];void 0!==f&&b._arraysEqual(e,f)||(this._context.bindProgram(this),this._context.gl.uniform3fv(this.getUniformLocation(a),e),void 0===f?this._nameToUniform3[a]=new Float32Array(e):f.set(e))},b.prototype.setUniform4f=function(b,a,c,e,d){var f=this._nameToUniform4[b];if(void 0===f||a!==f[0]||c!==f[1]||e!==f[2]||d!==f[3])this._context.bindProgram(this),this._context.gl.uniform4f(this.getUniformLocation(b),
a,c,e,d),void 0===f?this._nameToUniform4[b]=new Float32Array([a,c,e,d]):(f[0]=a,f[1]=c,f[2]=e,f[3]=d)},b.prototype.setUniform4fv=function(a,e){c&&0!==e.length%4&&console.error("Value array must contain sets of four values!");var f=this._nameToUniform4[a];void 0!==f&&b._arraysEqual(e,f)||(this._context.bindProgram(this),this._context.gl.uniform4fv(this.getUniformLocation(a),e),void 0===f?this._nameToUniform4[a]=new Float32Array(e):f.set(e))},b.prototype.setUniformMatrix3fv=function(a,e,d){void 0===
d&&(d=!1);c&&0!==e.length%9&&console.error("Matrix array must contain sets ot 9 elements!");var f=this._nameToUniformMatrix3[a];void 0!==f&&(9===f.length?b._matrix3Equal(f,e):b._arraysEqual(e,f))||(this._context.bindProgram(this),this._context.gl.uniformMatrix3fv(this.getUniformLocation(a),d,e),void 0===f?this._nameToUniformMatrix3[a]=new Float32Array(e):f.set(e))},b.prototype.setUniformMatrix4fv=function(a,e,d){void 0===d&&(d=!1);c&&0!==e.length%16&&console.error("Matrix array must contain sets ot 16 elements!");
var f=this._nameToUniformMatrix4[a];void 0!==f&&(16===f.length?b._matrix4Equal(f,e):b._arraysEqual(e,f))||(this._context.bindProgram(this),this._context.gl.uniformMatrix4fv(this.getUniformLocation(a),d,e),void 0===f?this._nameToUniformMatrix4[a]=new Float32Array(e):f.set(e))},b._padToThree=function(b){var a=b.toString();return 1E3>b&&(a=("  "+b).slice(-3)),a},b.prototype._addLineNumbers=function(a){var c=2;return a.replace(/\n/g,function(){return"\n"+b._padToThree(c++)+":"})},b.prototype._loadShader=
function(b){var a=35633===b?this._vertexShaderSource:this._fragmentShaderSource,c="",e;for(e in this._defines)c+="#define "+e+" "+this._defines[e]+"\n";a=c+a;c=this._context.gl;b=c.createShader(b);return c.shaderSource(b,a),c.compileShader(b),c.getShaderParameter(b,c.COMPILE_STATUS)||(console.error(c.getShaderInfoLog(b)),console.error(this._addLineNumbers(a))),b},b._matrix4Equal=function(b,a){return c&&(16!==b.length||16!==a.length)&&console.error("Matrix object must contain 16 elements!"),b[0]===
a[0]&&b[1]===a[1]&&b[2]===a[2]&&b[3]===a[3]&&b[4]===a[4]&&b[5]===a[5]&&b[6]===a[6]&&b[7]===a[7]&&b[8]===a[8]&&b[9]===a[9]&&b[10]===a[10]&&b[11]===a[11]&&b[12]===a[12]&&b[13]===a[13]&&b[14]===a[14]&&b[15]===a[15]},b._matrix3Equal=function(b,a){return c&&(9!==b.length||9!==a.length)&&console.error("Matrix object must contain 16 elements!"),b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&b[3]===a[3]&&b[4]===a[4]&&b[5]===a[5]&&b[6]===a[6]&&b[7]===a[7]&&b[8]===a[8]},b._arraysEqual=function(b,a){if(b.length!==a.length)return!1;
for(var c=0;c<b.length;++c)if(b[c]!==a[c])return!1;return!0},b._nextId=0,b}()})},"esri/layers/vectorTiles/views/webgl/Util":function(){define(["require","exports","../../core/tsSupport/assignHelper","../../core/Error"],function(a,d,b,c){return function(){function a(){}return a.vertexCount=function(b,c){return b.vertexBuffers[c].size/a.getStride(b.layout[c])},a.getStride=function(b){return b[0].stride},a.getBytesPerElement=function(b){switch(b){case 5126:return 4;case 5124:return 4;case 5125:return 4;
case 5122:return 2;case 5123:return 2;case 5120:return 1;case 5121:return 1;default:throw Error("Unknown data type");}},a.addDescriptor=function(b,c,e,d,k,m){var f=a.getBytesPerElement(d);if(0<b.length){var g=b[0].stride,h=g+f*e;b.forEach(function(b){return b.stride=h});b.push({name:c,count:e,type:d,offset:g,stride:h,normalized:k,divisor:m})}else b.push({name:c,count:e,type:d,offset:0,stride:f*e,normalized:k,divisor:m})},a.assertCompatibleVertexAttributeLocations=function(b,a){var c=b.locations===
a.locations;return c||console.error("VertexAttributeLocations are incompatible"),c},a.hasAttribute=function(b,a){for(var c=0;c<b.length;c++)if(b[c].name===a)return!0;return!1},a.findAttribute=function(b,a){for(var c=0;c<b.length;c++)if(b[c].name===a)return b[c];return null},a.copyFramebufferToTexture=function(b,a,c,e,d){void 0===d&&(d=0);var f=b.getBoundFramebufferObject(),g=b.getBoundTexture(0);b.bindFramebuffer(a);b.bindTexture(c,0);b.gl.copyTexImage2D(b.gl.TEXTURE_2D,d,c.descriptor.pixelFormat,
e[0],e[1],e[2],e[3],0);b.gl.flush();b.bindFramebuffer(f);b.bindTexture(g,0)},a.assert=function(b,a){if(!b)throw new c(a);},a.setBaseInstanceOffset=function(a,c){var e={},d;for(d in a)e[d]=a[d].map(function(a){return a.divisor?b({},a,{baseInstance:c}):a});return e},a}()})},"esri/layers/vectorTiles/core/tsSupport/assignHelper":function(){define([],function(){return Object.assign||function(a){for(var d,b=1,c=arguments.length;c>b;b++){d=arguments[b];for(var e in d)Object.prototype.hasOwnProperty.call(d,
e)&&(a[e]=d[e])}return a}})},"esri/layers/vectorTiles/views/webgl/ShaderSourceVariator":function(){define(["require","exports","dojo/_base/lang","./Util"],function(a,d,b,c){return function(){function a(b,a,e){var d;"string"==typeof b?d=b:(d=b.programNamePrefix,a=b.shaderSnippetPrefixes,e=b.baseDefines);c.assert(a,"you must specify shader snippet prefixes");c.assert(2===a.length,"you must specify shader snippet prefixes for vertex and fragment shaders");e&&0!==e.length||(e=[]);this.programNamePrefix=
d;this.shaderSnippetPrefixes=a;this.baseDefines=e;this.variables=[];this.sealed=!1}return a.prototype.addDefine=function(b,a,e,d){c.assert(!this.sealed,"you cannot add another variable after the first program has been generated");c.assert(b,"you must specify a program name suffix");this.variables.push({programNameSuffixes:["",b],shaderNameSuffixes:d||b,defineStr:a,affectsShaderTypes:e||[!0,!0]})},a.prototype.addBinaryShaderSnippetSuffix=function(b,a,e){c.assert(!this.sealed,"you cannot add another variable after the first program has been generated");
c.assert(b,"you must specify a program name suffix");this.variables.push({programNameSuffixes:["",b],shaderSnippetSuffixes:["",a],affectsShaderTypes:e||[!0,!0]})},a.prototype.addNaryShaderSnippetSuffix=function(b,a){c.assert(!this.sealed,"you cannot add another variable after the first program has been generated");var e=b.map(function(b){return c.assert(null!=b.value,"value must always be specified"),b.value});this.variables.push({values:e,programNameSuffixes:b.map(function(b,a){return null!=b.programNameSuffix?
b.programNameSuffix:e[a]}),shaderSnippetSuffixes:b.map(function(b,a){return null!=b.shaderSnippetSuffix?b.shaderSnippetSuffix:e[a]}),affectsShaderTypes:a||[!0,!0]})},a.prototype.getShaderVariation=function(a){c.assert(a.length===this.variables.length,"you must specify a value for each variable");for(var e=this.programNamePrefix,d=b.clone(this.shaderSnippetPrefixes),f=b.clone(this.shaderSnippetPrefixes),k=b.clone(this.baseDefines),m=0;m<this.variables.length;m++){var q=this.variables[m],l=a[m],p=void 0;
q.values?(p=q.values.indexOf(l),c.assert(0<=p,"invalid value "+l+" for variable "+m)):p=l?1:0;e+=q.programNameSuffixes[p];for(l=0;2>l;l++)q.affectsShaderTypes[l]&&(q.shaderSnippetSuffixes&&(d[l]+=q.shaderSnippetSuffixes[p],f[l]+=q.shaderSnippetSuffixes[p]),q.defineStr&&p&&(k.push(q.defineStr),f[l]+=q.shaderNameSuffixes))}return{programName:e,shaderSnippetNames:d,shaderNames:f,defines:k}},a}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/vtShaderSnippets":function(){define("require exports ../../webgl/ShaderSnippets dojo/text!./shaders/backgroundShaders.xml dojo/text!./shaders/fillShaders.xml dojo/text!./shaders/outlineShaders.xml dojo/text!./shaders/lineShaders.xml dojo/text!./shaders/iconShaders.xml dojo/text!./shaders/textShaders.xml dojo/text!./shaders/tileInfo.vs.glsl dojo/text!./shaders/tileInfo.fs.glsl".split(" "),
function(a,d,b,c,e,f,g,h,n,k,m){function q(b,a){l+='\x3csnippet name\x3d"'+b+'"\x3e\x3c![CDATA[';l+=a;l+="]]\x3e\x3c/snippet\x3e"}var l="",l=l+'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e',l=l+"\x3csnippets\x3e";q("tileInfoVS",k);q("tileInfoFS",m);l+="\x3c/snippets\x3e";a=new b;return b.parse(c,a),b.parse(l,a),b.parse(e,a),b.parse(f,a),b.parse(g,a),b.parse(h,a),b.parse(n,a),a})},"esri/layers/vectorTiles/views/webgl/ShaderSnippets":function(){define(["require","exports","dojox/xml/parser"],
function(a,d,b){return function(){function a(b){if(b)for(var a in b)this[a]=b[a]}return a.parse=function(a,c){for(var e=b.parse(a).getElementsByTagName("snippet"),d=/\$[a-zA-Z][a-zA-Z0-9]*(?:\([^\(\)]*\))?[ \t]*/,f=/[\$\s]+/g,k=/\(([^\(\)]*)\)/,m=0;m<e.length;m++){for(var q=e[m].getAttribute("name"),l=e[m].textContent;;){var p=l.match(d);if(null==p)break;var u=p[0].replace(f,""),t=u.match(k),r=void 0;t&&(r=t[1].split(",").map(function(b){return b.trim()}));u=u.replace(k,"");r=c._instantiate(u,r);
l=l.replace(p[0],r)}c[q]=l}},a.prototype._instantiate=function(b,a){var c=this[b];for(a||(a=[]);;){var e=c.match(/\$(\d+)/);if(null==e)break;var d=parseInt(e[1],10),c=c.replace(e[0],a[d])}return c},a}()})},"dojox/xml/parser":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(a){a.getObject("xml.parser",!0,dojox);dojox.xml.parser.parse=function(d,b){var c=a.doc,e;b=b||"text/xml";if(d&&a.trim(d)&&"DOMParser"in a.global){e=(new DOMParser).parseFromString(d,
b);c=e.documentElement;if("parsererror"==c.nodeName&&"http://www.mozilla.org/newlayout/xml/parsererror.xml"==c.namespaceURI){var f=c.getElementsByTagNameNS("http://www.mozilla.org/newlayout/xml/parsererror.xml","sourcetext")[0];f&&(f=f.firstChild.data);throw Error("Error parsing text "+c.firstChild.data+" \n"+f);}return e}if("ActiveXObject"in a.global){c=function(b){return"MSXML"+b+".DOMDocument"};c=["Microsoft.XMLDOM",c(6),c(4),c(3),c(2)];a.some(c,function(b){try{e=new ActiveXObject(b)}catch(n){return!1}return!0});
if(d&&e&&(e.async=!1,e.loadXML(d),c=e.parseError,0!==c.errorCode))throw Error("Line: "+c.line+"\nCol: "+c.linepos+"\nReason: "+c.reason+"\nError Code: "+c.errorCode+"\nSource: "+c.srcText);if(e)return e}else if(c.implementation&&c.implementation.createDocument){if(d&&a.trim(d)&&c.createElement){f=c.createElement("xml");f.innerHTML=d;var g=c.implementation.createDocument("foo","",null);a.forEach(f.childNodes,function(b){g.importNode(b,!0)});return g}return c.implementation.createDocument("","",null)}return null};
dojox.xml.parser.textContent=function(d,b){if(1<arguments.length)return dojox.xml.parser.replaceChildren(d,(d.ownerDocument||a.doc).createTextNode(b)),b;if(void 0!==d.textContent)return d.textContent;var c="";d&&a.forEach(d.childNodes,function(b){switch(b.nodeType){case 1:case 5:c+=dojox.xml.parser.textContent(b);break;case 3:case 2:case 4:c+=b.nodeValue}});return c};dojox.xml.parser.replaceChildren=function(d,b){var c=[];a.isIE&&a.forEach(d.childNodes,function(b){c.push(b)});dojox.xml.parser.removeChildren(d);
a.forEach(c,a.destroy);a.isArray(b)?a.forEach(b,function(b){d.appendChild(b)}):d.appendChild(b)};dojox.xml.parser.removeChildren=function(a){for(var b=a.childNodes.length;a.hasChildNodes();)a.removeChild(a.firstChild);return b};dojox.xml.parser.innerXML=function(a){return a.innerXML?a.innerXML:a.xml?a.xml:"undefined"!=typeof XMLSerializer?(new XMLSerializer).serializeToString(a):null};return dojox.xml.parser})},"esri/layers/vectorTiles/views/vectorTiles/renderers/rendererUtils":function(){define(["require",
"exports"],function(a,d){Object.defineProperty(d,"__esModule",{value:!0});var b=new Uint32Array(1),c=new Uint8Array(b.buffer);d.int32To4Bytes=function(a){return b[0]=0|a,[c[0],c[1],c[2],c[3]]}})},"esri/layers/vectorTiles/views/vectorTiles/renderers/LineRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/vec4 ../../../core/libs/gl-matrix/vec3 ../../../core/libs/gl-matrix/vec2 ../../webgl/VertexArrayObject ../GeometryUtils ./rendererUtils ../../webgl/ShaderVariations ./vtShaderSnippets".split(" "),
function(a,d,b,c,e,f,g,h,n,k,m){return function(){function a(){this._attributeLocations={a_pos:0,a_offsetAndNormal:1,a_accumulatedDistance:2};this._attributeLocationsDD={a_pos:0,a_offsetAndNormal:1,a_accumulatedDistance:2,a_color:3,a_width:4};this._initialized=!1;this._viewProjMat=b.create();this._offsetVector=e.create();this._color=c.create();this._dashArray=f.create()}return a.prototype.dispose=function(){},a.prototype.render=function(a,c,e,d,f,g,k,m,q,z,A){if(0!==c.triangleElementCount){this._initialized||
this._initialize(a);var l=g.tileTransform.transform,p=g.coordRange/512,u=k.getPaintValue("line-translate",e);if(0!==u[0]||0!==u[1]){b.copy(this._viewProjMat,g.tileTransform.transform);var l=u[0],u=u[1],t=0,r=0,r=(1<<g.key.level)/Math.pow(2,e)*p;f=f.rotation;if(1===k.getPaintValue("line-translate-anchor",e)){t=-h.C_DEG_TO_RAD*f;f=Math.sin(t);var w=Math.cos(t),t=r*(l*w-u*f),r=r*(l*f+u*w)}else t=r*l,r*=u;this._offsetVector[0]=t;this._offsetVector[1]=r;this._offsetVector[2]=0;b.translate(this._viewProjMat,
this._viewProjMat,this._offsetVector);l=this._viewProjMat}var v,u=k.getPaintValue("line-pattern",e),r=void 0!==u;z=1/z;f=k.getPaintValue("line-blur",e)+z;z=k.getPaintValue("line-width",e);t=A*k.getPaintValue("line-opacity",e);A=k.getPaintValue("line-color",e);var w=k.hasDataDrivenLine,x=3===d;x&&(v=n.int32To4Bytes(c.layerID));if(d=this._getLineVAO(a,g,w))a.bindVAO(d),d=this._shaderVariations.getProgram([r,w,x],void 0,void 0,w?this._attributeLocationsDD:this._attributeLocations),(a.bindProgram(d),
d.setUniformMatrix4fv("u_transformMatrix",l),d.setUniformMatrix4fv("u_extrudeMatrix",q),d.setUniform2fv("u_normalized_origin",g.tileTransform.displayCoord),d.setUniform1f("u_depth",k.z),d.setUniform1f("u_blur",f),w)||(g=t*A[3],this._color[0]=g*A[0],this._color[1]=g*A[1],this._color[2]=g*A[2],this._color[3]=g,d.setUniform4fv("u_color",this._color),d.setUniform1f("u_width",z)),(x&&d.setUniform4f("u_id",v[0],v[1],v[2],v[3]),r)?(e=m.getMosaicItemPosition(u,!0))&&(m.bind(a,9729,e.page,1),d.setUniform2f("u_pattern_tl",
e.tl[0],e.tl[1]),d.setUniform2f("u_pattern_br",e.br[0],e.br[1]),d.setUniform2f("u_spriteSize",p*e.size[0],e.size[1]),d.setUniform1i("u_texture",1)):(m=k.getPaintValue("line-dasharray",e),2>m.length&&(m=[1,-1]),this._dashArray[0]=p*m[0],this._dashArray[1]=p*m[1],d.setUniform2fv("u_dasharray",this._dashArray)),a.drawElements(4,c.triangleElementCount,5125,12*c.triangleElementStart),a.bindVAO()}},a.prototype._initialize=function(b){if(this._initialized)return!0;b=new k("line",["lineVS","lineFS"],[],m,
b);return b.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN"),b.addDefine("DD","DD",[!0,!1],"DD"),b.addDefine("ID","ID",[!0,!0],"ID"),this._shaderVariations=b,this._vertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:12,normalized:!1,divisor:0},{name:"a_offsetAndNormal",count:4,type:5120,offset:4,stride:12,normalized:!1,divisor:0},{name:"a_accumulatedDistance",count:2,type:5123,offset:8,stride:12,normalized:!1,divisor:0}]},this._vertexAttributesDD={geometry:[{name:"a_pos",count:2,
type:5122,offset:0,stride:20,normalized:!1,divisor:0},{name:"a_offsetAndNormal",count:4,type:5120,offset:4,stride:20,normalized:!1,divisor:0},{name:"a_accumulatedDistance",count:2,type:5122,offset:8,stride:20,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:12,stride:20,normalized:!0,divisor:0},{name:"a_width",count:1,type:5126,offset:16,stride:20,normalized:!1,divisor:0}]},this._initialized=!0,!0},a.prototype._getLineVAO=function(b,a,c){if(c){if(a.lineDDVertexArrayObject)return a.lineDDVertexArrayObject;
c=a.lineDDVertexBuffer;var e=a.lineIndexBuffer;return c&&e?(a.lineDDVertexArrayObject=new g(b,this._attributeLocationsDD,this._vertexAttributesDD,{geometry:c},e),a.lineDDVertexArrayObject):null}if(a.lineVertexArrayObject)return a.lineVertexArrayObject;c=a.lineVertexBuffer;e=a.lineIndexBuffer;return c&&e?(a.lineVertexArrayObject=new g(b,this._attributeLocations,this._vertexAttributes,{geometry:c},e),a.lineVertexArrayObject):null},a}()})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec2":function(){define(["./common"],
function(a){var d={};return d.create=function(){var b=new a.ARRAY_TYPE(2);return b[0]=0,b[1]=0,b},d.clone=function(b){var c=new a.ARRAY_TYPE(2);return c[0]=b[0],c[1]=b[1],c},d.fromValues=function(b,c){var e=new a.ARRAY_TYPE(2);return e[0]=b,e[1]=c,e},d.copy=function(b,a){return b[0]=a[0],b[1]=a[1],b},d.set=function(b,a,e){return b[0]=a,b[1]=e,b},d.add=function(b,a,e){return b[0]=a[0]+e[0],b[1]=a[1]+e[1],b},d.subtract=function(b,a,e){return b[0]=a[0]-e[0],b[1]=a[1]-e[1],b},d.sub=d.subtract,d.multiply=
function(b,a,e){return b[0]=a[0]*e[0],b[1]=a[1]*e[1],b},d.mul=d.multiply,d.divide=function(b,a,e){return b[0]=a[0]/e[0],b[1]=a[1]/e[1],b},d.div=d.divide,d.ceil=function(b,a){return b[0]=Math.ceil(a[0]),b[1]=Math.ceil(a[1]),b},d.floor=function(b,a){return b[0]=Math.floor(a[0]),b[1]=Math.floor(a[1]),b},d.min=function(b,a,e){return b[0]=Math.min(a[0],e[0]),b[1]=Math.min(a[1],e[1]),b},d.max=function(b,a,e){return b[0]=Math.max(a[0],e[0]),b[1]=Math.max(a[1],e[1]),b},d.round=function(b,a){return b[0]=Math.round(a[0]),
b[1]=Math.round(a[1]),b},d.scale=function(b,a,e){return b[0]=a[0]*e,b[1]=a[1]*e,b},d.scaleAndAdd=function(b,a,e,d){return b[0]=a[0]+e[0]*d,b[1]=a[1]+e[1]*d,b},d.distance=function(b,a){var c=a[0]-b[0],d=a[1]-b[1];return Math.sqrt(c*c+d*d)},d.dist=d.distance,d.squaredDistance=function(b,a){var c=a[0]-b[0],d=a[1]-b[1];return c*c+d*d},d.sqrDist=d.squaredDistance,d.length=function(b){var a=b[0];b=b[1];return Math.sqrt(a*a+b*b)},d.len=d.length,d.squaredLength=function(b){var a=b[0];b=b[1];return a*a+b*
b},d.sqrLen=d.squaredLength,d.negate=function(b,a){return b[0]=-a[0],b[1]=-a[1],b},d.inverse=function(b,a){return b[0]=1/a[0],b[1]=1/a[1],b},d.normalize=function(b,a){var c=a[0],d=a[1],c=c*c+d*d;return 0<c&&(c=1/Math.sqrt(c),b[0]=a[0]*c,b[1]=a[1]*c),b},d.dot=function(b,a){return b[0]*a[0]+b[1]*a[1]},d.cross=function(b,a,e){a=a[0]*e[1]-a[1]*e[0];return b[0]=b[1]=0,b[2]=a,b},d.lerp=function(b,a,e,d){var c=a[0];a=a[1];return b[0]=c+d*(e[0]-c),b[1]=a+d*(e[1]-a),b},d.random=function(b,c){c=c||1;var e=
2*a.RANDOM()*Math.PI;return b[0]=Math.cos(e)*c,b[1]=Math.sin(e)*c,b},d.transformMat2=function(b,a,e){var c=a[0];a=a[1];return b[0]=e[0]*c+e[2]*a,b[1]=e[1]*c+e[3]*a,b},d.transformMat2d=function(b,a,e){var c=a[0];a=a[1];return b[0]=e[0]*c+e[2]*a+e[4],b[1]=e[1]*c+e[3]*a+e[5],b},d.transformMat3=function(b,a,e){var c=a[0];a=a[1];return b[0]=e[0]*c+e[3]*a+e[6],b[1]=e[1]*c+e[4]*a+e[7],b},d.transformMat4=function(b,a,e){var c=a[0];a=a[1];return b[0]=e[0]*c+e[4]*a+e[12],b[1]=e[1]*c+e[5]*a+e[13],b},d.forEach=
function(){var b=d.create();return function(a,e,d,g,h,n){e||(e=2);d||(d=0);for(g=g?Math.min(g*e+d,a.length):a.length;g>d;d+=e)b[0]=a[d],b[1]=a[d+1],h(b,b,n),a[d]=b[0],a[d+1]=b[1];return a}}(),d.str=function(b){return"vec2("+b[0]+", "+b[1]+")"},d.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===a[1]},d.equals=function(b,c){var e=b[0],d=b[1],g=c[0],h=c[1];return Math.abs(e-g)<=a.EPSILON*Math.max(1,Math.abs(e),Math.abs(g))&&Math.abs(d-h)<=a.EPSILON*Math.max(1,Math.abs(d),Math.abs(h))},d})},"esri/layers/vectorTiles/views/vectorTiles/renderers/FillRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/mat3 ../../../core/libs/gl-matrix/vec4 ../../../core/libs/gl-matrix/vec3 ../../webgl/VertexArrayObject ../GeometryUtils ./rendererUtils ../../webgl/ShaderVariations ./vtShaderSnippets".split(" "),
function(a,d,b,c,e,f,g,h,n,k,m){var q=1/65536;return function(){function a(){this._fillAttributeLocations={a_pos:0};this._fillAttributeLocationsDD={a_pos:0,a_color:1};this._outlineAttributeLocations={a_pos:0,a_offset:1,a_xnormal:2};this._outlineAttributeLocationsDD={a_pos:0,a_offset:1,a_xnormal:2,a_color:3};this._initialized=!1;this._viewProjMat=b.create();this._offsetVector=f.create();this._patternMatrix=c.create();this._color=e.create();this._outlineColor=e.create()}return a.prototype.dispose=function(){},
a.prototype.render=function(a,c,e,d,f,g,l,k,m,A,B){if(0!==c.triangleElementCount){this._initialized||this._initialize(a);var p,u=void 0!==l.getPaintValue("fill-pattern",e),t=B*l.getPaintValue("fill-opacity",e),r=l.getPaintValue("fill-color",e),w=3===f;w&&(p=n.int32To4Bytes(c.layerID));var v=g.tileTransform.transform,x=g.coordRange/512,y=l.getPaintValue("fill-translate",e);if(0!==y[0]||0!==y[1]){b.copy(this._viewProjMat,g.tileTransform.transform);var v=y[0],y=y[1],z=0,G=0,x=(1<<g.key.level)/Math.pow(2,
e)*x;1===l.getPaintValue("fill-translate-anchor",e)?(z=-h.C_DEG_TO_RAD*d,d=Math.sin(z),G=Math.cos(z),z=x*(v*G-y*d),G=x*(v*d+y*G)):(z=x*v,G=x*y);this._offsetVector[0]=z;this._offsetVector[1]=G;this._offsetVector[2]=0;b.translate(this._viewProjMat,this._viewProjMat,this._offsetVector);v=this._viewProjMat}this._drawFill(a,c,e,f,g,l,k,v,A,B,w,p);if(l.getPaintValue("fill-antialias",e)&&!u&&0<c.outlineElementCount&&(1===f||3===f)){f=l.hasDataDrivenOutline;e=l.getPaintValue("fill-outline-color",e);if(0===
e[3]){if(1!==this._color[3]&&!f)return;e=r}A=.75/A;if(r=this._getOutlineVAO(a,g,f))a.bindVAO(r),r=this._outlineShaderVariations.getProgram([f,w],void 0,void 0,f?this._outlineAttributeLocationsDD:this._outlineAttributeLocations),(a.bindProgram(r),r.setUniformMatrix4fv("u_transformMatrix",v),r.setUniformMatrix4fv("u_extrudeMatrix",m),r.setUniform2fv("u_normalized_origin",g.tileTransform.displayCoord),r.setUniform1f("u_depth",l.z+q),r.setUniform1f("u_outline_width",A),f)||(g=t*e[3],this._outlineColor[0]=
g*e[0],this._outlineColor[1]=g*e[1],this._outlineColor[2]=g*e[2],this._outlineColor[3]=g,r.setUniform4fv("u_color",this._outlineColor)),w&&r.setUniform4f("u_id",p[0],p[1],p[2],p[3]),a.drawElements(4,c.outlineElementCount,5125,12*c.outlineElementStart),a.bindVAO()}}},a.prototype._initialize=function(b){if(this._initialized)return!0;var a=new k("fill",["fillVS","fillFS"],[],m,b);a.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");a.addDefine("DD","DD",[!0,!1],"DD");a.addDefine("ID","ID",[!0,!0],"ID");
this._fillShaderVariations=a;this._fillVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:4,normalized:!1,divisor:0}]};this._fillVertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:8,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:4,stride:8,normalized:!0,divisor:0}]};b=new k("outline",["outlineVS","outlineFS"],[],m,b);return b.addDefine("DD","DD",[!0,!1],"DD"),b.addDefine("ID","ID",[!0,!0],"ID"),this._outlineShaderVariations=b,
this._outlineVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:8,normalized:!1,divisor:0},{name:"a_offset",count:2,type:5120,offset:4,stride:8,normalized:!1,divisor:0},{name:"a_xnormal",count:2,type:5120,offset:6,stride:8,normalized:!1,divisor:0}]},this._outlineVertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:12,normalized:!1,divisor:0},{name:"a_offset",count:2,type:5120,offset:4,stride:12,normalized:!1,divisor:0},{name:"a_xnormal",count:2,type:5120,
offset:6,stride:12,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:12,normalized:!0,divisor:0}]},this._initialized=!0,!0},a.prototype._drawFill=function(b,a,e,d,f,g,h,l,k,m,n,H){var p=g.getPaintValue("fill-pattern",e),u=void 0!==p,t=m*g.getPaintValue("fill-opacity",e);m=g.getPaintValue("fill-color",e);var r=g.hasDataDrivenFill,A=r?.5:m[3]*t,w=!1;if(u||1!==A||(w=!0),!(u&&0===d||w&&1===d)&&(u||w||0!==d))if(d=this._getFillVAO(b,f,r)){b.bindVAO(d);d=this._fillShaderVariations.getProgram([u,
r,n],void 0,void 0,r?this._fillAttributeLocationsDD:this._fillAttributeLocations);if(b.bindProgram(d),u)if(p=h.getMosaicItemPosition(p,!0))e=f.coordRange/512/Math.pow(2,Math.round(e)-f.key.level)/k,c.identity(this._patternMatrix),k=1/(p.size[1]*e),this._patternMatrix[0]=1/(p.size[0]*e),this._patternMatrix[4]=k,h.bind(b,9729,p.page,1),d.setUniformMatrix3fv("u_pattern_matrix",this._patternMatrix),d.setUniform2f("u_pattern_tl",p.tl[0],p.tl[1]),d.setUniform2f("u_pattern_br",p.br[0],p.br[1]),d.setUniform1i("u_texture",
1);(d.setUniformMatrix4fv("u_transformMatrix",l),d.setUniform2fv("u_normalized_origin",f.tileTransform.displayCoord),d.setUniform1f("u_depth",g.z+q),r)||(f=t*m[3],this._color[0]=f*m[0],this._color[1]=f*m[1],this._color[2]=f*m[2],this._color[3]=f,d.setUniform4fv("u_color",this._color));n&&d.setUniform4f("u_id",H[0],H[1],H[2],H[3]);b.drawElements(4,a.triangleElementCount,5125,12*a.triangleElementStart);b.bindVAO()}},a.prototype._getFillVAO=function(b,a,c){if(c){if(a.fillDDVertexArrayObject)return a.fillDDVertexArrayObject;
c=a.fillDDVertexBuffer;var e=a.fillIndexBuffer;return c&&e?(a.fillDDVertexArrayObject=new g(b,this._fillAttributeLocationsDD,this._fillVertexAttributesDD,{geometry:c},e),a.fillDDVertexArrayObject):null}if(a.fillVertexArrayObject)return a.fillVertexArrayObject;c=a.fillVertexBuffer;e=a.fillIndexBuffer;return c&&e?(a.fillVertexArrayObject=new g(b,this._fillAttributeLocations,this._fillVertexAttributes,{geometry:c},e),a.fillVertexArrayObject):null},a.prototype._getOutlineVAO=function(b,a,c){if(c){if(a.outlineDDVertexArrayObject)return a.outlineDDVertexArrayObject;
c=a.outlineDDVertexBuffer;var e=a.outlineIndexBuffer;return c&&e?(a.outlineDDVertexArrayObject=new g(b,this._outlineAttributeLocationsDD,this._outlineVertexAttributesDD,{geometry:c},e),a.outlineDDVertexArrayObject):null}if(a.outlineVertexArrayObject)return a.outlineVertexArrayObject;c=a.outlineVertexBuffer;e=a.outlineIndexBuffer;return c&&e?(a.outlineVertexArrayObject=new g(b,this._outlineAttributeLocations,this._outlineVertexAttributes,{geometry:c},e),a.outlineVertexArrayObject):null},a}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/SymbolRenderer":function(){define(["require",
"exports","./IconRenderer","./SDFRenderer"],function(a,d,b,c){return function(){function a(){this._iconRenderer=new b;this._sdfRenderer=new c}return a.prototype.dispose=function(){this._iconRenderer&&(this._iconRenderer.dispose(),this._iconRenderer=null);this._sdfRenderer&&(this._sdfRenderer.dispose(),this._sdfRenderer=null)},a.prototype.render=function(b,a,c,e,d,m,q,l,p,u,t,r,v,w){a.hasData()&&(0<a.markerPerPageElementsMap.size&&this._iconRenderer.render(b,a,c,e,d,m,q,l,p,t,r,w),0<a.glyphPerPageElementsMap.size&&
this._sdfRenderer.render(b,a,c,e,d,m,q,l,u,t,r,v,w))},a}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/IconRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/vec3 ../../webgl/VertexArrayObject ../GeometryUtils ./rendererUtils ../../webgl/ShaderVariations ./vtShaderSnippets".split(" "),function(a,d,b,c,e,f,g,h,n){return function(){function a(){this._attributeLocations={a_pos:0,a_vertexOffset:1,a_tex:2,a_levelInfo:3};this._attributeLocationsDD=
{a_pos:0,a_vertexOffset:1,a_tex:2,a_levelInfo:3,a_color:4,a_size:5};this._spritesTextureSize=new Float32Array(2);this._initialized=!1;this._viewProjMat=b.create();this._offsetVector=c.create();this._extrudeMat=b.create()}return a.prototype.dispose=function(){},a.prototype.render=function(a,c,e,d,h,k,n,v,w,x,y,z){var l=this;this._initialized||this._initialize(a);var m=v.getLayoutValue("icon-size",e);z*=v.getPaintValue("icon-opacity",e);var p=v.getLayoutValue("icon-rotation-alignment",e);2===p&&(p=
1===v.getLayoutValue("symbol-placement",e)?0:1);var q=0===p,u=c.isSDF,r=v.hasDataDrivenIcon;d=3===d;var p=f.degToByte(h),t=n.tileTransform.transform,E=v.getPaintValue("icon-translate",e);if(0!==E[0]||0!==E[1]){b.copy(this._viewProjMat,n.tileTransform.transform);var t=E[0],E=E[1],I=0,F=0,F=(1<<n.key.level)/Math.pow(2,e)*(n.coordRange/512);if(1===v.getPaintValue("icon-translate-anchor",e)){I=-f.C_DEG_TO_RAD*h;h=Math.sin(I);var C=Math.cos(I),I=F*(t*C-E*h),F=F*(t*h+E*C)}else I=F*t,F*=E;this._offsetVector[0]=
I;this._offsetVector[1]=F;this._offsetVector[2]=0;b.translate(this._viewProjMat,this._viewProjMat,this._offsetVector);t=this._viewProjMat}q?b.copy(this._extrudeMat,x):b.copy(this._extrudeMat,y);if(x=this._getIconVAO(a,n,r)){a.bindVAO(x);var G=this._shaderVariations.getProgram([u,r,d],void 0,void 0,r?this._attributeLocationsDD:this._attributeLocations);if(a.bindProgram(G),u)x=v.getPaintValue("icon-color",e),y=v.getPaintValue("icon-halo-color",e),u=v.getPaintValue("icon-halo-width",e),G.setUniform4f("u_color",
x[0],x[1],x[2],x[3]),G.setUniform4f("u_outlineColor",y[0],y[1],y[2],y[3]),G.setUniform1f("u_outlineSize",u);if(G.setUniformMatrix4fv("u_transformMatrix",t),G.setUniformMatrix4fv("u_extrudeMatrix",this._extrudeMat),G.setUniform2fv("u_normalized_origin",n.tileTransform.displayCoord),G.setUniform1f("u_depth",v.z),G.setUniform1f("u_mapRotation",p),G.setUniform1f("u_keepUpright",0),G.setUniform1f("u_level",10*e),G.setUniform1f("u_fadeSpeed",10*k.fadeSpeed),G.setUniform1f("u_minfadeLevel",10*k.minfadeLevel),
G.setUniform1f("u_maxfadeLevel",10*k.maxfadeLevel),G.setUniform1f("u_fadeChange",10*(e+k.fadeChange)),G.setUniform1i("u_texture",1),G.setUniform1f("u_size",m),G.setUniform1f("u_opacity",z),d)e=g.int32To4Bytes(c.layerID),G.setUniform4f("u_id",e[0],e[1],e[2],e[3]);c.markerPerPageElementsMap.forEach(function(b,c){l._spritesTextureSize[0]=w.getWidth(c)/4;l._spritesTextureSize[1]=w.getHeight(c)/4;G.setUniform2fv("u_mosaicSize",l._spritesTextureSize);w.bind(a,9729,c,1);a.drawElements(4,b[1],5125,12*b[0])});
a.bindVAO()}},a.prototype._initialize=function(b){if(this._initialized)return!0;b=new h("icon",["iconVS","iconFS"],[],n,b);return b.addDefine("SDF","SDF",[!0,!0],"SDF"),b.addDefine("DD","DD",[!0,!1],"DD"),b.addDefine("ID","ID",[!0,!0],"ID"),this._shaderVariations=b,this._vertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:16,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:16,normalized:!1,divisor:0},{name:"a_tex",count:4,type:5121,offset:8,
stride:16,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:16,normalized:!1,divisor:0}]},this._vertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:24,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:24,normalized:!1,divisor:0},{name:"a_tex",count:4,type:5121,offset:8,stride:24,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:24,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,
offset:16,stride:24,normalized:!0,divisor:0},{name:"a_size",count:1,type:5126,offset:20,stride:24,normalized:!1,divisor:0}]},this._initialized=!0,!0},a.prototype._getIconVAO=function(b,a,c){if(c){if(a.iconDDVertexArrayObject)return a.iconDDVertexArrayObject;c=a.iconDDVertexBuffer;var d=a.iconIndexBuffer;return c&&d?(a.iconDDVertexArrayObject=new e(b,this._attributeLocationsDD,this._vertexAttributesDD,{geometry:c},d),a.iconDDVertexArrayObject):null}if(a.iconVertexArrayObject)return a.iconVertexArrayObject;
c=a.iconVertexBuffer;d=a.iconIndexBuffer;return c&&d?(a.iconVertexArrayObject=new e(b,this._attributeLocations,this._vertexAttributes,{geometry:c},d),a.iconVertexArrayObject):null},a}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/SDFRenderer":function(){define("require exports dojo/has ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/vec4 ../../../core/libs/gl-matrix/vec3 ../../webgl/VertexArrayObject ../GeometryUtils ./rendererUtils ../../webgl/ShaderVariations ./vtShaderSnippets".split(" "),
function(a,d,b,c,e,f,g,h,n,k,m){var q=1/65536;return function(){function a(){this._attributeLocations={a_pos:0,a_vertexOffset:1,a_tex:2,a_levelInfo:3};this._attributeLocationsDD={a_pos:0,a_vertexOffset:1,a_tex:2,a_levelInfo:3,a_color:4,a_size:5};this._initialized=!1;this._viewProjMat=c.create();this._offsetVector=f.create();this._extrudeMat=c.create();this._haloColor=e.create();this._sdfColor=e.create();this._scaleVec=f.create()}return a.prototype.dispose=function(){},a.prototype.render=function(a,
e,d,f,g,l,k,m,z,A,B,H,J){var p=this;if(!b("esri-vector-tiles-avoid-text")){this._initialized||this._initialize(a);var u=m.getLayoutValue("text-size",d),r=h.degToByte(g),t=m.getLayoutValue("text-rotation-alignment",d);2===t&&(t=1===m.getLayoutValue("symbol-placement",d)?0:1);var w=0===t,t=m.getLayoutValue("text-keep-upright",d)&&w;f=3===f;H=.8*3/H;var v=J*m.getPaintValue("text-opacity",d);this._glyphTextureSize||(this._glyphTextureSize=new Float32Array([z.width/4,z.height/4]));J=k.tileTransform.transform;
var x=m.getPaintValue("text-translate",d);if(0!==x[0]||0!==x[1]){c.copy(this._viewProjMat,k.tileTransform.transform);J=x[0];var x=x[1],y=0,N=0,N=(1<<k.key.level)/Math.pow(2,d)*(k.coordRange/512);if(1===m.getPaintValue("text-translate-anchor",d)){y=-h.C_DEG_TO_RAD*g;g=Math.sin(y);var P=Math.cos(y),y=N*(J*P-x*g),N=N*(J*g+x*P)}else y=N*J,N*=x;this._offsetVector[0]=y;this._offsetVector[1]=N;this._offsetVector[2]=0;c.translate(this._viewProjMat,this._viewProjMat,this._offsetVector);J=this._viewProjMat}w?
c.copy(this._extrudeMat,A):c.copy(this._extrudeMat,B);this._scaleVec[0]=1/24;this._scaleVec[1]=1/24;this._scaleVec[2]=1;c.scale(this._extrudeMat,this._extrudeMat,this._scaleVec);A=m.hasDataDrivenText;if(B=this._getSDFVAO(a,k,A)){a.bindVAO(B);var L=this._shaderVariations.getProgram([A,f],void 0,void 0,A?this._attributeLocationsDD:this._attributeLocations);if(a.bindProgram(L),L.setUniformMatrix4fv("u_transformMatrix",J),L.setUniformMatrix4fv("u_extrudeMatrix",this._extrudeMat),L.setUniform2fv("u_normalized_origin",
k.tileTransform.displayCoord),L.setUniform1f("u_depth",m.z+q),L.setUniform2fv("u_mosaicSize",this._glyphTextureSize),L.setUniform1f("u_mapRotation",r),L.setUniform1f("u_keepUpright",t?1:0),L.setUniform1f("u_level",10*d),L.setUniform1f("u_fadeSpeed",10*l.fadeSpeed),L.setUniform1f("u_minfadeLevel",10*l.minfadeLevel),L.setUniform1f("u_maxfadeLevel",10*l.maxfadeLevel),L.setUniform1f("u_fadeChange",10*(d+l.fadeChange)),L.setUniform1f("u_opacity",v),L.setUniform1i("u_texture",0),L.setUniform1f("u_size",
u),L.setUniform1f("u_antialiasingWidth",H),f)l=n.int32To4Bytes(e.layerID),L.setUniform4f("u_id",l[0],l[1],l[2],l[3]);e.glyphPerPageElementsMap.forEach(function(b,c){z.bind(a,9729,c,0);var e=m.getPaintValue("text-halo-color",d),f=m.getPaintValue("text-halo-width",d);if(0<e[3]&&0<f){var g=e[3]*v;p._haloColor[0]=g*e[0];p._haloColor[1]=g*e[1];p._haloColor[2]=g*e[2];p._haloColor[3]=g;e=3*m.getPaintValue("text-halo-blur",d);f*=3;L.setUniform4fv("u_color",p._haloColor);L.setUniform1f("u_halo",1);L.setUniform1f("u_edgeDistance",
f);L.setUniform1f("u_edgeBlur",e);a.drawElements(4,b[1],5125,12*b[0])}f=m.getPaintValue("text-color",d);0<f[3]&&(e=f[3]*v,p._sdfColor[0]=e*f[0],p._sdfColor[1]=e*f[1],p._sdfColor[2]=e*f[2],p._sdfColor[3]=e,L.setUniform4fv("u_color",p._sdfColor),L.setUniform1f("u_halo",0),L.setUniform1f("u_edgeDistance",0),L.setUniform1f("u_edgeBlur",0),a.drawElements(4,b[1],5125,12*b[0]))});a.bindVAO()}}},a.prototype._initialize=function(b){if(this._initialized)return!0;b=new k("text",["textVS","textFS"],[],m,b);return b.addDefine("DD",
"DD",[!0,!1],"DD"),b.addDefine("ID","ID",[!0,!0],"ID"),this._shaderVariations=b,this._vertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:16,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:16,normalized:!1,divisor:0},{name:"a_tex",count:4,type:5121,offset:8,stride:16,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:16,normalized:!1,divisor:0}]},this._vertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,
offset:0,stride:24,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:24,normalized:!1,divisor:0},{name:"a_tex",count:4,type:5121,offset:8,stride:24,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:24,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:16,stride:24,normalized:!0,divisor:0},{name:"a_size",count:1,type:5126,offset:20,stride:24,normalized:!1,divisor:0}]},this._initialized=!0,!0},a.prototype._getSDFVAO=function(b,
a,c){if(c){if(a.textDDVertexArrayObject)return a.textDDVertexArrayObject;c=a.textDDVertexBuffer;var e=a.textIndexBuffer;return c&&e?(a.textDDVertexArrayObject=new g(b,this._attributeLocationsDD,this._vertexAttributesDD,{geometry:c},e),a.textDDVertexArrayObject):null}if(a.textVertexArrayObject)return a.textVertexArrayObject;c=a.textVertexBuffer;e=a.textIndexBuffer;return c&&e?(a.textVertexArrayObject=new g(b,this._attributeLocations,this._vertexAttributes,{geometry:c},e),a.textVertexArrayObject):null},
a}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/TileInfoRenderer":function(){define("require exports ../../webgl/Program ../../webgl/VertexArrayObject ../../webgl/BufferObject ../../webgl/Texture ../GeometryUtils ./vtShaderSnippets".split(" "),function(a,d,b,c,e,f,g,h){return function(){function a(){this._initialized=!1;this._maxWidth=0;this._color=new Float32Array([1,0,0,1])}return a.prototype.dispose=function(){this._outlineProgram&&(this._outlineProgram.dispose(),this._outlineProgram=
null);this._tileInfoProgram&&(this._tileInfoProgram.dispose(),this._tileInfoProgram=null);this._outlineVertexArrayObject&&(this._outlineVertexArrayObject.dispose(),this._outlineVertexArrayObject=null);this._tileInfoVertexArrayObject&&(this._tileInfoVertexArrayObject.dispose(),this._tileInfoVertexArrayObject=null)},a.prototype.render=function(b,a){this._initialized||this._initialize(b);b.bindVAO(this._outlineVertexArrayObject);b.bindProgram(this._outlineProgram);this._outlineProgram.setUniformMatrix4fv("u_transformMatrix",
a.tileTransform.transform);this._outlineProgram.setUniform2fv("u_normalized_origin",a.tileTransform.displayCoord);this._outlineProgram.setUniform1f("u_coord_range",a.coordRange);this._outlineProgram.setUniform1f("u_depth",0);this._outlineProgram.setUniform4fv("u_color",this._color);b.setLineWidth(2);b.drawArrays(3,0,4);b.bindVAO();var c=this._getTexture(b,a);c&&(b.bindVAO(this._tileInfoVertexArrayObject),b.bindProgram(this._tileInfoProgram),b.bindTexture(c,0),this._tileInfoProgram.setUniformMatrix4fv("u_transformMatrix",
a.tileTransform.transform),this._tileInfoProgram.setUniform2fv("u_normalized_origin",a.tileTransform.displayCoord),this._tileInfoProgram.setUniform1f("u_depth",0),this._tileInfoProgram.setUniform1f("u_coord_ratio",a.coordRange/512),this._tileInfoProgram.setUniform2f("u_delta",8,8),this._tileInfoProgram.setUniform2f("u_dimensions",c.descriptor.width,c.descriptor.height),b.drawArrays(5,0,4),b.bindVAO())},a.prototype._initialize=function(a){if(this._initialized)return!0;var d={a_pos:0},f=new b(a,h.backgroundVS,
h.backgroundFS,d),g=new b(a,h.tileInfoVS,h.tileInfoFS,d),k={geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},n=new Int8Array([0,0,1,0,1,1,0,1]),n=e.createVertex(a,35044,n),n=new c(a,d,k,{geometry:n}),t=new Int8Array([0,0,1,0,0,1,1,1]),t=e.createVertex(a,35044,t);a=new c(a,d,k,{geometry:t});return this._outlineProgram=f,this._tileInfoProgram=g,this._outlineVertexArrayObject=n,this._tileInfoVertexArrayObject=a,this._initialized=!0,!0},a.prototype._getTexture=function(b,
a){if(a.texture)return a.texture;this._canvas||(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("id","canvas2d"),this._canvas.setAttribute("width","256"),this._canvas.setAttribute("height","32"),this._canvas.setAttribute("style","display:none"));var c=a.key.id,e=this._canvas.getContext("2d");e.font="24px sans-serif";e.textAlign="left";e.textBaseline="middle";var d=e.measureText(c),d=Math.pow(2,Math.ceil(g.log2(d.width+2)));d>this._maxWidth&&(this._maxWidth=d);return e.clearRect(0,
0,this._maxWidth,32),e.fillStyle=a.key.level>a.refKey.level?"red":"blue",e.fillText(c,0,16),a.texture=new f(b,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728},this._canvas),a.texture},a}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/FadeRecorder":function(){define(["require","exports","../../../core/now"],function(a,d,b){Object.defineProperty(d,"__esModule",{value:!0});a=(function(){return function(b,a){this.level=b;this.now=a}}(),function(){return function(b,a,d,g){this.fadeSpeed=
b;this.minfadeLevel=a;this.maxfadeLevel=d;this.fadeChange=g}}());d.FadeProperties=a;a=function(){function a(b){void 0===b&&(b=300);this._levelSnapshots=[];this._duration=b}return a.prototype.recordLevel=function(a){var c=b(),e=this._levelSnapshots;0===e.length&&(e.push({level:a,now:0}),e.push({level:a,now:0}));2!==e.length&&e[0].level===a||e.push({level:a,now:c})},a.prototype.needsRedraw=function(){if(0===this._levelSnapshots.length)return!1;for(var b=this._duration,a=this._levelSnapshots,c=a.length,
d=a[c-1],n=-1;c>n+1&&a[n+1].now+b<d.now;)n++;for(0>n&&(n=0);c>n;n++)if(a[n].level!==d.level)return!0;return!1},a.prototype.getFadeValues=function(a){void 0===a&&(a=!1);for(var c=this._duration,e=b(),d=this._levelSnapshots;3<d.length&&d[1].now+c<e;)d.shift();d[1].now+c<e&&(d[0].level=d[1].level);var n=d[0].level,k=d[d.length-1],m=k.level,q=Math.min(n,m),n=Math.max(n,m),d=(k.level-d[1].level)/((k.now-d[1].now)/c),c=(e-k.now)/c*d;return a?{fadeSpeed:0,minfadeLevel:q,maxfadeLevel:n,fadeChange:0}:{fadeSpeed:d,
minfadeLevel:q,maxfadeLevel:n,fadeChange:c}},a}();d.FadeRecorder=a})},"esri/layers/vectorTiles/core/now":function(){define(["require","exports","./global"],function(a,d,b){return function(){var a=b.performance||{};if(a.now)return function(){return a.now()};if(a.webkitNow)return function(){return a.webkitNow()};if(a.mozNow)return function(){return a.mozNow()};if(a.msNow)return function(){return a.msNow()};if(a.oNow)return function(){return a.oNow()};var e;return e=a.timing&&a.timing.navigationStart?
a.timing.navigationStart:Date.now(),function(){return Date.now()-e}}()})},"esri/layers/vectorTiles/core/global":function(){define(["require","exports"],function(a,d){return"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0})},"esri/layers/vectorTiles/views/vectorTiles/VectorTileDisplayObject":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/libs/gl-matrix/vec2 ../../core/libs/gl-matrix/mat4 ../../core/ObjectPool ../../geometry/support/spatialReferenceUtils ../webgl/BufferObject ../2d/engine/DisplayObject ../2d/tiling/TileKey ./RenderBucket".split(" "),
function(a,d,b,c,e,f,g,h,n,k,m){return function(a){function d(){for(var b=[],d=0;d<arguments.length;d++)b[d]=arguments[d];d=a.call(this)||this;return d._renderBuckets=[],d._vectorTileData=null,d._symbolUpdateData=null,d.status=5,d.coords=[0,0],d.bounds=[0,0,0,0],d.tileTransform={transform:Float32Array[16],displayCoord:Float32Array[2]},d.stencilData={mask:0,reference:0},d.status=0,d.tileTransform.transform=e.create(),d.tileTransform.displayCoord=c.create(),0<b.length&&(f=d.acquire).call.apply(f,[d].concat(b)),
d;var f}return b(d,a),d.prototype.reset=function(){k.pool.release(this.key);this.refKey=this.key=null;this.coords[0]=0;this.coords[1]=0;this.bounds[0]=0;this.bounds[1]=0;this.bounds[2]=0;this.height=this.width=this.bounds[3]=0;this.resolution=null;this.rotation=0;this.id=this._connection=this.workerID=this.styleLayers=this._vectorTileData=null;this.tileTransform.transform.fill(0);this.tileTransform.displayCoord.fill(0);this.stencilData.mask=0;this.stencilData.reference=0;this._renderBuckets.length=
0;this._symbolUpdateData=null;this.status=0},d.prototype.acquire=function(a,b,c,e,d){this.key=a;this.refKey=b;b=c.lodAt(a.level).resolution;var f=c.size[0]*b,h=c.origin,l=a.col*f,k=a.row*f,m=c.spatialReference,n=0;m&&(m._isWrappable?m._isWrappable():m.isWrappable)&&(m=g.getInfo(m),n=m.valid[1]-m.valid[0]);l=h.x+l+a.world*n;h=h.y-k;this.coords[0]=l;this.coords[1]=h;this.bounds[0]=l;this.bounds[1]=h;this.bounds[2]=l+f;this.bounds[3]=h-f;this.widthInPixels=c.size[1];this.coordRange=4096;this.resolution=
b;this.rotation=d;this.styleLayers=e;this.id=a.id;this.status=1},d.prototype.setData=function(a,b,c){this._vectorTileData=a;this.workerID=b;this._connection=c;this.status=3},d.prototype.updateSymbolData=function(a){a&&(this._symbolUpdateData=a,this.requestRender())},d.prototype.dispose=function(){this.fillVertexArrayObject&&(this.fillVertexArrayObject.dispose(),this.fillVertexArrayObject=null);this.fillDDVertexArrayObject&&(this.fillDDVertexArrayObject.dispose(),this.fillDDVertexArrayObject=null);
this.outlineVertexArrayObject&&(this.outlineVertexArrayObject.dispose(),this.outlineVertexArrayObject=null);this.outlineDDVertexArrayObject&&(this.outlineDDVertexArrayObject.dispose(),this.outlineDDVertexArrayObject=null);this.lineVertexArrayObject&&(this.lineVertexArrayObject.dispose(),this.lineVertexArrayObject=null);this.lineDDVertexArrayObject&&(this.lineDDVertexArrayObject.dispose(),this.lineDDVertexArrayObject=null);this.iconVertexArrayObject&&(this.iconVertexArrayObject.dispose(),this.iconVertexArrayObject=
null);this.iconDDVertexArrayObject&&(this.iconDDVertexArrayObject.dispose(),this.iconDDVertexArrayObject=null);this.textVertexArrayObject&&(this.textVertexArrayObject.dispose(),this.textVertexArrayObject=null);this.textDDVertexArrayObject&&(this.textDDVertexArrayObject.dispose(),this.textDDVertexArrayObject=null);this.fillVertexBuffer&&(this.fillVertexBuffer.dispose(),this.fillVertexBuffer=null);this.fillDDVertexBuffer&&(this.fillDDVertexBuffer.dispose(),this.fillDDVertexBuffer=null);this.fillIndexBuffer&&
(this.fillIndexBuffer.dispose(),this.fillIndexBuffer=null);this.outlineVertexBuffer&&(this.outlineVertexBuffer.dispose(),this.outlineVertexBuffer=null);this.outlineDDVertexBuffer&&(this.outlineDDVertexBuffer.dispose(),this.outlineDDVertexBuffer=null);this.outlineIndexBuffer&&(this.outlineIndexBuffer.dispose(),this.outlineIndexBuffer=null);this.lineVertexBuffer&&(this.lineVertexBuffer.dispose(),this.lineVertexBuffer=null);this.lineDDVertexBuffer&&(this.lineDDVertexBuffer.dispose(),this.lineDDVertexBuffer=
null);this.lineIndexBuffer&&(this.lineIndexBuffer.dispose(),this.lineIndexBuffer=null);this.iconVertexBuffer&&(this.iconVertexBuffer.dispose(),this.iconVertexBuffer=null);this.iconDDVertexBuffer&&(this.iconDDVertexBuffer.dispose(),this.iconDDVertexBuffer=null);this.iconIndexBuffer&&(this.iconIndexBuffer.dispose(),this.iconIndexBuffer=null);this.textVertexBuffer&&(this.textVertexBuffer.dispose(),this.textVertexBuffer=null);this.textDDVertexBuffer&&(this.textDDVertexBuffer.dispose(),this.textDDVertexBuffer=
null);this.textIndexBuffer&&(this.textIndexBuffer.dispose(),this.textIndexBuffer=null);this.texture&&(this.texture.dispose(),this.texture=null);this._renderBuckets.length=0;this.status=7},d.prototype.attach=function(a){if(4===this.status)return!0;if(this.status=3,!this._vectorTileData)return!1;if(!this._vectorTileData.bufferDataInfo)return this.status=4,!0;if(0===this._renderBuckets.length)for(var b=new Uint32Array(this._vectorTileData.bucketDataInfo),c=b.length,e=0;c>e;){var d=b[e],f=b[e+1];if(0===
f)f=new m.BackgroundRenderBucket,f.layerID=d,this._renderBuckets.push(f),e+=2;else if(1===f)f=new m.FillRenderBucket,f.layerID=d,f.triangleElementStart=b[e+2],f.triangleElementCount=b[e+3],f.outlineElementStart=b[e+4],f.outlineElementCount=b[e+5],this._renderBuckets.push(f),e+=6;else if(2===f)f=new m.LineRenderBucket,f.layerID=d,f.triangleElementStart=b[e+2],f.triangleElementCount=b[e+3],this._renderBuckets.push(f),e+=6;else if(3===f){f=new m.SymbolRenderBucket;f.layerID=d;f.isSDF=0!==b[e+2];var g=
e+3,d=b[g];if(g++,0<d)for(var l=void 0,k=void 0,n=void 0,p=0;d>p;p++)l=b[g],k=b[g+1],n=b[g+2],f.markerPerPageElementsMap.set(l,[k,n]),g+=3;var q=b[g];if(g++,0<q)for(n=k=l=void 0,p=0;q>p;p++)l=b[g],k=b[g+1],n=b[g+2],f.glyphPerPageElementsMap.set(l,[k,n]),g+=3;this._renderBuckets.push(f);e+=5+3*d+3*q}else console.error("Bad bucket type!")}a=a.context;b=new Uint32Array(this._vectorTileData.bufferDataInfo);c=b.length;for(f=e=0;c>f;f+=2,e++)if(d=b[f],!(0>=b[f+1]||0===this._vectorTileData.bufferData[e].byteLength))switch(d){case 1:this.fillVertexBuffer?
this.fillVertexBuffer.setData(this._vectorTileData.bufferData[e]):this.fillVertexBuffer=h.createVertex(a,35044,this._vectorTileData.bufferData[e]);break;case 2:this.fillDDVertexBuffer?this.fillDDVertexBuffer.setData(this._vectorTileData.bufferData[e]):this.fillDDVertexBuffer=h.createVertex(a,35044,this._vectorTileData.bufferData[e]);break;case 3:this.fillIndexBuffer?this.fillIndexBuffer.setData(this._vectorTileData.bufferData[e]):this.fillIndexBuffer=h.createIndex(a,35044,this._vectorTileData.bufferData[e]);
break;case 4:this.outlineVertexBuffer?this.outlineVertexBuffer.setData(this._vectorTileData.bufferData[e]):this.outlineVertexBuffer=h.createVertex(a,35044,this._vectorTileData.bufferData[e]);break;case 5:this.outlineDDVertexBuffer?this.outlineDDVertexBuffer.setData(this._vectorTileData.bufferData[e]):this.outlineDDVertexBuffer=h.createVertex(a,35044,this._vectorTileData.bufferData[e]);break;case 6:this.outlineIndexBuffer?this.outlineIndexBuffer.setData(this._vectorTileData.bufferData[e]):this.outlineIndexBuffer=
h.createIndex(a,35044,this._vectorTileData.bufferData[e]);break;case 7:this.lineVertexBuffer?this.lineVertexBuffer.setData(this._vectorTileData.bufferData[e]):this.lineVertexBuffer=h.createVertex(a,35044,this._vectorTileData.bufferData[e]);break;case 8:this.lineDDVertexBuffer?this.lineDDVertexBuffer.setData(this._vectorTileData.bufferData[e]):this.lineDDVertexBuffer=h.createVertex(a,35044,this._vectorTileData.bufferData[e]);break;case 9:this.lineIndexBuffer?this.lineIndexBuffer.setData(this._vectorTileData.bufferData[e]):
this.lineIndexBuffer=h.createIndex(a,35044,this._vectorTileData.bufferData[e]);break;case 10:this.iconVertexBuffer?this.iconVertexBuffer.setData(this._vectorTileData.bufferData[e]):this.iconVertexBuffer=h.createVertex(a,35044,this._vectorTileData.bufferData[e]);break;case 11:this.iconDDVertexBuffer?this.iconDDVertexBuffer.setData(this._vectorTileData.bufferData[e]):this.iconDDVertexBuffer=h.createVertex(a,35044,this._vectorTileData.bufferData[e]);break;case 12:this.iconIndexBuffer?this.iconIndexBuffer.setData(this._vectorTileData.bufferData[e]):
this.iconIndexBuffer=h.createIndex(a,35044,this._vectorTileData.bufferData[e]);break;case 13:this.textVertexBuffer?this.textVertexBuffer.setData(this._vectorTileData.bufferData[e]):this.textVertexBuffer=h.createVertex(a,35044,this._vectorTileData.bufferData[e]);break;case 14:this.textDDVertexBuffer?this.textDDVertexBuffer.setData(this._vectorTileData.bufferData[e]):this.textDDVertexBuffer=h.createVertex(a,35044,this._vectorTileData.bufferData[e]);break;case 15:this.textIndexBuffer?this.textIndexBuffer.setData(this._vectorTileData.bufferData[e]):
this.textIndexBuffer=h.createIndex(a,35044,this._vectorTileData.bufferData[e])}return this.status=4,!0},d.prototype.detach=function(b){-1!==this.workerID&&this._connection&&6!==this.status&&7!==this.status&&this._connection.broadcast("destructTileData",{key:this.id,worker:this.workerID},[]);this.dispose();a.prototype.detach.call(this,b)},d.prototype.doRender=function(a){if(this.visible&&4===this.status){var b=a.context,c=a.renderer;if(b&&c){var e=a.drawphase;this._symbolUpdateData&&this._updateSymbolData(a);
b.setStencilFunction(514,this.stencilData.reference,this.stencilData.mask);var d=this.styleLayers,f=void 0!==a.layerOpacity?a.layerOpacity:1;if(0!==f){var g,h=this._renderBuckets.length,l=0;if(0===e)for(l=h-1;0<=l;l--)g=this._renderBuckets[l],3!==g.type&&g.hasData()&&c.renderBucket(b,g,a.displayLevel,a.requiredLevel,e,this,d.layers[g.layerID],f);else for(l=0;h>l;l++)g=this._renderBuckets[l],g.hasData()&&c.renderBucket(b,g,a.displayLevel,a.requiredLevel,e,this,d.layers[g.layerID],f)}}}},d.prototype._updateSymbolData=
function(a){if(!this._symbolUpdateData.bucketDataInfo)return!0;var b=new Uint32Array(this._symbolUpdateData.bucketDataInfo),c=b.length;if(0===c)return this._symbolUpdateData=null,!0;if(1>a.budget.remaining||4!==this.status)return this.requestRender(),!1;a=a.context;for(var e=new Uint32Array(this._symbolUpdateData.bufferDataInfo),d=e.length,f=0,g=0;d>g;g+=2,f++)switch(e[g]){case 10:this.iconVertexBuffer&&(this.iconVertexBuffer.dispose(),this.iconVertexBuffer=null);this.iconVertexBuffer=h.createVertex(a,
35044,this._symbolUpdateData.bufferData[f]);break;case 11:this.iconDDVertexBuffer&&(this.iconDDVertexBuffer.dispose(),this.iconDDVertexBuffer=null);this.iconDDVertexBuffer=h.createVertex(a,35044,this._symbolUpdateData.bufferData[f]);break;case 12:this.iconIndexBuffer&&(this.iconIndexBuffer.dispose(),this.iconIndexBuffer=null);this.iconIndexBuffer=h.createIndex(a,35044,this._symbolUpdateData.bufferData[f]);break;case 13:this.textVertexBuffer&&(this.textVertexBuffer.dispose(),this.textVertexBuffer=
null);this.textVertexBuffer=h.createVertex(a,35044,this._symbolUpdateData.bufferData[f]);break;case 14:this.textDDVertexBuffer&&(this.textDDVertexBuffer.dispose(),this.textDDVertexBuffer=null);this.textDDVertexBuffer=h.createVertex(a,35044,this._symbolUpdateData.bufferData[f]);break;case 15:this.textIndexBuffer&&(this.textIndexBuffer.dispose(),this.textIndexBuffer=null),this.textIndexBuffer=h.createIndex(a,35044,this._symbolUpdateData.bufferData[f])}a=this._renderBuckets.length;for(e=0;a>e;e++)this._renderBuckets[e]instanceof
m.SymbolRenderBucket&&(d=this._renderBuckets[e],d.markerPerPageElementsMap.clear(),d.glyphPerPageElementsMap.clear());for(a=0;c>a;){d=b[a];f=-1;g=this._renderBuckets.length;for(e=0;g>e;e++)if(this._renderBuckets[e].layerID===d){f=e;break}(e=this._renderBuckets[f])||(e=new m.SymbolRenderBucket,e.layerID=d,e.isSDF=0!==b[a+2],this._renderBuckets.push(e));var l=a+3,d=b[l];if(l++,0<d)for(var k=g=f=void 0,n=0;d>n;n++)f=b[l],g=b[l+1],k=b[l+2],e.markerPerPageElementsMap.set(f,[g,k]),l+=3;var q=b[l];if(l++,
0<q)for(k=g=f=void 0,n=0;q>n;n++)f=b[l],g=b[l+1],k=b[l+2],e.glyphPerPageElementsMap.set(f,[g,k]),l+=3;a+=5+3*d+3*q}return this.iconVertexArrayObject&&(this.iconVertexArrayObject.dispose(),this.iconVertexArrayObject=null),this.iconDDVertexArrayObject&&(this.iconDDVertexArrayObject.dispose(),this.iconDDVertexArrayObject=null),this.textVertexArrayObject&&(this.textVertexArrayObject.dispose(),this.textVertexArrayObject=null),this.textDDVertexArrayObject&&(this.textDDVertexArrayObject.dispose(),this.textDDVertexArrayObject=
null),this._symbolUpdateData=null,!0},d.pool=new f(d),d}(n)})},"esri/layers/vectorTiles/core/ObjectPool":function(){define(["require","exports"],function(a,d){var b=function(){return function(){}}();return function(){function a(a,b,c,d,n){void 0===d&&(d=1);void 0===n&&(n=0);this.classConstructor=a;this.acquireFunctionOrWithConstructor=b;this.releaseFunction=c;this.growthSize=d;!0===b?this.acquireFunction=this._constructorAcquireFunction:"function"==typeof b&&(this.acquireFunction=b);this._pool=Array(n);
this._set=new Set;this._initialSize=n;for(a=0;n>a;a++)this._pool[a]=new this.classConstructor;this.growthSize=Math.max(d,1)}return a.prototype.acquire=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var d,c=this.classConstructor||b;if(0===this._pool.length)for(var h=this.growthSize,n=0;h>n;n++)this._pool[n]=new c;return d=this._pool.shift(),this.acquireFunction?this.acquireFunction.apply(this,[d].concat(a)):d&&d.acquire&&"function"==typeof d.acquire&&d.acquire.apply(d,a),this._set["delete"](d),
d},a.prototype.release=function(a){a&&!this._set.has(a)&&(this.releaseFunction?this.releaseFunction(a):a&&a.release&&"function"==typeof a.release&&a.release(),this._pool.push(a),this._set.add(a))},a.prototype.prune=function(){if(!(this._pool.length<=this._initialSize))for(var a;this._initialSize>this._pool.length;)a=this._pool.shift(),this._set["delete"](a),a.dispose&&"function"==typeof a.dispose&&a.dispose()},a.prototype._constructorAcquireFunction=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-
1]=arguments[c];(e=this.classConstructor).call.apply(e,[a].concat(b));var e},a}()})},"esri/layers/vectorTiles/views/2d/tiling/TileKey":function(){define(["require","exports","../../../core/ObjectPool"],function(a,d,b){return function(){function a(a,b,c,d){"string"==typeof a?(a=a.split("/"),b=a[1],c=a[2],d=a[3],this.level=+a[0],this.row=+b,this.col=+c,this.world=+d||0):a&&"object"==typeof a?(this.level=a.level||0,this.row=a.row||0,this.col=a.col||0,this.world=a.world||0):(this.level=+a||0,this.row=
+b||0,this.col=+c||0,this.world=+d||0)}return a.from=function(b,c,d,h){return a.pool.acquire(b,c,d,h)},a.getId=function(a,b,c,d){return"object"==typeof a?a.level+"/"+a.row+"/"+a.col+"/"+a.world:a+"/"+b+"/"+c+"/"+d},Object.defineProperty(a.prototype,"id",{get:function(){return a.getId(this)},enumerable:!0,configurable:!0}),a.prototype.equals=function(a){return this.level===a.level&&this.row===a.row&&this.col===a.col&&this.world===a.world},a.prototype.release=function(){this.world=this.col=this.row=
this.level=0},a.prototype.set=function(a,b,c,d){var e=typeof a;"object"===e?(this.level=a.level||0,this.row=a.row||0,this.col=a.col||0,this.world=a.world||0):"string"===e?(a=a.split("/"),b=a[1],c=a[2],d=a[3],this.level=parseFloat(a[0]),this.row=parseFloat(b),this.col=parseFloat(c),this.world=parseFloat(d)):(this.level=a,this.row=b,this.col=c,this.world=d);return this},a.prototype.toString=function(){return this.level+"/"+this.row+"/"+this.col+"/"+this.world},a.pool=new b(a,!0,null,25,50),a}()})},
"esri/layers/vectorTiles/views/vectorTiles/RenderBucket":function(){define(["require","exports","../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper"],function(a,d,b,c){Object.defineProperty(d,"__esModule",{value:!0});a=function(){return function(a){this.type=a}}();d.RenderBucket=a;c=function(a){function c(){var b=a.call(this,2)||this;return b.triangleElementStart=0,b.triangleElementCount=0,b.joinStart=0,b.joinCount=0,b}return b(c,a),c.prototype.hasData=function(){return 0<this.triangleElementCount||
0<this.joinCount},c}(a);d.LineRenderBucket=c;c=function(a){function c(){var b=a.call(this,1)||this;return b.triangleElementStart=0,b.triangleElementCount=0,b.outlineElementStart=0,b.outlineElementCount=0,b}return b(c,a),c.prototype.hasData=function(){return 0<this.triangleElementCount||0<this.outlineElementCount},c}(a);d.FillRenderBucket=c;c=function(a){function c(){var b=a.call(this,3)||this;return b.markerPerPageElementsMap=new Map,b.glyphPerPageElementsMap=new Map,b.isSDF=!1,b}return b(c,a),c.prototype.hasData=
function(){return 0<this.markerPerPageElementsMap.size||0<this.glyphPerPageElementsMap.size},c}(a);d.SymbolRenderBucket=c;a=function(a){function c(){return a.call(this,0)||this}return b(c,a),c.prototype.hasData=function(){return!0},c}(a);d.BackgroundRenderBucket=a})},"esri/layers/vectorTiles/views/vectorTiles/TileHandler":function(){define("require exports module dojo/Deferred dojo/promise/all dojo/has ../../core/workers ../../core/promiseUtils ../../core/requireUtils ../../core/LRUCache ../../request ../2d/tiling/TileKey ./TileIndex ./SpriteMosaic ./SpriteSource ./GlyphMosaic ./GlyphSource ./VectorTileDisplayObject ./GeometryUtils".split(" "),
function(a,d,b,c,e,f,g,h,n,k,m,q,l,p,u,t,r,v,w){var x=new k(10),y=new Map;return function(){function d(a,b,c,e,d){void 0===e&&(e=!1);this.devicePixelRatio=c;this.allowUpdates=e;this._tileIndex=this._connection=this._glyphMosaic=this._spriteMosaic=null;this._updateQueue=new Map;this._ongoingRequests=new Map;this._vectorTileLayer=a;this._styleRepository=a.styleRepository;this._requestUpdate=b}return d.prototype.destroy=function(){this.stop();this._vectorTileLayer=this._requestUpdate=this._styleRepository=
null;this._spriteMosaic&&(this._spriteMosaic.dispose(),this._spriteMosaic=null);this._glyphMosaic&&(this._glyphMosaic.dispose(),this._glyphMosaic=null)},Object.defineProperty(d.prototype,"initialized",{get:function(){return this._broadcastPromise&&this._broadcastPromise.isFulfilled()},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"spriteMosaic",{get:function(){return this._spriteMosaic},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"glyphMosaic",{get:function(){return this._glyphMosaic},
enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"ongoingRequestCount",{get:function(){return this._ongoingRequests.size},enumerable:!0,configurable:!0}),d.prototype.start=function(){var d=this;this.stop();var h=this._styleRepository,l=new u(h.sprite,this.devicePixelRatio);l.devicePixelRatio=this.devicePixelRatio;var k=l.load().then(function(){d._spriteMosaic=new p(1024,1024,250);d._spriteMosaic.setSpriteSource(l);f("stable-symbol-rendering")&&d._spriteMosaic.preloadSpriteItems()}),
m=new r(h.glyphs);this._glyphMosaic=new t(1024,1024,m);var q=this._fetchTileMap(this._vectorTileLayer.tileIndexUrl),w=g.open(this,n.getAbsMid("./WorkerTileHandler",a,b)).then(function(a){d._connection=a}),v=new c(function(a){k.isFulfilled()||k.cancel();q.isFulfilled()||q.cancel();w.isFulfilled()||w.cancel()});return e([k,q,w]).then(function(a){e(d._connection.broadcast("setLayers",h.styleJSON)).then(function(){v.resolve()})}),this._broadcastPromise=v.promise,this._broadcastPromise},d.prototype.stop=
function(){this._broadcastPromise&&!this._broadcastPromise.isFulfilled()&&this._broadcastPromise.cancel();this._updateQueue.forEach(function(a){return a.cancel()});this._ongoingRequests.forEach(function(a){return a.cancel()});this._connection&&(this._connection.close(),this._connection=null)},d.prototype.updateTile=function(a,b){var c=this;if(!this.allowUpdates)return h.resolve(null);if(!this._broadcastPromise.isFulfilled()||!this._connection)return h.reject(Error("no connection"));var e=Math.round(w.degToByte(b.state.rotation));
if(a.rotation===e)return h.resolve(null);var d,f=a.key;return this._updateQueue.has(f.id)&&(d=this._updateQueue.get(f.id),d.cancel("cancel")),a.rotation=e,d=this._connection.invoke("update",{key:a.id,rotation:e},[],{id:a.workerID}).then(function(b){return a.updateSymbolData(b),b}).always(function(){c._updateQueue["delete"](f.id)}),this._updateQueue.set(a.id,d),d},d.prototype.getVectorTileWithLRC=function(a,b,c,e){var d=this;void 0===e&&(e=0);a=new q(a,b,c,0);b=this.getRefKey(a);var f=new v(a,b,this._vectorTileLayer.tileInfo,
this._styleRepository,0);return this.getTileData(f.key,0).then(function(a){return f.setData(a.tileData,a.workerId,d._connection),f})},d.prototype.getTileData=function(a,b){var c=this;if(!this._broadcastPromise.isFulfilled()||!this._connection)return h.reject(Error("no connection"));var e=this._tileIndex?this._tileIndex.dataKey(a):a;if(!e)return h.reject(Error("no data"));var d=Math.round(w.degToByte(b));return this._getTileData(this._connection,a,e,d).then(function(a){return a&&a.tileData?{tileData:a.tileData,
workerId:a.workerId,connection:c._connection}:h.reject("No data")})},d.prototype.getRefKey=function(a){return this._tileIndex?this._tileIndex.dataKey(a):a},d.prototype.fetchTileData=function(a){a=q.pool.acquire(a);var b=this._vectorTileLayer.getTileUrl(a.level,a.row,a.col);return q.pool.release(a),m(b,{callbackParamName:"callback",responseType:"array-buffer"}).then(function(a){return{data:{protobuff:a.data},buffers:[a.data]}})},d.prototype.getSprites=function(a){return h.resolve({data:{spriteItems:this._spriteMosaic.getSpriteItems(a.sprites)}})},
d.prototype.getGlyphs=function(a){return this._glyphMosaic.getGlyphItems(a.tileID,a.font,a.codePoints).then(function(a){return{data:{glyphItems:a}}})},d.prototype.getStyleRepository=function(){return this._styleRepository},d.prototype.getTileIndex=function(){return this._tileIndex},d.prototype._getTileData=function(a,b,c,e){var d=this,f={id:null};return(a=this._ongoingRequests.get(b.id))?a:(a=this._connection.invoke("getTile",{key:b.id,refKey:c.id,rotation:e,cacheTile:this.allowUpdates},[],f).then(function(a){return d._ongoingRequests["delete"](b.id),
{tileData:a,workerId:f.id}}).otherwise(function(a){return d._ongoingRequests["delete"](b.id),d._connection.invoke("destructTileData",{key:b.id},[],f),h.reject(a)}),this._ongoingRequests.set(b.id,a),a)},d.prototype._fetchTileMap=function(a){var b=this;if(!a)return null;if(x.has(a))return this._tileIndex=x.use(a),h.resolve();if(y.has(a))return y.get(a);var c=m(a,{callbackParamName:"callback",responseType:"json"}).then(function(c){b._tileIndex=new l(c.data);y["delete"](a);x.insert(a,b._tileIndex)});
return y.set(a,c),c},d}()})},"esri/layers/vectorTiles/core/workers":function(){define(["require","exports","./workers/workers"],function(a,d,b){Object.defineProperty(d,"__esModule",{value:!0});for(var c in b)d.hasOwnProperty(c)||(d[c]=b[c])})},"esri/layers/vectorTiles/core/workers/workers":function(){define("require exports dojo/promise/all dojo/has ../promiseUtils ./Connection ./DedicatedConnection ./JobProxy".split(" "),function(a,d,b,c,e,f,g,h){function n(){if(y)return y;for(var a=[],c=function(b){var c=
h.create(x,b);a.push(c);c.then(function(a){r[b]=a})},e=0;p>e;e++)c(e);return y=b(a).then(function(){return!0})}function k(){if(z)return z;for(var a=[],c=function(b){var c=p+b;b=h.create(x,c);a.push(b);b.then(function(a){r[c]=a})},e=0;u>e;e++)c(e);return z=b(a).then(function(){return!0})}function m(a,c,e){var d=c.id;if(e)return r[c.workerId].openConnection(a,d);c=[];for(e=0;e<r.length;e++)c.push(r[e].openConnection(a,d));return b(c)}function q(a){var b=w++;a=new d.Connection(a,b);return x.set(b,a),
a}function l(a){var b=w++,c=p+t++;t%=u;a=new d.DedicatedConnection(a,b,c);return x.set(b,a),a}Object.defineProperty(d,"__esModule",{value:!0});d.Connection=f;d.DedicatedConnection=g;a=(navigator||{}).hardwareConcurrency||2;var p=c("esri-workers-debug")?1:Math.max(1,Math.ceil(a/2)),u=c("esri-workers-debug")?1:Math.max(1,Math.floor(a/2)),t=0,r=[],v=0,w=0,x=new Map;d.initialize=function(){n();k()};d.open=function(a,b,c){void 0===c&&(c=!1);return(c?k():n()).then(function(d){var f;return f=c?l(a):q(a),
m(b,f,c).then(function(){return f}).otherwise(function(a){return e.reject(a)})})};d.terminate=function(){for(var a=0;a<r.length;a++)r[a]&&r[a].terminate();r.length=0;x.clear()};d.closeConnection=function(a){if(a)if(x.has(a.id)&&x["delete"](a.id),a instanceof d.DedicatedConnection)r[a.workerId].closeConnection(a.id);else for(var b=0;p>b;b++)r[b]&&r[b].closeConnection(a.id)};d.invoke=function(a,b,c,e,d){var f=null;if(e&&(f=e.id),null===f)r.some(function(a,b){return p>b&&!a.hasOutgoingJobs()?(f=a.index,
!0):!1})||(f=v=(v+1)%p);a=r[f].invoke(a,b,c,d);return e&&(e.id=f),a};d.broadcast=function(a,b,c,e){for(var d=[],f=0;p>f;f++)d.push(r[f].invoke(a,b,c,e));return d};var y,z})},"esri/layers/vectorTiles/core/workers/Connection":function(){define(["require","exports","./workers"],function(a,d,b){return function(){function a(a,b){this.client=a;this.id=b}return a.prototype.invoke=function(a,c,d,h){return b.invoke(a,c,d,h,this.id)},a.prototype.broadcast=function(a,c,d){return b.broadcast(a,c,d,this.id)},
a.prototype.close=function(){b.closeConnection(this)},a}()})},"esri/layers/vectorTiles/core/workers/DedicatedConnection":function(){define(["require","exports","./workers"],function(a,d,b){return function(){function a(a,b,c){this.client=a;this.id=b;this._targetWorker={id:c}}return Object.defineProperty(a.prototype,"workerId",{get:function(){return this._targetWorker.id},enumerable:!0,configurable:!0}),a.prototype.invoke=function(a,c,d){return b.invoke(a,c,d,this._targetWorker,this.id)},a.prototype.close=
function(){b.closeConnection(this)},a}()})},"esri/layers/vectorTiles/core/workers/JobProxy":function(){define("require exports dojo/_base/kernel dojo/_base/lang dojo/Deferred ../../kernel ../../config ../../request ../Logger ../Error ../sniff ../urlUtils ./WorkerFallbackImpl".split(" "),function(a,d,b,c,e,f,g,h,n,k,m,q,l){function p(){if(!m("esri-workers"))return u(new l);if(!x){var a=void 0;try{a=new Worker(r)}catch(A){t.warn("Failed to create Worker. Fallback to execute module in main thread",event),
a=new l}return u(a)}return y||(y=h(r,{responseType:"text"})),y.then(function(a){return new Worker(URL.createObjectURL(new Blob([a.data],{type:"text/javascript"})))}).otherwise(function(a){return t.warn("Failed to create Worker. Fallback to execute module in main thread",a),new l}).then(function(a){return u(a)})}function u(a){function d(e){if(e&&e.data&&e.data.type)if(e=e.data.type,"\x3cworker-loaded\x3e"===e){e=a;var l;null!=g["default"]?(l=c.mixin({},g),delete l["default"],l=JSON.parse(JSON.stringify(l))):
l=JSON.parse(JSON.stringify(g));var k={async:!0,baseUrl:w,locale:b.locale,has:{},paths:{}};c.mixin(k,g.workers.loaderConfig);k.has=c.mixin({"esri-cors":1,"dojo-test-sniff":0,"config-deferredInstrumentation":0,"host-webworker":1,"events-keypress-typed":0},k.has);k.paths=c.mixin({esri:"../esri",dojo:"../dojo",dojox:"../dojox",dstore:"../dstore",moment:"../moment"},k.paths);e.postMessage({type:"\x3cconfigure\x3e",configure:{esriConfig:l,dojoConfig:k,loaderUrl:v}})}else"\x3cworker-configured\x3e"===e&&
(a.removeEventListener("message",d),a.removeEventListener("error",f),h.resolve(a))}function f(b){b.preventDefault();a.removeEventListener("message",d);a.removeEventListener("error",f);t.warn("Failed to create Worker. Fallback to execute module in main thread",b);a=new l;a.addEventListener("message",d);a.addEventListener("error",f)}var h=new e;return a.addEventListener("message",d),a.addEventListener("error",f),h.promise}var t=n.getLogger("esri.core.workers.JobProxy"),r=q.normalize(a.toUrl("./worker.js")),
v=q.makeAbsolute(a.toUrl("./worker-init.js")),w=q.makeAbsolute("../../../../../",v)+"/",x=!q.hasSameOrigin(r,location.href),y=null;return function(){function a(a,b,c){this.connections=a;this.index=b;this.worker=c;this.msgCount=0;this.outgoingJobs=new Map;this.incomingJobs=new Map;this.incomingStaticJobs=new Map;this.worker.addEventListener("message",this.message.bind(this));this.worker.addEventListener("error",function(a){a.preventDefault();t.error(a)})}return a.create=function(b,c){return p().then(function(e){return new a(b,
c,e)})},a.prototype.terminate=function(){this.worker.terminate()},a.prototype.openConnection=function(a,b){return this.invoke("\x3copen-connection\x3e",{path:a},void 0,b)},a.prototype.closeConnection=function(a){this.invoke("\x3cclose-connection\x3e",void 0,void 0,a)},a.prototype.hasOutgoingJobs=function(){return 0<this.outgoingJobs.size},a.prototype.invoke=function(a,b,c,d){var f=this,g=++this.msgCount,h=new e(function(a){f.worker.postMessage({type:"\x3ccancel\x3e",id:g,connection:d,data:{reason:a}});
f.outgoingJobs.has(g)&&f.outgoingJobs["delete"](g)});return this.outgoingJobs.set(g,h),this.worker.postMessage({type:a,id:g,connection:d,data:b},c),h.promise},a.prototype.message=function(a){var b=this;if(a&&a.data){var c=a.data.type;if(c){var e=a.data,d=a.data.id;if("\x3cresponse\x3e"===c&&d){if(a=this.outgoingJobs.get(d))this.outgoingJobs["delete"](d),e.error?a.reject(k.fromJSON(e.error)):a.resolve(e.data)}else if("\x3ccancel\x3e"===c&&d)a=this.incomingJobs.get(d),(a&&a.cancel(e.data.reason),e.staticMsg)&&
(a=this.incomingStaticJobs.get(d))&&a.cancel(e.data.reason);else if("\x3cstatic-message\x3e"===c){var g=e.staticMsg;a=f.workerMessages[g];if(!a||"function"!=typeof a)return void this.worker.postMessage({type:"\x3cstatic-message\x3e",staticMsg:g,id:d,error:g+" message type is not available on the kernel!"});e=a.call(this,e.data);this.incomingStaticJobs.set(d,e);e.then(function(a){b.worker.postMessage({type:"\x3cstatic-message\x3e",staticMsg:g,id:d,data:a.data},a.buffers)}).otherwise(function(a){a||
(a={message:"Error encountered at method"+g});a.dojoType&&"cancel"===a.dojoType||b.worker.postMessage({type:"\x3cstatic-message\x3e",staticMsg:g,id:d,error:a})}).always(function(){b.incomingStaticJobs["delete"](d)})}else{var h=e.connection;if(a=this.connections.get(h))if(a=a.client){var l=a[c];"function"==typeof l&&(e=l.call(a,e.data),this.incomingJobs.set(d,e),e.then(function(a){b.worker.postMessage({type:"\x3cresponse\x3e",id:d,connection:h,error:a.error,data:a.data},a.buffers)}).otherwise(function(a){a||
(a={message:"Error encountered at method"+c});a.dojoType&&"cancel"===a.dojoType||b.worker.postMessage({type:"\x3cresponse\x3e",id:d,connection:h,error:a})}).always(function(){b.incomingJobs["delete"](d)}))}}}}},a}()})},"esri/layers/vectorTiles/kernel":function(){define(["require","exports","esri/kernel","./identity/IdentityManager"],function(a,d,b,c){return function(){function a(){}return Object.defineProperty(a,"id",{get:function(){return b.id?c:null},enumerable:!0,configurable:!0}),a.workerMessages=
{},a}()})},"esri/layers/vectorTiles/identity/IdentityManager":function(){define(["require","exports","esri/IdentityManager"],function(a,d,b){Object.defineProperty(d,"__esModule",{value:!0});d.findCredential=function(a){return b.findCredential(a)}})},"esri/layers/vectorTiles/core/Logger":function(){define(["require","exports","dojo/has"],function(a,d,b){var c={info:0,warn:1,error:2};a=function(){function a(b){void 0===b&&(b={});this.module=b.module||"";this.writer=b.writer||null;this.level=b.level||
null;null!=b.enabled&&(this.enabled=!!b.enabled);a._loggers[this.module]=this;b=this.module.lastIndexOf(".");-1!==b&&(this.parent=a.getLogger(this.module.slice(0,b)))}return a.prototype.log=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];this._isEnabled()&&this._matchLevel(a)&&(c=this._inheritedWriter())&&c.apply(void 0,[a,this.module].concat(b))},a.prototype.error=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];this.log.apply(this,["error"].concat(a))},
a.prototype.warn=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];this.log.apply(this,["warn"].concat(a))},a.prototype.info=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];this.log.apply(this,["info"].concat(a))},a.prototype.getLogger=function(b){return a.getLogger(this.module+"."+b)},a.getLogger=function(b){var c=a._loggers[b];return c||(c=new a({module:b})),c},a.prototype._parentWithMember=function(a,b){for(var c=this;c&&null==c[a];)c=c.parent;return c?c[a]:
b},a.prototype._inheritedWriter=function(){return this._parentWithMember("writer",this._consoleWriter)},a.prototype._consoleWriter=function(a,b){for(var c=[],e=2;e<arguments.length;e++)c[e-2]=arguments[e];console[a].apply(console,["["+b+"]"].concat(c))},a.prototype._matchLevel=function(a){return c[this._parentWithMember("level","error")]<=c[a]},a.prototype._isEnabled=function(){return this._parentWithMember("enabled",!0)},a._loggers={},a}();d=a.getLogger("esri");return b("dojo-debug-messages")?d.level=
"info":d.level="warn",a})},"esri/layers/vectorTiles/core/sniff":function(){define(["dojo/_base/window","dojo/sniff","../kernel"],function(a,d,b){function c(){if(p)return p;p={available:!1,version:0,supportsHighPrecisionFragment:!1};var a,b=function(a,b){for(var c=["webgl","experimental-webgl","webkit-3d","moz-webgl"],e=null,d=0;d<c.length;++d){try{e=a.getContext(c[d],b)}catch(A){}if(e)break}return e};try{if(!l.WebGLRenderingContext)throw 0;a=document.createElement("canvas")}catch(v){return p}var c=
b(a,{failIfMajorPerformanceCaveat:!0});if(c||(c=b(a),c&&(p.majorPerformanceCaveat=!0)),!c)return p;a=c.getParameter(c.VERSION);if(!a)return p;if(a=a.match(/^WebGL\s+([\d.]*)/))p.version=parseFloat(a[1]),p.available=.94<=p.version,a=c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.HIGH_FLOAT),p.supportsHighPrecisionFragment=a&&0<a.precision,p.supportsVertexShaderSamplers=0<c.getParameter(c.MAX_VERTEX_TEXTURE_IMAGE_UNITS),p.supportsElementIndexUint=null!=c.getExtension("OES_element_index_uint");return p}
if(d("host-node"))return d;var e,f=d("ff"),g=d("ie"),h=void 0===g&&7<=d("trident"),n=d("webkit"),k=d("opera"),m=d("chrome"),q=d("safari"),l=a.global;a=navigator.userAgent;if(e=a.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+\_\d+)/i),e&&d.add("esri-iphone",parseFloat(e[2].replace("_","."))),e=a.match(/Android\s+(\d+\.\d+)/i),e&&d.add("esri-android",parseFloat(e[1])),e=a.match(/Fennec\/(\d+\.\d+)/i),e&&d.add("esri-fennec",parseFloat(e[1])),0<=a.indexOf("BlackBerry")&&0<=a.indexOf("WebKit")&&d.add("esri-blackberry",
1),d.add("esri-touch",d("esri-iphone")||d("esri-android")||d("esri-blackberry")||6<=d("esri-fennec")||(f||n)&&l.document&&l.document.createTouch?!0:!1),e=a.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i),e&&d.add("esri-mobile",e),d.add("esri-pointer",navigator.pointerEnabled||navigator.msPointerEnabled),b._getDOMAccessor=function(a){var b="";return f?b="Moz":n?b="Webkit":g?b="ms":k&&(b="O"),b+a.charAt(0).toUpperCase()+a.substr(1)},d.add("esri-phonegap",!!l.cordova),d.add("esri-cors",
d("esri-phonegap")||"XMLHttpRequest"in l&&"withCredentials"in new XMLHttpRequest),d.add("esri-canvas-svg-support",function(){return!(d("trident")||d("ie"))}),d.add("esri-wasm","WebAssembly"in l),d("host-webworker"))return d;d.add("esri-workers","Worker"in l);d.add("esri-script-sandbox",function(){return"MessageChannel"in l&&"HTMLIFrameElement"in l&&"sandbox"in HTMLIFrameElement.prototype});d.add("esri-transforms",h||9<=g||3.5<=f||4<=m||3.1<=q||10.5<=k||3.2<=d("esri-iphone")||2.1<=d("esri-android"));
d.add("esri-transitions",h||10<=g||4<=f||4<=m||3.1<=q||10.5<=k||3.2<=d("esri-iphone")||2.1<=d("esri-android"));d.add("esri-transforms3d",h||10<=f||12<=m||4<=q||3.2<=d("esri-iphone")||3<=d("esri-android"));d.add("esri-url-encodes-apostrophe",function(){var a=l.document.createElement("a");return a.href="?'",-1<a.href.indexOf("?%27")});3>d("esri-android")&&(d.add("esri-transforms",!1,!1,!0),d.add("esri-transitions",!1,!1,!0),d.add("esri-transforms3d",!1,!1,!0));b._css=function(a){var b=d("esri-transforms3d");
void 0!==a&&null!==a?b=a:b&&(m||q&&!d("esri-iphone"))&&(b=!1);var c=b?"translate3d(":"translate(",e=b?m?",-1px)":",0px)":")",h=b?"scale3d(":"scale(",l=b?",1)":")",p=b?"rotate3d(0,0,1,":"rotate(",u=b?"matrix3d(":"matrix(",A=b?",0,0,":",",B=b?",0,0,0,0,1,0,":",",H=b?",0,1)":")";return{names:{transition:n&&"-webkit-transition"||f&&"MozTransition"||k&&"OTransition"||g&&"msTransition"||"transition",transform:n&&"-webkit-transform"||f&&"MozTransform"||k&&"OTransform"||g&&"msTransform"||"transform",transformName:n&&
"-webkit-transform"||f&&"-moz-transform"||k&&"-o-transform"||g&&"-ms-transform"||"transform",origin:n&&"-webkit-transform-origin"||f&&"MozTransformOrigin"||k&&"OTransformOrigin"||g&&"msTransformOrigin"||"transformOrigin",endEvent:n&&"webkitTransitionEnd"||f&&"transitionend"||k&&"oTransitionEnd"||g&&"MSTransitionEnd"||"transitionend"},translate:function(a,b){return c+a+"px,"+b+"px"+e},scale:function(a){return h+a+","+a+l},rotate:function(a){return p+a+"deg)"},matrix:function(a){return a.m?(a=a.m,u+
a[0].toFixed(10)+","+a[1].toFixed(10)+A+a[2].toFixed(10)+","+a[3].toFixed(10)+B+a[4].toFixed(10)+(f?"px,":",")+a[5].toFixed(10)+(f?"px":"")+H):u+a.xx.toFixed(10)+","+a.yx.toFixed(10)+A+a.xy.toFixed(10)+","+a.yy.toFixed(10)+B+a.dx.toFixed(10)+(f?"px,":",")+a.dy.toFixed(10)+(f?"px":"")+H},matrix3d:function(a){return a=a.m,"matrix3d("+a[0].toFixed(10)+","+a[1].toFixed(10)+",0,0,"+a[2].toFixed(10)+","+a[3].toFixed(10)+",0,0,0,0,1,0,"+a[4].toFixed(10)+","+a[5].toFixed(10)+",0,1)"},getScaleFromMatrix:function(a){if(!a)return 1;
a=a.toLowerCase();var b=-1<a.indexOf("matrix3d")?"matrix3d(":"matrix(";return Number(a.substring(b.length,a.indexOf(",")))}}};var p;return d.add("esri-webgl",function(){return!!c().available}),d.add("esri-webgl-high-precision-fragment",function(){return!!c().supportsHighPrecisionFragment}),d.add("esri-webgl-vertex-shader-samplers",function(){return!!c().supportsVertexShaderSamplers}),d.add("esri-webgl-element-index-uint",function(){return!!c().supportsElementIndexUint}),d.add("esri-webgl-major-performance-caveat",
function(){return!!c().majorPerformanceCaveat}),d})},"esri/layers/vectorTiles/core/workers/WorkerFallbackImpl":function(){define(["require","exports","../global"],function(a,d,b){var c=function(){return function(){var a=this,b=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(function(c){a[c]=function(){for(var a=[],e=0;e<arguments.length;e++)a[e]=arguments[e];return b[c].apply(b,a)}})}}(),e=b.MutationObserver||b.WebKitMutationObserver,f=function(){var a;
if(b.process&&b.process.nextTick)a=function(a){b.process.nextTick(a)};else if(b.Promise)a=function(a){b.Promise.resolve().then(a)};else if(e){var c=[],d=document.createElement("div");(new e(function(){for(;0<c.length;)c.shift()()})).observe(d,{attributes:!0});a=function(a){c.push(a);d.setAttribute("queueStatus","1")}}return a}();return function(){function b(){this._dispatcher=new c;this._connections={};this._outgoingStaticMessages={};this._isInitialized=!1;this._workerPostMessage({type:"\x3cworker-loaded\x3e"})}
return b.prototype.terminate=function(){this._connections={}},Object.defineProperty(b.prototype,"onmessage",{get:function(){return this._onmessageHandler},set:function(a){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler);(this._onmessageHandler=a)&&this.addEventListener("message",a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"onerror",{get:function(){return this._onerrorHandler},set:function(a){this._onerrorHandler&&this.removeEventListener("error",
this._onerrorHandler);(this._onerrorHandler=a)&&this.addEventListener("error",a)},enumerable:!0,configurable:!0}),b.prototype.postMessage=function(a,b){var c=this;f(function(){c._workerMessageHandler(new MessageEvent("message",{data:a}))})},b.prototype.dispatchEvent=function(a){return this._dispatcher.dispatchEvent(a)},b.prototype.addEventListener=function(a,b,c){this._dispatcher.addEventListener(a,b,c)},b.prototype.removeEventListener=function(a,b,c){this._dispatcher.removeEventListener(a,b,c)},
b.prototype._workerPostMessage=function(a,b){var c=this;f(function(){c.dispatchEvent(new MessageEvent("message",{data:a}))})},b.prototype._workerMessageHandler=function(b){var c=this,e=b.data;if(e){var d=e.connection,f=e.type;if("\x3cconfigure\x3e"===f)this._isInitialized||this._workerPostMessage({type:"\x3cworker-configured\x3e"});else if("\x3copen-connection\x3e"===f){b=e.data.path;var g=e.id;if(this._connections[d])return void this._workerPostMessage({type:"\x3cresponse\x3e",id:g,connection:d});
a(["./WorkerConnection",b],function(a,b){c._connections[d]=new a(b,{postMessage:function(a,b){return c._workerPostMessage(a,b)}},d);c._workerPostMessage({type:"\x3cresponse\x3e",id:g,data:{connection:d},error:void 0})})}else"\x3cclose-connection\x3e"===f?this._connections[d]&&delete this._connections[d]:"\x3cstatic-message\x3e"===f?(b=e.id,this._outgoingStaticMessages[b]&&(f=this._outgoingStaticMessages[b],delete this._outgoingStaticMessages[b],e.error?f.reject(e.error):f.resolve(e.data))):f&&(e=
this._connections[d])&&e.proxy.message(b)}},b}()})},"esri/layers/vectorTiles/core/requireUtils":function(){define(["require","exports","dojo/Deferred"],function(a,d,b){function c(a,d){if(Array.isArray(d)){var e=new b;return a(d,function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];e.resolve(a)}),e.promise}return c(a,[d]).then(function(a){return a[0]})}Object.defineProperty(d,"__esModule",{value:!0});d.when=c;d.getAbsMid=function(a,b,c){return b.toAbsMid?b.toAbsMid(a):c.id.replace(/\/[^\/]*$/gi,
"/")+a}})},"esri/layers/vectorTiles/core/LRUCache":function(){define(["require","exports"],function(a,d){return function(){function a(a){if(this._cache={},this._lruQueue=[],0>=a)throw Error("LRU cache size must be bigger than zero!");this._maxSize=a}return a.prototype.has=function(a){return void 0!==this._cache[a]},a.prototype.insert=function(a,b){return null!==this.use(a)?void(this._cache[a]=b):(this._collect(),this._cache[a]=b,void this._lruQueue.unshift(a))},a.prototype.use=function(a){var b=this._cache[a];
return b?(this._lruQueue.splice(this._lruQueue.indexOf(a),1),this._lruQueue.unshift(a),b):null},a.prototype.print=function(){for(var a=0,b=this._lruQueue;a<b.length;a++){var d=b[a];console.log("key: "+d+", value: "+this._cache[d])}},a.prototype._collect=function(){if(!(this._lruQueue.length<this._maxSize)){var a=this._lruQueue.pop(),b=this._cache[a];b&&b.release&&b.release();delete this._cache[a]}},a}()})},"esri/layers/vectorTiles/views/vectorTiles/TileIndex":function(){define(["require","exports",
"../2d/tiling/TileKey"],function(a,d,b){return function(){function a(a){if(!("index"in a))throw Error("The tilemap is missing the 'index' property.");this._tilemap=a.index}return a.prototype.dataKey=function(a){var c=[a];if(0>a.level||0>a.row||0>a.col||0<a.row>>a.level||0<a.col>>a.level)return null;for(;0!==a.level;)a=new b(a.level-1,a.row>>1,a.col>>1,a.world),c.push(a);var e,d=this._tilemap,n=c.pop();if(1===d)return n;for(;c.length;){a=c.pop();e=n.level+1;var k=2*n.row,m=2*n.col;if(e=[b.getId(e,
k,m,a.world),b.getId(e,k,m+1,a.world),b.getId(e,k+1,m,a.world),b.getId(e,k+1,m+1,a.world)].indexOf(a.id),d){if(0===d[e]){n=null;break}if(1===d[e]){n=a;break}n=a;d=d[e]}}return n},a.prototype.forEach=function(a,b,c,d,n){this._callback=n;this._maxLevel=b+a;this._forEach(this._tilemap,b,c,d)},a.prototype._forEach=function(a,b,c,d){0!==a&&(this._callback(b,c,d),b!==this._maxLevel&&"object"==typeof a&&(this._forEach(a[0],b+1,2*c,2*d),this._forEach(a[1],b+1,2*c,2*d+1),this._forEach(a[2],b+1,2*c+1,2*d),
this._forEach(a[3],b+1,2*c+1,2*d+1)))},a}()})},"esri/layers/vectorTiles/views/vectorTiles/SpriteMosaic":function(){define("require exports ../webgl/Texture ../2d/engine/webgl/Geometry ./Rect ./GeometryUtils ./RectangleBinPack".split(" "),function(a,d,b,c,e,f,g){function h(a){return a-Math.floor(a)}function n(a,b,c){a=0>a?0:.9999991<a?.9999991:a;var e=h(a*k[0]),d=h(a*k[1]),f=h(a*k[2]);a=h(a*k[3]);b[c+0]=256*(e-e*m[0]);b[c+1]=256*(d-e*m[1]);b[c+2]=256*(f-d*m[2]);b[c+3]=256*(a-f*m[3])}var k=[16777216,
65536,256,1],m=[0,1/256,1/256,1/256];return function(){function a(a,b,c){void 0===c&&(c=0);this._size=[];this._mosaicsData=[];this._textures=[];this._dirties=[];this._pageHeight=this._pageWidth=this._currentPage=this._maxItemSize=0;this._mosaicRects={};this.pixelRatio=1;(0>=a||0>=b)&&console.error("Sprites mosaic defaultWidth and defaultHeight must be greater than zero!");this._pageWidth=a;this._pageHeight=b;0<c&&(this._maxItemSize=c);this._binPack=new g(a-4,b-4)}return a.prototype.getWidth=function(a){return a>=
this._size.length?-1:this._size[a][0]},a.prototype.getHeight=function(a){return a>=this._size.length?-1:this._size[a][1]},a.prototype.setSpriteSource=function(a){if(this.dispose(),this.pixelRatio=a.devicePixelRatio,0===this._mosaicsData.length){this._binPack=new g(this._pageWidth-4,this._pageHeight-4);var b=new Uint32Array(Math.floor(this._pageWidth)*Math.floor(this._pageHeight));this._mosaicsData[0]=b;this._dirties.push(!0);this._size.push([this._pageWidth,this._pageHeight]);this._textures.push(void 0)}this._sprites=
a},a.prototype.getSpriteItem=function(a,b){void 0===b&&(b=!1);var c=this._mosaicRects[a];if(c)return c;if(!this._sprites||"loaded"!==this._sprites.loadStatus)return null;var e=this._sprites.getSpriteInfo(a);if(!e||!e.width||!e.height||0>e.width||0>e.height)return null;var d,f,g=e.width,h=e.height,l=1;if(e.cim){l=this._buildSDF(e.cim);d=l[0];f=l[1];var k=l[2],m=l[3],n=l[4],l=l[5];if(!d||0>=m||0>=n)return null;var p=this._allocateImage(f,k),n=p[0],m=p[1],p=p[2];if(0>=n.width)return null;(e.cim||e.sdf)&&
this._clearRect(n,m,p,1);this._copy(n,{width:f,height:k,x:0,y:0},m,p,b,d);n.x+=4;n.y+=4;n.width-=8;n.height-=8;d=n;f=m;l*=.75;l=k/h;e.sdf=!0}else{k=this._allocateImage(g,h);n=k[0];m=k[1];p=k[2];if(0>=n.width)return null;this._copy(n,e,m,p,b);d=n;f=m}return c={rect:d,width:g,height:h,sdf:e.sdf,pixelRatio:e.pixelRatio,page:f,sdfRatio:l},this._mosaicRects[a]=c,c},a.prototype.preloadSpriteItems=function(){for(var a=0,b=this._sprites.spriteNames;a<b.length;a++)this.getSpriteItem(b[a],!0)},a.prototype.getSpriteItems=
function(a){for(var b={},c=0;c<a.length;c++){var e=a[c];b[e]=this.getSpriteItem(e)}return b},a.prototype.getMosaicItemPosition=function(a,b){var c=this.getSpriteItem(a,b),e=c&&c.rect;if(!e)return null;e.width=c.width;e.height=c.height;return{size:[c.width,c.height],tl:[(e.x+2)/this._size[c.page][0],(e.y+2)/this._size[c.page][1]],br:[(e.x+2+c.width)/this._size[c.page][0],(e.y+2+c.height)/this._size[c.page][1]],page:c.page}},a.prototype.bind=function(a,c,e,d){void 0===e&&(e=0);void 0===d&&(d=0);this._textures[e]||
(this._textures[e]=new b(a,{pixelFormat:6408,dataType:5121,width:this._size[e][0],height:this._size[e][1]},new Uint8Array(this._mosaicsData[e].buffer)));var f=this._textures[e];f.setSamplingMode(c);this._dirties[e]&&f.setData(new Uint8Array(this._mosaicsData[e].buffer));a.bindTexture(f,d);this._dirties[e]=!1},a._copyBits=function(a,b,c,e,d,f,g,h,k,m,n){var l=e*b+c;g=h*f+g;if(n)for(g-=f,n=-1;m>=n;n++,l=((n+m)%m+e)*b+c,g+=f)for(h=-1;k>=h;h++)d[g+h]=a[l+(h+k)%k];else for(n=0;m>n;n++){for(h=0;k>h;h++)d[g+
h]=a[l+h];l+=b;g+=f}},a.prototype._copy=function(b,c,e,d,f,g){if(this._sprites&&"loaded"===this._sprites.loadStatus&&!(e>=this._mosaicsData.length)){var h=new Uint32Array(g?g.buffer:this._sprites.image.buffer),l=this._mosaicsData[e];l&&h||console.error("Source or target images are uninitialized!");a._copyBits(h,g?c.width:this._sprites.width,c.x,c.y,l,d[0],b.x+2,b.y+2,c.width,c.height,f);this._dirties[e]=!0}},a.prototype._allocateImage=function(a,b){a+=2;b+=2;var c=Math.max(a,b);if(this._maxItemSize&&
this._maxItemSize<c){var c=Math.pow(2,Math.ceil(f.log2(a))),d=Math.pow(2,Math.ceil(f.log2(b))),h=new e(0,0,a,b);return this._mosaicsData.push(new Uint32Array(c*d)),this._dirties.push(!0),this._size.push([c,d]),this._textures.push(void 0),[h,this._mosaicsData.length-1,[c,d]]}c=a%4?4-a%4:4;d=b%4?4-b%4:4;1===c&&(c=5);1===d&&(d=5);c=this._binPack.allocate(a+c,b+d);return 0>=c.width?(this._dirties[this._currentPage]||(this._mosaicsData[this._currentPage]=null),this._currentPage=this._mosaicsData.length,
this._mosaicsData.push(new Uint32Array(this._pageWidth*this._pageHeight)),this._dirties.push(!0),this._size.push([this._pageWidth,this._pageHeight]),this._textures.push(void 0),this._binPack=new g(this._pageWidth-4,this._pageHeight-4),this._allocateImage(a,b)):[c,this._currentPage,[this._pageWidth,this._pageHeight]]},a.prototype._clearRect=function(a,b,c,e){(b=this._mosaicsData[b])||console.error("Source image is uninitialized!");var d=[0,0,0,0];n(e,d,0);e=255&d[0]|(255&d[1])<<8|(255&d[2])<<16|d[3]<<
24;c=c[0];var d=a.y*c+a.x,f=a.width;a=a.height;for(var g=0;a>g;g++){for(var h=0;f>h;h++)b[d+h]=e;d+=c}},a.prototype.dispose=function(){this._binPack=null;this._mosaicRects={};for(var a=0,b=this._textures;a<b.length;a++){var c=b[a];c&&c.dispose()}this._textures.length=0},a.prototype._extractGeometry=function(a){if(!a)return null;a=a.symbolLayers;if(!a||1!==a.length)return null;a=a[0];if(!a)return null;a=a.markerGraphics;if(!a||1!==a.length)return null;a=a[0];if(!a)return null;var b=a.geometry;if(!b||
!b.rings)return null;a=[];for(var e=0,b=b.rings;e<b.length;e++){for(var d=[],f=0,g=b[e];f<g.length;f++){var h=g[f];d.push(new c.Point(h[0],h[1]))}a.push(d)}return a},a.prototype._getEnvelope=function(a){for(var b=1/0,c=-(1/0),d=1/0,f=-(1/0),g=0;g<a.length;g++)for(var h=0,k=a[g];h<k.length;h++){var l=k[h];l.x<b&&(b=l.x);l.x>c&&(c=l.x);l.y<d&&(d=l.y);l.y>f&&(f=l.y)}return new e(b,d,c-b,f-d)},a.prototype._buildSDF=function(a){a=this._extractGeometry(a);if(!a)return null;var b=this._getEnvelope(a);if(0>=
b.width||0>=b.height)return null;for(var c=86/Math.max(b.width,b.height),e=Math.round(b.width*c),d=Math.round(b.height*c),f=e+32,g=d+32,h=0;h<a.length;h++)for(var k=0,l=a[h];k<l.length;k++){var m=l[k];m.x-=b.x;m.y-=b.y;m.x*=c;m.y*=c;m.x+=15.5;m.y+=15.5}b=this._dist_map(a,f,g,16);return this._sign_dist_map(a,f,g,16,b),[this._encodeDistMap(b),f,g,e,d,c]},a.prototype._dist_map=function(a,b,c,e){for(var d=b*c,f=new Float32Array(d),g=e*e+1,h=0;d>h;++h)f[h]=g;for(g=0;g<a.length;g++)for(var k=a[g],l=k.length,
h=1;l>h;++h){var m=k[h-1],n=k[h],q=void 0,p=void 0;m.x<n.x?(q=m.x,p=n.x):(q=n.x,p=m.x);var t=void 0,u=void 0;m.y<n.y?(t=m.y,u=n.y):(t=n.y,u=m.y);var D=Math.floor(q)-e,p=Math.floor(p)+e,t=Math.floor(t)-e,u=Math.floor(u)+e;0>D&&(D=0);p>b&&(p=b);0>t&&(t=0);u>c&&(u=c);for(var q=n.x-m.x,E=n.y-m.y,I=q*q+E*E;p>D;D++)for(var F=t;u>F;F++){var C=(D-m.x)*q+(F-m.y)*E,G=void 0,N=void 0;0>C?(G=m.x,N=m.y):C>I?(G=n.x,N=n.y):(C/=I,G=m.x+C*q,N=m.y+C*E);C=(D-G)*(D-G)+(F-N)*(F-N);G=(c-F-1)*b+D;C<f[G]&&(f[G]=C)}}for(h=
0;d>h;++h)f[h]=Math.sqrt(f[h]);return f},a.prototype._sign_dist_map=function(a,b,c,e,d){for(var f=0;f<a.length;f++)for(var g=a[f],h=g.length,k=1;h>k;++k){var m=g[k-1],l=g[k],n=void 0,q=void 0;m.x<l.x?(n=m.x,q=l.x):(n=l.x,q=m.x);var p=void 0,t=void 0;m.y<l.y?(p=m.y,t=l.y):(p=l.y,t=m.y);n=Math.floor(n);q=Math.floor(q)+1;p=Math.floor(p);t=Math.floor(t)+1;e>n&&(n=e);q>b-e&&(q=b-e);e>p&&(p=e);for(t>c-e&&(t=c-e);t>p;++p)if(m.y>p!=l.y>p){for(var u=(c-p-1)*b,r=n;q>r;++r)r<(l.x-m.x)*(p-m.y)/(l.y-m.y)+m.x&&
(d[u+r]=-d[u+r]);for(r=e;n>r;++r)d[u+r]=-d[u+r]}}},a.prototype._encodeDistMap=function(a){for(var b=a.length,c=new Uint8Array(4*b),e=0;b>e;++e)n(a[e]/16+.5,c,4*e);return c},a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/Geometry":function(){define(["require","exports"],function(a,d){Object.defineProperty(d,"__esModule",{value:!0});var b=function(){function a(a,b){this.x=a;this.y=b}return a.prototype.clone=function(){return new a(this.x,this.y)},a.prototype.equals=function(a,b){return a===
this.x&&b===this.y},a.prototype.isEqual=function(a){return a.x===this.x&&a.y===this.y},a.prototype.setCoords=function(a,b){this.x=a;this.y=b},a.prototype.normalize=function(){var a=this.x,b=this.y,a=Math.sqrt(a*a+b*b);this.x/=a;this.y/=a},a.prototype.rightPerpendicular=function(){var a=this.x;this.x=this.y;this.y=-a},a.prototype.move=function(a,b){this.x+=a;this.y+=b},a.prototype.assign=function(a){this.x=a.x;this.y=a.y},a.prototype.assignAdd=function(a,b){this.x=a.x+b.x;this.y=a.y+b.y},a.prototype.assignSub=
function(a,b){this.x=a.x-b.x;this.y=a.y-b.y},a.prototype.rotate=function(a,b){var c=this.x,e=this.y;this.x=c*a-e*b;this.y=c*b+e*a},a.prototype.scale=function(a){this.x*=a;this.y*=a},a.prototype.length=function(){var a=this.x,b=this.y;return Math.sqrt(a*a+b*b)},a.distance=function(a,b){var c=b.x-a.x,d=b.y-a.y;return Math.sqrt(c*c+d*d)},a.add=function(b,c){return new a(b.x+c.x,b.y+c.y)},a.sub=function(b,c){return new a(b.x-c.x,b.y-c.y)},a}();d.Point=b})},"esri/layers/vectorTiles/views/vectorTiles/Rect":function(){define(["require",
"exports"],function(a,d){return function(){function a(a,b,d,g){void 0===a&&(a=0);void 0===b&&(b=0);void 0===d&&(d=0);void 0===g&&(g=0);this.x=a;this.y=b;this.width=d;this.height=g}return Object.defineProperty(a.prototype,"isEmpty",{get:function(){return 0>=this.width||0>=this.height},enumerable:!0,configurable:!0}),a}()})},"esri/layers/vectorTiles/views/vectorTiles/RectangleBinPack":function(){define(["require","exports","./Rect"],function(a,d,b){return function(){function a(a,c){this._height=this._width=
0;this._free=[];this._width=a;this._height=c;this._free.push(new b(0,0,a,c))}return Object.defineProperty(a.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),a.prototype.allocate=function(a,c){if(a>this._width||c>this._height)return new b;for(var d=null,e=-1,f=0;f<this._free.length;++f){var k=this._free[f];a<=k.width&&c<=k.height&&(null===d||k.y<=d.y&&
k.x<=d.x)&&(d=k,e=f)}return null===d?new b:(this._free.splice(e,1),d.width<d.height?(d.width>a&&this._free.push(new b(d.x+a,d.y,d.width-a,c)),d.height>c&&this._free.push(new b(d.x,d.y+c,d.width,d.height-c))):(d.width>a&&this._free.push(new b(d.x+a,d.y,d.width-a,d.height)),d.height>c&&this._free.push(new b(d.x,d.y+c,a,d.height-c))),new b(d.x,d.y,a,c))},a.prototype.release=function(a){for(var b=0;b<this._free.length;++b){var c=this._free[b];if(c.y===a.y&&c.height===a.height&&c.x+c.width===a.x)c.width+=
a.width;else if(c.x===a.x&&c.width===a.width&&c.y+c.height===a.y)c.height+=a.height;else if(a.y===c.y&&a.height===c.height&&a.x+a.width===c.x)c.x=a.x,c.width+=a.width;else{if(a.x!==c.x||a.width!==c.width||a.y+a.height!==c.y)continue;c.y=a.y;c.height+=a.height}this._free.splice(b,1);this.release(a)}this._free.push(a)},a}()})},"esri/layers/vectorTiles/views/vectorTiles/SpriteSource":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper dojo/Deferred ../../request ../../kernel ../../core/promiseUtils".split(" "),
function(a,d,b,c,e,f,g,h){return function(){function a(a,b){this.baseURL=a;this.devicePixelRatio=b;this._isRetina=!1;this._spritesData={};this.height=this.width=this.image=null;this.loadStatus="not-loaded"}return Object.defineProperty(a.prototype,"spriteNames",{get:function(){var a=[],b;for(b in this._spritesData)a.push(b);return a.sort(),a},enumerable:!0,configurable:!0}),a.prototype.getSpriteInfo=function(a){return this._spritesData[a]},a.prototype.load=function(){var a=this;return this.loadStatus=
"loading",this.baseURL?this._loadSprites().then(function(){return a.loadStatus="loaded",a}).otherwise(function(b){return a.loadStatus="failed",a}):h.resolve(this)},a.prototype._loadSprites=function(){var a=this;this._isRetina=1.15<this.devicePixelRatio?!0:!1;var b=this.baseURL,c=this._isRetina?"@2x":"";return f(b+c+".json",{callbackParamName:"callback",responseType:"json"}).then(function(d){var f=Object.keys(d.data);if(0===f.length||1===f.length&&"_ssl"===f[0])return h.resolve(null);a._spritesData=
d.data;var m=new e,k=new Image;k.crossOrigin="anonymous";k.onload=function(){k.onload=null;a.width=k.width;a.height=k.height;var b=document.createElement("canvas");b.width=k.width;b.height=k.height;b=b.getContext("2d");b.drawImage(k,0,0,k.width,k.height);for(var b=b.getImageData(0,0,k.width,k.height),c=new Uint8Array(b.data),d=0;d<c.length;d+=4)b=c[d+3]/255,c[d]*=b,c[d+1]*=b,c[d+2]*=b;a.image=c;m.resolve()};d=""+b+c+".png";g.id&&(f=g.id.findCredential(d))&&f.token&&(d+="?token\x3d"+f.token);return k.src=
d,m})},a}()})},"esri/layers/vectorTiles/views/vectorTiles/GlyphMosaic":function(){define("require exports dojo/has ../../core/promiseUtils ./Rect ../webgl/Texture ./RectangleBinPack".split(" "),function(a,d,b,c,e,f,g){var h;b("stable-symbol-rendering")&&(h=new Set);return function(){function a(a,b,c){this.height=this.width=0;this._dirties=[];this._glyphData=[];this._currentPage=0;this._glyphIndex={};this._textures=[];this._rangePromises=new Map;(0>=a||0>=b)&&console.error("Glyph mosaic width and height must be greater than zero!");
this.width=a;this.height=b;this._glyphSource=c;this._binPack=new g(a-4,b-4);this._glyphData.push(new Uint8Array(a*b));this._dirties.push(!0);this._textures.push(void 0)}return a.prototype.getGlyphItems=function(a,d,f){var k=this,m=[],n=this._glyphSource,q=new Set;a=1/256;for(var r=0;r<f.length;r++)q.add(Math.floor(f[r]*a));var v=[];return q.forEach(function(a){if(256>=a){var b=d+a;k._rangePromises.has(b)?v.push(k._rangePromises.get(b)):(a=n.getRange(d,a).always(function(){k._rangePromises["delete"](b)}),
k._rangePromises.set(b,a),v.push(a))}}),c.all(v).then(function(a){(a=k._glyphIndex[d])||(a={},k._glyphIndex[d]=a);var c;if(b("stable-symbol-rendering")){h.clear();for(var l=0;l<f.length;l++)c=f[l],h.add(c);var p=[];q.forEach(function(a){p.push(a)});p.sort();c=[];for(l=0;l<p.length;l++)for(var t=p[l],r=0;256>r;++r)c.push(256*t+r)}else c=f;l=0;for(t=c;l<t.length;l++)if(c=t[l],r=a[c])b("stable-symbol-rendering")&&!h.has(c)||(m[c]={rect:r.rect,metrics:r.metrics,page:r.page});else{var u=n.getGlyph(d,c);
if(u&&u.metrics){var r=u.metrics,v=void 0;if(0===r.width)v=new e(0,0,0,0);else{var w=r.width+6,K=r.height+6,D=w%4?4-w%4:4,E=K%4?4-K%4:4;1===D&&(D=5);1===E&&(E=5);v=k._binPack.allocate(w+D,K+E);v.isEmpty&&(k._dirties[k._currentPage]||(k._glyphData[k._currentPage]=null),k._currentPage=k._glyphData.length,k._glyphData.push(new Uint8Array(k.width*k.height)),k._dirties.push(!0),k._textures.push(void 0),k._binPack=new g(k.width-4,k.height-4),v=k._binPack.allocate(w+D,K+E));var D=k._glyphData[k._currentPage],
u=u.bitmap,I=E=void 0;if(u)for(var F=0;K>F;F++)for(var E=w*F,I=k.width*(v.y+F+1)+v.x,C=0;w>C;C++)D[I+C+1]=u[E+C]}a[c]={rect:v,metrics:r,tileIDs:null,page:k._currentPage};b("stable-symbol-rendering")&&!h.has(c)||(m[c]={rect:v,metrics:r,page:k._currentPage});k._dirties[k._currentPage]=!0}}return m})},a.prototype.removeGlyphs=function(a){for(var b in this._glyphIndex){var c=this._glyphIndex[b];if(c){var d=void 0,e;for(e in c)if(d=c[e],d.tileIDs["delete"](a),0===d.tileIDs.size){for(var f=this._glyphData[d.page],
g=d.rect,h=void 0,k=void 0,n=0;n<g.height;n++)for(h=this.width*(g.y+n)+g.x,k=0;k<g.width;k++)f[h+k]=0;delete c[e];this._dirties[d.page]=!0}}}},a.prototype.bind=function(a,b,c,d){void 0===d&&(d=0);this._textures[c]||(this._textures[c]=new f(a,{pixelFormat:6406,dataType:5121,width:this.width,height:this.height},new Uint8Array(this.width*this.height)));var e=this._textures[c];e.setSamplingMode(b);this._dirties[c]&&e.setData(this._glyphData[c]);a.bindTexture(e,d);this._dirties[c]=!1},a.prototype.dispose=
function(){this._binPack=null;for(var a=0,b=this._textures;a<b.length;a++){var c=b[a];c&&c.dispose()}this._textures.length=0},a}()})},"esri/layers/vectorTiles/views/vectorTiles/GlyphSource":function(){define(["require","exports","../../core/promiseUtils","../../request","../../core/pbf"],function(a,d,b,c,e){var f=function(){function a(a){if(this._metrics=[],this._bitmaps=[],a)for(;a.next();)switch(a.tag()){case 1:for(var b=a.getMessage();b.next();)switch(b.tag()){case 3:for(var c=b.getMessage(),d=
void 0,e=void 0,f=void 0,g=void 0,h=void 0,n=void 0,v=void 0;c.next();)switch(c.tag()){case 1:d=c.getUInt32();break;case 2:e=c.getBytes();break;case 3:f=c.getUInt32();break;case 4:g=c.getUInt32();break;case 5:h=c.getSInt32();break;case 6:n=c.getSInt32();break;case 7:v=c.getUInt32();break;default:c.skip()}d&&(this._metrics[d]={width:f,height:g,left:h,top:n,advance:v},this._bitmaps[d]=e);break;default:b.skip()}break;default:a.skip()}}return a.prototype.getMetrics=function(a){return this._metrics[a]},
a.prototype.getBitmap=function(a){return this._bitmaps[a]},a}(),g=function(){function a(){this._ranges=[]}return a.prototype.getRange=function(a){return this._ranges[a]},a.prototype.addRange=function(a,b){this._ranges[a]=b},a}();return function(){function a(a){this._glyphInfo={};this._baseURL=a}return a.prototype.getRange=function(a,d){var g=this._getFontStack(a);if(g.getRange(d))return b.resolve();var h=256*d,k=h+255,h=this._baseURL.replace("{fontstack}",a).replace("{range}",h+"-"+k);return c(h,
{callbackParamName:"callback",responseType:"array-buffer"}).then(function(a){g.addRange(d,new f(new e(new Uint8Array(a.data),new DataView(a.data))))}).otherwise(function(){g.addRange(d,new f)})},a.prototype.getGlyph=function(a,b){var c=this._getFontStack(a);if(c){var d=Math.floor(b/256);if(!(256<d)&&(c=c.getRange(d)))return{metrics:c.getMetrics(b),bitmap:c.getBitmap(b)}}},a.prototype._getFontStack=function(a){var b=this._glyphInfo[a];return b||(b=this._glyphInfo[a]=new g),b},a}()})},"esri/layers/vectorTiles/core/pbf":function(){define(["require",
"exports"],function(a,d){return function(){function a(a,b,d,g){this._tag=0;this._dataType=99;this._data=a;this._dataView=b;this._pos=d||0;this._end=g||a.byteLength}return a.prototype.clone=function(){return new a(this._data,this._dataView,this._pos,this._end)},a.prototype.next=function(a){for(;;){if(this._pos===this._end)return!1;var b=this._decodeVarint();if(this._tag=b>>3,this._dataType=7&b,!a||a===this._tag)break;this.skip()}return!0},a.prototype.empty=function(){return this._pos>=this._end},a.prototype.tag=
function(){return this._tag},a.prototype.getInt32=function(){return this._decodeVarint()},a.prototype.getInt64=function(){return this._decodeVarint()},a.prototype.getUInt32=function(){return this._decodeVarint()},a.prototype.getUInt64=function(){return this._decodeVarint()},a.prototype.getSInt32=function(){return this._decodeSVarint()},a.prototype.getSInt64=function(){return this._decodeSVarint()},a.prototype.getBool=function(){var a=0!==this._data[this._pos];return this._skip(1),a},a.prototype.getEnum=
function(){return this._decodeVarint()},a.prototype.getFixed64=function(){var a=this._dataView,b=this._pos,a=a.getUint32(b,!0)+4294967296*a.getUint32(b+4,!0);return this._skip(8),a},a.prototype.getSFixed64=function(){var a=this._dataView,b=this._pos,a=a.getUint32(b,!0)+4294967296*a.getInt32(b+4,!0);return this._skip(8),a},a.prototype.getDouble=function(){var a=this._dataView.getFloat64(this._pos,!0);return this._skip(8),a},a.prototype.getFixed32=function(){var a=this._dataView.getUint32(this._pos,
!0);return this._skip(4),a},a.prototype.getSFixed32=function(){var a=this._dataView.getInt32(this._pos,!0);return this._skip(4),a},a.prototype.getFloat=function(){var a=this._dataView.getFloat32(this._pos,!0);return this._skip(4),a},a.prototype.getString=function(){var a=this._getLength(),b=this._pos,b=this._toString(this._data,b,b+a);return this._skip(a),b},a.prototype.getBytes=function(){var a=this._getLength(),b=this._pos,b=this._toBytes(this._data,b,b+a);return this._skip(a),b},a.prototype.getMessage=
function(){var b=this._getLength(),d=this._pos,d=new a(this._data,this._dataView,d,d+b);return this._skip(b),d},a.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw Error("Invalid data type!");}},a.prototype._skip=function(a){if(this._pos+a>this._end)throw Error("Attempt to skip past the end of buffer!");this._pos+=a},a.prototype._decodeVarint=function(){var a,
b=this._data,d=this._pos,g=0;if(10<=this._end-d){if(a=b[d++],g|=127&a,0!==(128&a))if(a=b[d++],g|=(127&a)<<7,0!==(128&a))if(a=b[d++],g|=(127&a)<<14,0!==(128&a))if(a=b[d++],g|=(127&a)<<21,0!==(128&a))if(a=b[d++],g+=268435456*(127&a),0!==(128&a))if(a=b[d++],g+=34359738368*(127&a),0!==(128&a))if(a=b[d++],g+=4398046511104*(127&a),0!==(128&a))if(a=b[d++],g+=562949953421312*(127&a),0!==(128&a))if(a=b[d++],g+=72057594037927936*(127&a),0!==(128&a))if(a=b[d++],g+=0x7fffffffffffffff*(127&a),0!==(128&a))throw Error("Varint too long!");
}else{for(var h=1;d!==this._end&&(a=b[d],0!==(128&a));)++d,g+=(127&a)*h,h*=128;if(d===this._end)throw Error("Varint overrun!");++d;g+=a*h}return this._pos=d,g},a.prototype._decodeSVarint=function(){var a=this._decodeVarint();return a%2?-(a+1)/2:a/2},a.prototype._getLength=function(){if(2!==this._dataType)throw Error("Not a delimited data type!");return this._decodeVarint()},a.prototype._toString=function(a,b,d){var c="",e="";for(d=Math.min(this._end,d);d>b;++b){var f=a[b];128&f?e+="%"+f.toString(16):
(c+=decodeURIComponent(e)+String.fromCharCode(f),e="")}return e.length&&(c+=decodeURIComponent(e)),c},a.prototype._toBytes=function(a,b,d){return d=Math.min(this._end,d),new Uint8Array(a.buffer,b,d-b)},a}()})},"esri/layers/vectorTiles/views/2d/engine/StageGL":function(){define("require exports ../../../core/tsSupport/extendsHelper ../libs/gl-matrix/common ../libs/gl-matrix/vec2 ../libs/gl-matrix/mat2d ./webgl/BitBlitRenderer ../../support/screenshotUtils ../../../core/promiseUtils ../../webgl/RenderingContext ../../webgl/FramebufferObject ../../webgl/webgl-utils ../../webgl/Program ../../webgl/VertexArrayObject ../../webgl/BufferObject ./webgl/painter/WGLPainter ./Container ./webgl/shaders/glShaderSnippets".split(" "),
function(a,d,b,c,e,f,g,h,n,k,m,q,l,p,u,t,r,v){function w(a){return{budget:a.budget,state:a.state,devicePixelRatio:a.devicePixelRatio,stationary:a.stationary}}var x={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"};return function(a){function d(){var b=null!==a&&a.apply(this,arguments)||this;return b._clipData=new Float32Array(8),b._upperLeft=e.create(),b._upperRight=e.create(),b._lowerLeft=e.create(),b._lowerRight=e.create(),b._mat2=f.create(),b._clipRendererInitialized=!1,b}return b(d,a),Object.defineProperty(d.prototype,
"glPainter",{get:function(){return this._painter},enumerable:!0,configurable:!0}),d.prototype.createElement=function(){var a=document.createElement("canvas");return a.setAttribute("class","esri-display-object"),a},d.prototype.setElement=function(a){this.element=a},d.prototype.attach=function(b){if(this.attached)return!0;this._resizeCanvas(b);var c=q.setupWebGL(this.element,{alpha:!0,antialias:!1,depth:!0,stencil:!0});return this._renderingContext=new k(c[0]),this.attached=!0,this._cachedRenderParams=
w(b),this._painter||(this._painter=new t,this._painter.initialize(this._renderingContext)),a.prototype.attach.call(this,b)},d.prototype.detach=function(b){a.prototype.detach.call(this,b);this._renderingContext&&(this._renderingContext.dispose(),this._renderingContext=null);this._cachedRenderParams=null},d.prototype.beforeRenderChildren=function(a,b){var d=a.state,g=this._painter;if(g){var h=this._renderingContext;h.enforceState();g.update(d,a.devicePixelRatio);if(!(d.spatialReference&&(d.spatialReference._isWrappable?
d.spatialReference._isWrappable():d.spatialReference.isWrappable)))return void(this._clipFrame=!1);var k=d.width,g=d.height,l=d.rotation,k=Math.round(k*a.devicePixelRatio),g=Math.round(g*a.devicePixelRatio),n=c.toRadian(l),q=Math.abs(Math.cos(n)),p=Math.abs(Math.sin(n)),r=Math.round(d.worldScreenWidth);if(r>=Math.round(k*q+g*p))return void(this._clipFrame=!1);this._clipFBO&&this._clipFBO.width===k&&this._clipFBO.height===g||(this._clipFBO=new m(h,{colorTarget:0,depthStencilTarget:3,width:k,height:g}));
var t=.5*k,u=.5*g,d=1/k,v=1/g,r=.5*r*a.devicePixelRatio,w=.5*(k*p+g*q),k=this._upperLeft,q=this._upperRight,p=this._lowerLeft,x=this._lowerRight;e.set(k,-r,-w);e.set(q,r,-w);e.set(p,-r,w);e.set(x,r,w);f.identity(this._mat2);f.translate(this._mat2,this._mat2,[t,u]);0!==l&&f.rotate(this._mat2,this._mat2,n);e.transformMat2d(k,k,this._mat2);e.transformMat2d(q,q,this._mat2);e.transformMat2d(p,p,this._mat2);e.transformMat2d(x,x,this._mat2);l=this._clipData;l.set([2*p[0]*d-1,2*(g-p[1])*v-1,2*x[0]*d-1,2*
(g-x[1])*v-1,2*k[0]*d-1,2*(g-k[1])*v-1,2*q[0]*d-1,2*(g-q[1])*v-1]);this._clipRendererInitialized||this._initializeClipRenderer(h);this._clipVBO.setData(l);this._boundFBO=h.getBoundFramebufferObject();h.bindFramebuffer(this._clipFBO);h.setDepthWriteEnabled(!0);h.setStencilWriteMask(255);h.setClearColor(0,0,0,0);h.setClearDepth(1);h.setClearStencil(0);h.clear(h.gl.COLOR_BUFFER_BIT|h.gl.DEPTH_BUFFER_BIT|h.gl.STENCIL_BUFFER_BIT);h.setDepthWriteEnabled(!1);this._clipFrame=!0}},d.prototype.afterRenderChildren=
function(a,b){if(this._clipFrame&&this._clipRendererInitialized){var c=this._renderingContext;c.bindFramebuffer(this._boundFBO);this._boundFBO=null;c.bindVAO(this._clipVAO);c.bindProgram(this._clipStencilProgram);c.setDepthWriteEnabled(!1);c.setDepthTestEnabled(!1);c.setStencilTestEnabled(!0);c.setBlendingEnabled(!1);c.setColorMask(!1,!1,!1,!1);c.setStencilOp(7680,7680,7681);c.setStencilWriteMask(255);c.setStencilFunction(519,1,255);c.drawElements(4,6,5123,0);c.bindVAO();c.setColorMask(!0,!0,!0,!0);
c.setBlendingEnabled(!0);c.setStencilFunction(514,1,255);this._blitRenderer.render(c,this._clipFBO.colorTexture,9728,1);c.setStencilTestEnabled(!1)}},d.prototype.doRender=function(b){var c=this.element.style;return this.visible?(c.display="block",c.opacity=""+this.opacity,this._resizeCanvas(b),a.prototype.doRender.call(this,b),void(this._cachedRenderParams=w(b))):void(c.display="none")},d.prototype.takeScreenshot=function(a){void 0===a&&(a={});var b=a.pixelRatio||1;this._cachedRenderParams.devicePixelRatio=
b;var c=Math.round(b*this._cachedRenderParams.state.width),d=Math.round(b*this._cachedRenderParams.state.height),e=0,f=0,g=c,k=d,l=c,q=d,l=a.area;(l&&(e=Math.round(b*l.x),f=Math.round(b*l.y),g=Math.round(b*l.width),k=Math.round(b*l.height)),void 0!==a.width&&void 0!==a.height)?(l=a.width/a.height,k*l<g?(l*=k,e+=Math.floor((g-l)/2),g=Math.floor(l)):(l=g/l,f+=Math.floor((k-l)/2),k=Math.floor(l)),l=a.width,q=a.height):(l=g,q=k);b=document.createElement("canvas");b.width=l;b.height=q;var p=b.getContext("2d"),
r=new Uint8Array(g*k*4),t=this._renderingContext,u=m.create(t,{colorTarget:1,depthStencilTarget:3,width:c,height:d});t.bindFramebuffer(u);t.setViewport(0,0,c,d);this._cachedRenderParams.budget&&this._cachedRenderParams.budget.reset(Number.MAX_VALUE);var v=this._cachedRenderParams,w=this._renderingContext.gl;if(this._renderingContext.setClearColor(0,0,0,0),this._renderingContext.setClearDepth(1),this._renderingContext.setClearStencil(0),this._renderingContext.clear(w.COLOR_BUFFER_BIT|w.DEPTH_BUFFER_BIT|
w.STENCIL_BUFFER_BIT),v.context=this._renderingContext,this.beforeRenderChildren(v,v),void 0!==a.rotation&&null!==a.rotation){var w=v.state,O=w.clone();O.viewpoint.rotation=a.rotation;v.state=O;this.renderChildren(v);v.state=w}else this.renderChildren(v);this.afterRenderChildren(v,v);u.readPixels(e,d-(f+k),g,k,6408,5121,r);t.bindFramebuffer();t=p.getImageData(0,0,l,q);if(0!==e||0!==f||g!==c||k!==d||l!==c||q!==d)h.resampleHermite(r,g,k,t.data,l,q,!0);else{f=k-1;k=0;u=4*g;for(O=w=e=d=c=g=v=void 0;f>
k;){w=k*u;O=f*u;for(v=0;u>v;v+=4)g=r[w+v],c=r[w+v+1],d=r[w+v+2],e=r[w+v+3],r[w+v]=r[O+v],r[w+v+1]=r[O+v+1],r[w+v+2]=r[O+v+2],r[w+v+3]=r[O+v+3],r[O+v]=g,r[O+v+1]=c,r[O+v+2]=d,r[O+v+3]=e;k++;f--}g=t.data;c=r.length;for(f=0;c>f;f++)g[f]=r[f]}r=t.data;k=r.length;for(f=0;k>f;f+=4)e=r[f+3],0<e&&(d=e/255,g=Math.floor(r[f+0]/d),c=Math.floor(r[f+1]/d),d=Math.floor(r[f+2]/d),r[f+0]=255>=g?g:255,r[f+1]=255>=c?c:255,r[f+2]=255>=d?d:255);p.putImageData(t,0,0);p=x[a.format?a.format.toLowerCase():"png"];r=1;void 0!==
a.quality&&(r=a.quality/100);a=b.toDataURL(p,r);return n.resolve({dataURL:a,x:0,y:0,width:l,height:q})},d.prototype.prepareChildrenRenderParameters=function(a){if(!this.attached||!this._renderingContext)return null;a=w(a);var b=this._renderingContext,c=b.gl;return b.setDepthWriteEnabled(!0),b.setStencilWriteMask(255),b.setClearColor(0,0,0,0),b.setClearDepth(1),b.setClearStencil(0),b.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT|c.STENCIL_BUFFER_BIT),b.setViewport(0,0,this.element.width,this.element.height),
b.setDepthWriteEnabled(!1),a.context=b,a},d.prototype.attachChild=function(a,b){return a.attach(b)},d.prototype.detachChild=function(a,b){return a.detach(b)},d.prototype.renderChild=function(a,b){return a.processRender(b)},d.prototype._resizeCanvas=function(a){var b=this.element,c=b.style,d=a.state,e=a.devicePixelRatio;a=Math.round(d.width*e);e=Math.round(d.height*e);(b.width!==a||b.height!==e)&&(b.width=a,b.height=e);c.width=d.width+"px";c.height=d.height+"px"},d.prototype._initializeClipRenderer=
function(a){if(this._clipRendererInitialized)return!0;this._blitRenderer=new g;var b={a_pos:0},c=new l(a,v.stencilVS,v.stencilFS,b);if(!c)return!1;var d=u.createVertex(a,35040,32),e=new Uint16Array([0,1,2,2,1,3]),e=u.createIndex(a,35044,e);a=new p(a,b,{geometry:[{name:"a_pos",count:2,type:5126,offset:0,stride:8,normalized:!1,divisor:0}]},{geometry:d},e);return this._clipStencilProgram=c,this._clipVBO=d,this._clipVAO=a,this._clipRendererInitialized=!0,!0},d}(r)})},"esri/layers/vectorTiles/views/2d/libs/gl-matrix/common":function(){define([],
function(){if(!a)var a=1E-6;if(!d)var d="undefined"!=typeof Float32Array?Float32Array:Array;if(!b)var b=Math.random;var c={GLMAT_EPSILON:a,GLMAT_ARRAY_TYPE:d,GLMAT_RANDOM:b,setMatrixArrayType:function(a){c.GLMAT_ARRAY_TYPE=a}},e=Math.PI/180,f=180/Math.PI;return c.toRadian=function(a){return a*e},c.toDegree=function(a){return a*f},c.setMatrixArrayType(Array),c})},"esri/layers/vectorTiles/views/2d/libs/gl-matrix/vec2":function(){define(["./common"],function(a){var d=a.GLMAT_ARRAY_TYPE,b=a.GLMAT_RANDOM,
c={};return c.create=function(){var a=new d(2);return a[0]=0,a[1]=0,a},c.clone=function(a){var b=new d(2);return b[0]=a[0],b[1]=a[1],b},c.fromValues=function(a,b){var c=new d(2);return c[0]=a,c[1]=b,c},c.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a},c.set=function(a,b,c){return a[0]=b,a[1]=c,a},c.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a},c.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a},c.sub=c.subtract,c.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*
c[1],a},c.mul=c.multiply,c.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a},c.div=c.divide,c.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a},c.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a},c.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a},c.scaleAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a},c.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return Math.sqrt(c*c+d*d)},c.dist=c.distance,
c.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return c*c+d*d},c.sqrDist=c.squaredDistance,c.length=function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)},c.len=c.length,c.squaredLength=function(a){var b=a[0];a=a[1];return b*b+a*a},c.sqrLen=c.squaredLength,c.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a},c.inverse=function(a,b){return a[0]=1/b[0],a[1]=1/b[1],a},c.normalize=function(a,b){var c=b[0],d=b[1],c=c*c+d*d;return 0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c),a},c.dot=
function(a,b){return a[0]*b[0]+a[1]*b[1]},c.cross=function(a,b,c){b=b[0]*c[1]-b[1]*c[0];return a[0]=a[1]=0,a[2]=b,a},c.lerp=function(a,b,c,d){var e=b[0];b=b[1];return a[0]=e+d*(c[0]-e),a[1]=b+d*(c[1]-b),a},c.random=function(a,c){c=c||1;var d=2*b()*Math.PI;return a[0]=Math.cos(d)*c,a[1]=Math.sin(d)*c,a},c.transformMat2=function(a,b,c){var d=b[0];b=b[1];return a[0]=c[0]*d+c[2]*b,a[1]=c[1]*d+c[3]*b,a},c.transformMat2d=function(a,b,c){var d=b[0];b=b[1];return a[0]=c[0]*d+c[2]*b+c[4],a[1]=c[1]*d+c[3]*
b+c[5],a},c.transformMat3=function(a,b,c){var d=b[0];b=b[1];return a[0]=c[0]*d+c[3]*b+c[6],a[1]=c[1]*d+c[4]*b+c[7],a},c.transformMat4=function(a,b,c){var d=b[0];b=b[1];return a[0]=c[0]*d+c[4]*b+c[12],a[1]=c[1]*d+c[5]*b+c[13],a},c.forEach=function(){var a=c.create();return function(b,c,d,e,k,m){c||(c=2);d||(d=0);for(e=e?Math.min(e*c+d,b.length):b.length;e>d;d+=c)a[0]=b[d],a[1]=b[d+1],k(a,a,m),b[d]=a[0],b[d+1]=a[1];return b}}(),c.str=function(a){return"vec2("+a[0]+", "+a[1]+")"},c})},"esri/layers/vectorTiles/views/2d/libs/gl-matrix/mat2d":function(){define(["./common"],
function(a){var d=a.GLMAT_ARRAY_TYPE;a={};return a.create=function(){var a=new d(6);return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a},a.clone=function(a){var b=new d(6);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b},a.copy=function(a,c){return a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[4]=c[4],a[5]=c[5],a},a.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a},a.invert=function(a,c){var b=c[0],d=c[1],g=c[2],h=c[3],n=c[4],k=c[5],m=b*h-d*g;return m?(m=1/m,
a[0]=h*m,a[1]=-d*m,a[2]=-g*m,a[3]=b*m,a[4]=(g*k-h*n)*m,a[5]=(d*n-b*k)*m,a):null},a.determinant=function(a){return a[0]*a[3]-a[1]*a[2]},a.multiply=function(a,c,d){var b=c[0],e=c[1],h=c[2],n=c[3],k=c[4];c=c[5];var m=d[0],q=d[1],l=d[2],p=d[3],u=d[4];d=d[5];return a[0]=b*m+h*q,a[1]=e*m+n*q,a[2]=b*l+h*p,a[3]=e*l+n*p,a[4]=b*u+h*d+k,a[5]=e*u+n*d+c,a},a.mul=a.multiply,a.rotate=function(a,c,d){var b=c[0],e=c[1],h=c[2],n=c[3],k=c[4];c=c[5];var m=Math.sin(d);d=Math.cos(d);return a[0]=b*d+h*m,a[1]=e*d+n*m,a[2]=
b*-m+h*d,a[3]=e*-m+n*d,a[4]=k,a[5]=c,a},a.scale=function(a,c,d){var b=c[1],e=c[2],h=c[3],n=c[4],k=c[5],m=d[0];d=d[1];return a[0]=c[0]*m,a[1]=b*m,a[2]=e*d,a[3]=h*d,a[4]=n,a[5]=k,a},a.translate=function(a,c,d){var b=c[0],e=c[1],h=c[2],n=c[3],k=c[4];c=c[5];var m=d[0];d=d[1];return a[0]=b,a[1]=e,a[2]=h,a[3]=n,a[4]=b*m+h*d+k,a[5]=e*m+n*d+c,a},a.fromRotation=function(a,c){var b=Math.sin(c),d=Math.cos(c);return a[0]=d,a[1]=b,a[2]=-b,a[3]=d,a[4]=0,a[5]=0,a},a.fromScaling=function(a,c){return a[0]=c[0],a[1]=
0,a[2]=0,a[3]=c[1],a[4]=0,a[5]=0,a},a.fromTranslation=function(a,c){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=c[0],a[5]=c[1],a},a.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"},a.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)},a})},"esri/layers/vectorTiles/views/2d/engine/webgl/BitBlitRenderer":function(){define("require exports ../../../webgl/Program ../../../webgl/VertexArrayObject ../../../webgl/BufferObject ./shaders/glShaderSnippets".split(" "),
function(a,d,b,c,e,f){return function(){function a(){this._initialized=!1}return a.prototype.render=function(a,b,c,d){a&&(this._initialized||this._initialize(a),a.setBlendFunctionSeparate(1,771,1,771),a.bindVAO(this._vertexArrayObject),a.bindProgram(this._program),b.setSamplingMode(c),a.bindTexture(b,0),this._program.setUniform1i("u_tex",0),this._program.setUniform1f("u_opacity",d),a.drawArrays(5,0,4),a.bindVAO())},a.prototype._initialize=function(a){if(this._initialized)return!0;var d={a_pos:0,a_tex:1},
g=new b(a,f.bitblitVS,f.bitblitFS,d);if(!g)return!1;var h=new Int8Array(16);h[0]=-1;h[1]=-1;h[2]=0;h[3]=0;h[4]=1;h[5]=-1;h[6]=1;h[7]=0;h[8]=-1;h[9]=1;h[10]=0;h[11]=1;h[12]=1;h[13]=1;h[14]=1;h[15]=1;a=new c(a,d,{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:4,normalized:!1,divisor:0},{name:"a_tex",count:2,type:5120,offset:2,stride:4,normalized:!1,divisor:0}]},{geometry:e.createVertex(a,35044,h)});return this._program=g,this._vertexArrayObject=a,this._initialized=!0,!0},a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/glShaderSnippets":function(){define("require exports ../../../../webgl/ShaderSnippets dojo/text!./bitblit.vs.glsl dojo/text!./bitblit.fs.glsl dojo/text!./stencil.vs.glsl dojo/text!./stencil.fs.glsl dojo/text!./background.vs.glsl dojo/text!./background.fs.glsl dojo/text!./tileInfo.vs.glsl dojo/text!./tileInfo.fs.glsl".split(" "),
function(a,d,b,c,e,f,g,h,n,k,m){function q(a,b){l+='\x3csnippet name\x3d"'+a+'"\x3e\x3c![CDATA[';l+=b;l+="]]\x3e\x3c/snippet\x3e"}var l="",l=l+'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e',l=l+"\x3csnippets\x3e";q("bitblitVS",c);q("bitblitFS",e);q("stencilVS",f);q("stencilFS",g);q("backgroundVS",h);q("backgroundFS",n);q("tileInfoVS",k);q("tileInfoFS",m);l+="\x3c/snippets\x3e";a=new b;return b.parse(l,a),a})},"esri/layers/vectorTiles/views/support/screenshotUtils":function(){define(["require",
"exports","dojo/_base/lang"],function(a,d,b){Object.defineProperty(d,"__esModule",{value:!0});d.adjustScreenshotSettings=function(a,d){a=b.mixin({format:"png",quality:100},a||{});var c,e;a.includePadding?(c=d.width,e=d.height):(c=d.width-d.padding.left-d.padding.right,e=d.height-d.padding.top-d.padding.bottom);var h=c/e;return void 0!==a.width&&void 0===a.height?a.height=a.width/h:void 0!==a.height&&void 0===a.width&&(a.width=h*a.height),void 0!==a.height&&(a.height=Math.floor(a.height)),void 0!==
a.width&&(a.width=Math.floor(a.width)),a.area||a.includePadding||(a.area={x:d.padding.left,y:d.padding.top,width:c,height:e}),a};d.resampleHermite=function(a,b,d,g,h,n,k){void 0===k&&(k=!0);var c=b/h;d/=n;for(var e=Math.ceil(c/2),f=Math.ceil(d/2),p=0;n>p;p++)for(var u=0;h>u;u++){for(var t=4*(u+(k?n-p-1:p)*h),r=0,v=0,w=0,x=0,y=0,z=0,A=0,B=(p+.5)*d,H=Math.floor(p*d);(p+1)*d>H;H++)for(var J=Math.abs(B-(H+.5))/f,M=(u+.5)*c,J=J*J,K=Math.floor(u*c);(u+1)*c>K;K++){var D=Math.abs(M-(K+.5))/e,E=Math.sqrt(J+
D*D);-1<=E&&1>=E&&(r=2*E*E*E-3*E*E+1,0<r&&(D=4*(K+H*b),A+=r*a[D+3],w+=r,255>a[D+3]&&(r=r*a[D+3]/250),x+=r*a[D],y+=r*a[D+1],z+=r*a[D+2],v+=r))}g[t]=x/v;g[t+1]=y/v;g[t+2]=z/v;g[t+3]=A/w}}})},"esri/layers/vectorTiles/views/webgl/RenderingContext":function(){define(["require","exports","./enums","./Extensions"],function(a,d,b,c){return function(){function a(a,b){this.gl=null;this._extensions=void 0;this._blendEnabled=!1;this._blendColorState={r:0,g:0,b:0,a:0};this._blendFunctionState={srcRGB:1,dstRGB:0,
srcAlpha:1,dstAlpha:0};this._blendEquationState={mode:32774,modeAlpha:32774};this._colorMaskState={r:!0,g:!0,b:!0,a:!0};this._polygonCullingEnabled=!1;this._cullFace=1029;this._frontFace=2305;this._scissorTestEnabled=!1;this._scissorRect={x:0,y:0,width:0,height:0};this._depthTestEnabled=!1;this._depthFunction=513;this._clearDepth=1;this._depthWriteEnabled=!0;this._depthRange={zNear:0,zFar:1};this._viewport=null;this._polygonOffsetFillEnabled=this._stencilTestEnabled=!1;this._polygonOffset=[0,0];this._stencilFunction=
{face:1032,func:519,ref:0,mask:1};this._clearStencil=0;this._stencilWriteMask=1;this._stencilOperation={face:1032,fail:7680,zFail:7680,zPass:7680};this._lineWidth=1;this._clearColor={r:0,g:0,b:0,a:0};this._activeFramebuffer=this._activeIndexBuffer=this._activeVertexBuffer=this._activeShaderProgram=null;this._activeTextureUnit=0;this._textureUnitMap={};this.gl=a;this._extensions=new c(a,b);var d=a.getParameter(a.VIEWPORT);this._viewport={x:d[0],y:d[1],width:d[2],height:d[3]};d=this.extensions.textureFilterAnisotropic;
this._parameters={versionString:a.getParameter(a.VERSION),maxVertexTextureImageUnits:a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS),maxVertexAttributes:a.getParameter(a.MAX_VERTEX_ATTRIBS),maxMaxAnisotropy:d?a.getParameter(d.MAX_TEXTURE_MAX_ANISOTROPY_EXT):void 0,maxTextureImageUnits:a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS)};this.enforceState()}return Object.defineProperty(a.prototype,"extensions",{get:function(){return this._extensions},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,
"contextAttributes",{get:function(){return this.gl.getContextAttributes()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"parameters",{get:function(){return this._parameters},enumerable:!0,configurable:!0}),a.prototype.dispose=function(){this.bindVAO(null);this.unbindBuffer(34962);this.unbindBuffer(34963);this._textureUnitMap={};this.gl=null},a.prototype.setBlendingEnabled=function(a){this._blendEnabled!==a&&(!0===a?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),
this._blendEnabled=a)},a.prototype.setBlendColor=function(a,b,c,d){(a!==this._blendColorState.r||b!==this._blendColorState.g||c!==this._blendColorState.b||d!==this._blendColorState.a)&&(this.gl.blendColor(a,b,c,d),this._blendColorState.r=a,this._blendColorState.g=b,this._blendColorState.b=c,this._blendColorState.a=d)},a.prototype.setBlendFunction=function(a,b){(a!==this._blendFunctionState.srcRGB||b!==this._blendFunctionState.dstRGB)&&(this.gl.blendFunc(a,b),this._blendFunctionState.srcRGB=a,this._blendFunctionState.srcAlpha=
a,this._blendFunctionState.dstRGB=b,this._blendFunctionState.dstAlpha=b)},a.prototype.setBlendFunctionSeparate=function(a,b,c,d){(this._blendFunctionState.srcRGB!==a||this._blendFunctionState.srcAlpha!==c||this._blendFunctionState.dstRGB!==b||this._blendFunctionState.dstAlpha!==d)&&(this.gl.blendFuncSeparate(a,b,c,d),this._blendFunctionState.srcRGB=a,this._blendFunctionState.srcAlpha=c,this._blendFunctionState.dstRGB=b,this._blendFunctionState.dstAlpha=d)},a.prototype.setBlendEquation=function(a){this._blendEquationState.mode!==
a&&(this.gl.blendEquation(a),this._blendEquationState.mode=a,this._blendEquationState.modeAlpha=a)},a.prototype.setBlendEquationSeparate=function(a,b){(this._blendEquationState.mode!==a||this._blendEquationState.modeAlpha!==b)&&(this.gl.blendEquationSeparate(a,b),this._blendEquationState.mode=a,this._blendEquationState.modeAlpha=b)},a.prototype.setColorMask=function(a,b,c,d){(this._colorMaskState.r!==a||this._colorMaskState.g!==b||this._colorMaskState.b!==c||this._colorMaskState.a!==d)&&(this.gl.colorMask(a,
b,c,d),this._colorMaskState.r=a,this._colorMaskState.g=b,this._colorMaskState.b=c,this._colorMaskState.a=d)},a.prototype.setClearColor=function(a,b,c,d){(this._clearColor.r!==a||this._clearColor.g!==b||this._clearColor.b!==c||this._clearColor.a!==d)&&(this.gl.clearColor(a,b,c,d),this._clearColor.r=a,this._clearColor.g=b,this._clearColor.b=c,this._clearColor.a=d)},a.prototype.setFaceCullingEnabled=function(a){this._polygonCullingEnabled!==a&&(!0===a?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),
this._polygonCullingEnabled=a)},a.prototype.setPolygonOffsetFillEnabled=function(a){this._polygonOffsetFillEnabled!==a&&(!0===a?this.gl.enable(this.gl.POLYGON_OFFSET_FILL):this.gl.disable(this.gl.POLYGON_OFFSET_FILL),this._polygonOffsetFillEnabled=a)},a.prototype.setPolygonOffset=function(a,b){this._polygonOffset[0]===a&&this._polygonOffset[1]===b||(this._polygonOffset[0]=a,this._polygonOffset[1]=b,this.gl.polygonOffset(a,b))},a.prototype.setCullFace=function(a){this._cullFace!==a&&(this.gl.cullFace(a),
this._cullFace=a)},a.prototype.setFrontFace=function(a){this._frontFace!==a&&(this.gl.frontFace(a),this._frontFace=a)},a.prototype.setScissorTestEnabled=function(a){this._scissorTestEnabled!==a&&(!0===a?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this._scissorTestEnabled=a)},a.prototype.setScissorRect=function(a,b,c,d){(this._scissorRect.x!==a||this._scissorRect.y!==b||this._scissorRect.width!==c||this._scissorRect.height!==d)&&(this.gl.scissor(a,b,c,d),this._scissorRect.x=
a,this._scissorRect.y=b,this._scissorRect.width=c,this._scissorRect.height=d)},a.prototype.setDepthTestEnabled=function(a){this._depthTestEnabled!==a&&(!0===a?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST),this._depthTestEnabled=a)},a.prototype.setClearDepth=function(a){this._clearDepth!==a&&(this.gl.clearDepth(a),this._clearDepth=a)},a.prototype.setDepthFunction=function(a){this._depthFunction!==a&&(this.gl.depthFunc(a),this._depthFunction=a)},a.prototype.setDepthWriteEnabled=
function(a){this._depthWriteEnabled!==a&&(this.gl.depthMask(a),this._depthWriteEnabled=a)},a.prototype.setDepthRange=function(a,b){(this._depthRange.zNear!==a||this._depthRange.zFar!==b)&&(this.gl.depthRange(a,b),this._depthRange.zNear=a,this._depthRange.zFar=b)},a.prototype.setStencilTestEnabled=function(a){this._stencilTestEnabled!==a&&(!0===a?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST),this._stencilTestEnabled=a)},a.prototype.setClearStencil=function(a){a!==this._clearStencil&&
(this.gl.clearStencil(a),this._clearStencil=a)},a.prototype.setStencilFunction=function(a,b,c){(this._stencilFunction.func!==a||this._stencilFunction.ref!==b||this._stencilFunction.mask!==c)&&(this.gl.stencilFunc(a,b,c),this._stencilFunction.face=1032,this._stencilFunction.func=a,this._stencilFunction.ref=b,this._stencilFunction.mask=c)},a.prototype.setStencilFunctionSeparate=function(a,b,c,d){(this._stencilFunction.face!==a||this._stencilFunction.func!==b||this._stencilFunction.ref!==c||this._stencilFunction.mask!==
d)&&(this.gl.stencilFuncSeparate(a,b,c,d),this._stencilFunction.face=a,this._stencilFunction.func=b,this._stencilFunction.ref=c,this._stencilFunction.mask=d)},a.prototype.setStencilWriteMask=function(a){this._stencilWriteMask!==a&&(this.gl.stencilMask(a),this._stencilWriteMask=a)},a.prototype.setStencilOp=function(a,b,c){(this._stencilOperation.fail!==a||this._stencilOperation.zFail!==b||this._stencilOperation.zPass!==c)&&(this.gl.stencilOp(a,b,c),this._stencilOperation.face=1032,this._stencilOperation.fail=
a,this._stencilOperation.zFail=b,this._stencilOperation.zPass=c)},a.prototype.setStencilOpSeparate=function(a,b,c,d){(this._stencilOperation.face!==a||this._stencilOperation.fail!==b||this._stencilOperation.zFail!==c||this._stencilOperation.zPass!==d)&&(this.gl.stencilOpSeparate(a,b,c,d),this._stencilOperation.face=a,this._stencilOperation.face=a,this._stencilOperation.fail=b,this._stencilOperation.zFail=c,this._stencilOperation.zPass=d)},a.prototype.setLineWidth=function(a){var b=this._lineWidth;
return this._lineWidth!==a&&(this.gl.lineWidth(a),this._lineWidth=a),b},a.prototype.setActiveTexture=function(a){var c=this._activeTextureUnit;return 0<=a&&a!==this._activeTextureUnit&&(this.gl.activeTexture(b.BASE_TEXTURE_UNIT+a),this._activeTextureUnit=a),c},a.prototype.clear=function(a){a&&this.gl.clear(a)},a.prototype.drawArrays=function(a,b,c){this.gl.drawArrays(a,b,c)},a.prototype.drawElements=function(a,b,c,d){return 5123===c?void this.gl.drawElements(a,b,c,d):void(5125===c&&this._extensions.elementIndexUint?
this.gl.drawElements(a,b,c,d):console.warn("Data type is uint however extension OES_Element_index_unit is not supported therefore this draw call cannot be made"))},a.prototype.drawArraysInstanced=function(a,b,c,d){this._extensions.angleInstancedArrays?this._extensions.angleInstancedArrays.drawArraysInstancedANGLE(a,b,c,d):console.error("Extension ANGLE_instanced_arrays isn't supported!")},a.prototype.drawElementsInstanced=function(a,b,c,d,e){this._extensions.angleInstancedArrays?5125!==c||this._extensions.elementIndexUint?
this._extensions.angleInstancedArrays.drawElementsInstancedANGLE(a,b,c,d,e):console.error("Extension OES_Element_index_unit is not supported!"):console.error("Extension ANGLE_instanced_arrays isn't supported!")},a.prototype.setViewport=function(a,b,c,d){var e=this._viewport;e.x===a&&e.y===b&&e.width===c&&e.height===d||(e.x=a,e.y=b,e.width=c,e.height=d,this.gl.viewport(a,b,c,d))},a.prototype.getViewport=function(){return{x:this._viewport.x,y:this._viewport.y,width:this._viewport.width,height:this._viewport.height}},
a.prototype.bindProgram=function(a){return a?void(this._activeShaderProgram!==a&&(a.initialize(),this.gl.useProgram(a.glName),this._activeShaderProgram=a)):(this.gl.useProgram(null),void(this._activeShaderProgram=null))},a.prototype.bindTexture=function(b,c){void 0===c&&(c=0);-1===a._MAX_TEXTURE_IMAGE_UNITS&&(a._MAX_TEXTURE_IMAGE_UNITS=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS));(c>=a._MAX_TEXTURE_IMAGE_UNITS||0>c)&&console.error("Input texture unit is out of range of available units!");
var d=this._textureUnitMap[c];return this.setActiveTexture(c),null==b||null==b.glName?(null!=d&&(this.gl.bindTexture(d.descriptor.target,null),d.setBoundToUnit(c,!1)),void(this._textureUnitMap[c]=null)):d&&d.id===b.id?void b.applyChanges():(this.gl.bindTexture(b.descriptor.target,b.glName),b.setBoundToUnit(c,!0),b.applyChanges(),void(this._textureUnitMap[c]=b))},a.prototype.bindFramebuffer=function(a){return a?void(this._activeFramebuffer!==a&&(a.initialize()||this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,
a.glName),this._activeFramebuffer=a)):(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),void(this._activeFramebuffer=null))},a.prototype.bindBuffer=function(b){b&&(34962===b.bufferType?this._activeVertexBuffer=a._bindBuffer(this.gl,b,b.bufferType,this._activeVertexBuffer):this._activeIndexBuffer=a._bindBuffer(this.gl,b,b.bufferType,this._activeIndexBuffer))},a.prototype.unbindBuffer=function(b){34962===b?this._activeVertexBuffer=a._bindBuffer(this.gl,null,b,this._activeVertexBuffer):this._activeIndexBuffer=
a._bindBuffer(this.gl,null,b,this._activeIndexBuffer)},a.prototype.bindVAO=function(a){return a?void(this._activeVertexArrayObject&&this._activeVertexArrayObject.id===a.id||(a.bind(),this._activeVertexArrayObject=a)):void(this._activeVertexArrayObject&&(this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null))},a.prototype.getBoundTexture=function(a){return this._textureUnitMap[a]},a.prototype.getBoundFramebufferObject=function(){return this._activeFramebuffer},a.prototype.getBoundVAO=
function(){return this._activeVertexArrayObject},a.prototype.resetState=function(){this.bindProgram(null);this.bindVAO(null);this.bindFramebuffer(null);this.unbindBuffer(34962);this.unbindBuffer(34963);for(var a=0;a<this.parameters.maxTextureImageUnits;a++)this.bindTexture(null,a);this.setBlendingEnabled(!1);this.setBlendFunction(1,0);this.setBlendEquation(32774);this.setBlendColor(0,0,0,0);this.setFaceCullingEnabled(!1);this.setCullFace(1029);this.setFrontFace(2305);this.setPolygonOffsetFillEnabled(!1);
this.setPolygonOffset(0,0);this.setScissorTestEnabled(!1);this.setScissorRect(0,0,this.gl.canvas.width,this.gl.canvas.height);this.setDepthTestEnabled(!1);this.setDepthFunction(513);this.setDepthRange(0,1);this.setStencilTestEnabled(!1);this.setStencilFunction(519,0,0);this.setStencilOp(7680,7680,7680);this.setClearColor(0,0,0,0);this.setClearDepth(1);this.setClearStencil(0);this.setColorMask(!0,!0,!0,!0);this.setStencilWriteMask(4294967295);this.setDepthWriteEnabled(!0);this.setViewport(0,0,this.gl.canvas.width,
this.gl.canvas.height)},a.prototype.enforceState=function(){var a=this.gl,c=this._extensions.vao;c&&c.bindVertexArrayOES(null);for(var d=0;d<this.parameters.maxVertexAttributes;d++)a.disableVertexAttribArray(d);if(this._activeVertexBuffer?a.bindBuffer(this._activeVertexBuffer.bufferType,this._activeVertexBuffer.glName):a.bindBuffer(34962,null),this._activeIndexBuffer?a.bindBuffer(this._activeIndexBuffer.bufferType,this._activeIndexBuffer.glName):a.bindBuffer(34963,null),c&&this._activeVertexArrayObject)(c=
this._activeVertexArrayObject)&&(this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null),this.bindVAO(c);a.bindFramebuffer(a.FRAMEBUFFER,this._activeFramebuffer?this._activeFramebuffer.glName:null);a.useProgram(this._activeShaderProgram?this._activeShaderProgram.glName:null);a.blendColor(this._blendColorState.r,this._blendColorState.g,this._blendColorState.b,this._blendColorState.a);!0===this._blendEnabled?a.enable(this.gl.BLEND):a.disable(this.gl.BLEND);a.blendEquationSeparate(this._blendEquationState.mode,
this._blendEquationState.modeAlpha);a.blendFuncSeparate(this._blendFunctionState.srcRGB,this._blendFunctionState.dstRGB,this._blendFunctionState.srcAlpha,this._blendFunctionState.dstAlpha);a.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a);a.clearDepth(this._clearDepth);a.clearStencil(this._clearStencil);a.colorMask(this._colorMaskState.r,this._colorMaskState.g,this._colorMaskState.b,this._colorMaskState.a);a.cullFace(this._cullFace);a.depthFunc(this._depthFunction);
a.depthRange(this._depthRange.zNear,this._depthRange.zFar);!0===this._depthTestEnabled?a.enable(a.DEPTH_TEST):a.disable(a.DEPTH_TEST);a.depthMask(this._depthWriteEnabled);a.frontFace(this._frontFace);a.lineWidth(this._lineWidth);!0===this._polygonCullingEnabled?a.enable(a.CULL_FACE):a.disable(a.CULL_FACE);a.polygonOffset(this._polygonOffset[0],this._polygonOffset[1]);!0===this._polygonOffsetFillEnabled?a.enable(a.POLYGON_OFFSET_FILL):a.disable(a.POLYGON_OFFSET_FILL);a.scissor(this._scissorRect.x,
this._scissorRect.y,this._scissorRect.width,this._scissorRect.height);!0===this._scissorTestEnabled?a.enable(a.SCISSOR_TEST):a.disable(a.SCISSOR_TEST);a.stencilFunc(this._stencilFunction.func,this._stencilFunction.ref,this._stencilFunction.mask);a.stencilOpSeparate(this._stencilOperation.face,this._stencilOperation.fail,this._stencilOperation.zFail,this._stencilOperation.zPass);!0===this._stencilTestEnabled?a.enable(a.STENCIL_TEST):a.disable(a.STENCIL_TEST);a.stencilMask(this._stencilWriteMask);for(c=
0;c<this.parameters.maxTextureImageUnits;c++)a.activeTexture(b.BASE_TEXTURE_UNIT+c),a.bindTexture(3553,null),(d=this._textureUnitMap[c])&&a.bindTexture(d.descriptor.target,d.glName);a.activeTexture(b.BASE_TEXTURE_UNIT+this._activeTextureUnit);a.viewport(this._viewport.x,this._viewport.y,this._viewport.width,this._viewport.height)},a._bindBuffer=function(a,b,c,d){return b?d===b?d:(a.bindBuffer(c,b.glName),b):(a.bindBuffer(c,null),null)},a._MAX_TEXTURE_IMAGE_UNITS=-1,a}()})},"esri/layers/vectorTiles/views/webgl/enums":function(){define(["require",
"exports"],function(a,d){Object.defineProperty(d,"__esModule",{value:!0});d.BASE_TEXTURE_UNIT=33984})},"esri/layers/vectorTiles/views/webgl/Extensions":function(){define(["require","exports"],function(a,d){return function(){function a(a,b){if(this._vaoInit=!1,this._angleInstancedArraysInit=!1,this._standardDerivativesInit=!1,this._elementIndexUintInit=!1,this._depthTextureInit=!1,this._textureFilterAnisotropicInit=!1,this._shaderTextureLODInit=!1,this._compressedTextureS3TCInit=!1,this._disjointTimerQueryInit=
!1,this._textureFloatInit=!1,this._textureFloatLinearInit=!1,this._colorBufferFloatInit=!1,this._gl=a,b&&b.disabledExtensions){var c=b.disabledExtensions;c.vao&&(this._vao=null,this._vaoInit=!0);c.angleInstancedArrays&&(this._angleInstancedArrays=null,this._angleInstancedArraysInit=!0);c.standardDerivatives&&(this._standardDerivatives=null,this._standardDerivativesInit=!0);c.elementIndexUint&&(this._elementIndexUint=null,this._elementIndexUintInit=!0);c.depthTexture&&(this._depthTexture=null,this._depthTextureInit=
!0);c.textureFilterAnisotropic&&(this._textureFilterAnisotropic=null,this._textureFilterAnisotropicInit=!0);c.compressedTextureS3TC&&(this._compressedTextureS3TC=null,this._compressedTextureS3TCInit=!0);c.shaderTextureLOD&&(this._shaderTextureLOD=null,this._shaderTextureLODInit=!0);c.disjointTimerQuery&&(this._disjointTimerQuery=null,this._disjointTimerQueryInit=!0);c.textureFloat&&(this._textureFloat=null,this._textureFloatInit=!0);c.textureFloatLinear&&(this._textureFloatLinear=null,this._textureFloatLinearInit=
!0);c.colorBufferFloat&&(this._colorBufferFloat=null,this._colorBufferFloatInit=!0)}}return Object.defineProperty(a.prototype,"vao",{get:function(){return this._vaoInit||(this._vao=this._gl.getExtension("OES_vertex_array_object")||this._gl.getExtension("MOZ_OES_vertex_array_object")||this._gl.getExtension("WEBKIT_OES_vertex_array_object"),this._vaoInit=!0),this._vao},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"angleInstancedArrays",{get:function(){return this._angleInstancedArraysInit||
(this._angleInstancedArrays=this._gl.getExtension("ANGLE_instanced_arrays"),this._angleInstancedArraysInit=!0),this._angleInstancedArrays},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"standardDerivatives",{get:function(){return this._standardDerivativesInit||(this._standardDerivatives=this._gl.getExtension("OES_standard_derivatives"),this._standardDerivativesInit=!0),this._standardDerivatives},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"elementIndexUint",
{get:function(){return this._elementIndexUintInit||(this._elementIndexUint=this._gl.getExtension("OES_element_index_uint"),this._elementIndexUintInit=!0),this._elementIndexUint},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"depthTexture",{get:function(){return this._depthTextureInit||(this._depthTexture=this._gl.getExtension("WEBGL_depth_texture")||this._gl.getExtension("MOZ_WEBGL_depth_texture")||this._gl.getExtension("WEBKIT_WEBGL_depth_texture"),this._depthTextureInit=!0),
this._depthTexture},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"textureFilterAnisotropic",{get:function(){return this._textureFilterAnisotropicInit||(this._textureFilterAnisotropic=this._gl.getExtension("EXT_texture_filter_anisotropic")||this._gl.getExtension("MOZ_EXT_texture_filter_anisotropic")||this._gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this._textureFilterAnisotropicInit=!0),this._textureFilterAnisotropic},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,
"shaderTextureLOD",{get:function(){return this._shaderTextureLODInit||(this._shaderTextureLOD=this._gl.getExtension("EXT_shader_texture_lod"),this._shaderTextureLODInit=!0),this._shaderTextureLOD},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"compressedTextureS3TC",{get:function(){return this._compressedTextureS3TCInit||(this._compressedTextureS3TC=this._gl.getExtension("WEBGL_compressed_texture_s3tc"),this._compressedTextureS3TCInit=!0),this._compressedTextureS3TC},enumerable:!0,
configurable:!0}),Object.defineProperty(a.prototype,"disjointTimerQuery",{get:function(){return this._disjointTimerQueryInit||(this._disjointTimerQuery=this._gl.getExtension("EXT_disjoint_timer_query"),this._disjointTimerQueryInit=!0),this._disjointTimerQuery},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"textureFloat",{get:function(){return this._textureFloatInit||(this._textureFloat=this._gl.getExtension("OES_texture_float"),this._textureFloatInit=!0),this._textureFloat},enumerable:!0,
configurable:!0}),Object.defineProperty(a.prototype,"textureFloatLinear",{get:function(){return this._textureFloatLinearInit||(this._textureFloatLinear=this._gl.getExtension("OES_texture_float_linear"),this._textureFloatLinearInit=!0),this._textureFloatLinear},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"colorBufferFloat",{get:function(){return this._colorBufferFloatInit||(this._colorBufferFloat=this._gl.getExtension("EXT_color_buffer_float"),this._colorBufferFloatInit=!0),this._colorBufferFloat},
enumerable:!0,configurable:!0}),a}()})},"esri/layers/vectorTiles/views/webgl/webgl-utils":function(){define([],function(){var a=function(a,b){for(var c=["webgl","experimental-webgl","webkit-3d","moz-webgl"],d=null,f=0;f<c.length;++f){try{d=a.getContext(c[f],b)}catch(g){}if(d)break}return d};return{create3DContext:a,setupWebGL:function(d,b){function c(a){var b=d.parentNode;b&&(b.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+
a+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}if(!window.WebGLRenderingContext)return c('This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'),[null,'This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'];var e=a(d,b);return e?[e]:(c('It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'),
[null,'It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'])},detectWebGL:function(){var d;try{d=window.WebGLRenderingContext}catch(c){d=[!1,0]}var b;try{b=a(document.createElement("canvas"))}catch(c){b=[!1,1]}d?b?(d=b,d=[!0,{VERSION:d.getParameter(d.VERSION),SHADING_LANGUAGE_VERSION:d.getParameter(d.SHADING_LANGUAGE_VERSION),VENDOR:d.getParameter(d.VENDOR),RENDERER:d.getParameter(d.RENDERER),
EXTENSIONS:d.getSupportedExtensions(),MAX_TEXTURE_SIZE:d.getParameter(d.MAX_TEXTURE_SIZE),MAX_RENDERBUFFER_SIZE:d.getParameter(d.MAX_RENDERBUFFER_SIZE),MAX_VERTEX_TEXTURE_IMAGE_UNITS:d.getParameter(d.MAX_VERTEX_TEXTURE_IMAGE_UNITS)}]):d=[!1,1]:d=[!1,0];return d}}})},"esri/layers/vectorTiles/views/2d/engine/webgl/painter/WGLPainter":function(){define(["require","exports"],function(a,d){return function(){function a(){}return a.prototype.initialize=function(a){},a.prototype.update=function(a,b){},a}()})},
"esri/layers/vectorTiles/views/2d/FrameBudget":function(){define(["require","exports","../../core/now"],function(a,d,b){return function(){function a(a){void 0===a&&(a=Number.MAX_VALUE);this._budget=this._begin=0;this.enabled=!0;this.reset(a)}return a.now=function(){return b()},Object.defineProperty(a.prototype,"done",{get:function(){return this.enabled&&this.elapsed>=this._budget},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"elapsed",{get:function(){return b()-this._begin},enumerable:!0,
configurable:!0}),Object.defineProperty(a.prototype,"remaining",{get:function(){return Math.max(this._budget-this.elapsed,0)},enumerable:!0,configurable:!0}),a.prototype.reset=function(a){void 0===a&&(a=Number.MAX_VALUE);this._begin=b();this._budget=this.enabled?a:Number.MAX_VALUE},a}()})},"esri/layers/vectorTiles/views/2d/tiling/TileInfoView":function(){define("require exports ./LODInfo ./TileKey ./TileSpan ./TileCoverage".split(" "),function(a,d,b,c,e,f){var g=function(){function a(a,b,c,d,e,f,
g,h){this.x=a;this.ymin=b;this.ymax=c;this.invM=d;this.leftAdjust=e;this.rightAdjust=f;this.leftBound=g;this.rightBound=h}return a.create=function(b,c){b[1]>c[1]&&(d=[c,b],b=d[0],c=d[1]);var d=b[0],e=b[1],f=c[0],g=c[1],h=f-d,k=g-e,k=0!==k?h/k:0,m=(Math.ceil(e)-e)*k,n=(Math.floor(e)-e)*k;return new a(d,Math.floor(e),Math.ceil(g),k,0>h?m:n,0>h?n:m,0>h?f:d,0>h?d:f);var d},a.prototype.incrRow=function(){this.x+=this.invM},a.prototype.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)},
a.prototype.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)},a}(),h=[[0,0],[0,0],[0,0],[0,0]];return function(){function a(a,c){var d=this;this.tileInfo=a;this.fullExtent=c;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};var e=a.lods.slice();e.sort(function(a,b){return b.scale-a.scale});var f=this._lodInfos=e.map(function(d){return b.create(a,d,c)});e.forEach(function(a,b){d._infoByLevel[a.level]=f[b];d._infoByScale[a.scale]=f[b];d.scales[b]=
a.scale},this);this._wrap=a.isWrappable}return a.prototype.getTileBounds=function(a,b){var c=this._infoByLevel[b.level];return c?c.getTileBounds(a,b):a},a.prototype.getTileCoords=function(a,b){var c=this._infoByLevel[b.level];return c?c.getTileCoords(a,b):a},a.prototype.getTileCoverage=function(a){var b,c,d,k=this.getClosestInfoForScale(a.scale),n=f.pool.acquire(k),t=this._wrap;b=+(1/0);var r=-(1/0),v=n.spans;h[0][0]=h[0][1]=h[1][1]=h[3][0]=0;h[1][0]=h[2][0]=a.size[0];h[2][1]=h[3][1]=a.size[1];for(var w=
0;w<h.length;w++){var x=h[w];a.toMap(x,x);x[0]=k.getColumnForX(x[0]);x[1]=k.getRowForY(x[1])}a=[];x=3;for(w=0;4>w;w++){if(h[w][1]!==h[x][1]){var y=g.create(h[w],h[x]);b=Math.min(y.ymin,b);r=Math.max(y.ymax,r);void 0===a[y.ymin]&&(a[y.ymin]=[]);a[y.ymin].push(y)}x=w}if(null==b||null==r||100<r-b)return null;for(x=[];r>b;){null!=a[b]&&(x=x.concat(a[b]));c=+(1/0);d=-(1/0);for(w=x.length-1;0<=w;w--)y=x[w],c=Math.min(c,y.getLeftCol()),d=Math.max(d,y.getRightCol());if(c=Math.floor(c),d=Math.floor(d),b>=
k.first[1]&&b<=k.last[1])if(t)if(k.size[0]<k.worldSize[0])for(y=Math.floor(d/k.worldSize[0]),w=Math.floor(c/k.worldSize[0]);y>=w;w++)v.push(new e(b,Math.max(k.getFirstColumnForWorld(w),c),Math.min(k.getLastColumnForWorld(w),d)));else v.push(new e(b,c,d));else c>k.last[0]||d<k.first[0]||(c=Math.max(c,k.first[0]),d=Math.min(d,k.last[0]),v.push(new e(b,c,d)));b+=1;for(w=x.length-1;0<=w;w--)y=x[w],y.ymax>=b?y.incrRow():x.splice(w,1)}return n},a.prototype.getTileIdAtParent=function(a,b){var d=c.pool.acquire(b),
e=this._infoByLevel[d.level];if(a.resolution<e.resolution)throw Error("Cannot calculate parent tile. destination LOD's resolution "+a.resolution+" is not a parent resolution of "+e.resolution);return a.resolution===e.resolution?d.id:c.getId(a.level,Math.floor(d.row*e.resolution/a.resolution+.01),Math.floor(d.col*e.resolution/a.resolution+.01),d.world)},a.prototype.getTileParentId=function(a){a=c.pool.acquire(a);var b=this._lodInfos.indexOf(this._infoByLevel[a.level])-1;if(0>b)return c.pool.release(a),
null;b=this.getTileIdAtParent(this._lodInfos[b],a);return c.pool.release(a),b},a.prototype.getTileResolution=function(a){return(a=this._infoByLevel[a.level])?a.resolution:-1},a.prototype.getTileScale=function(a){return(a=this._infoByLevel[a.level])?a.scale:-1},a.prototype.intersects=function(a,b){var d=c.pool.acquire(b),e=this._infoByLevel[d.level],f=a.lodInfo;if(f.resolution>e.resolution){var g=c.pool.acquire(this.getTileIdAtParent(f,d)),h=f.denormalizeCol(g.col,g.world),k=a.spans.some(function(a){return a.row===
g.row&&a.colFrom<=h&&a.colTo>=h});return c.pool.release(d),c.pool.release(g),k}if(f.resolution<e.resolution){var m=a.spans.reduce(function(a,b){return a[0]=Math.min(a[0],b.row),a[1]=Math.max(a[1],b.row),a[2]=Math.min(a[2],b.colFrom),a[3]=Math.max(a[3],b.colTo),a},[+(1/0),-(1/0),+(1/0),-(1/0)]),k=m[0],n=m[1],x=m[2],m=m[3],y=e.denormalizeCol(d.col,d.world),z=f.getColumnForX(e.getXForColumn(y)),A=f.getRowForY(e.getYForRow(d.row)),y=f.getColumnForX(e.getXForColumn(y+1))-1,e=f.getRowForY(e.getYForRow(d.row+
1))-1;return c.pool.release(d),!(z>m||x>y||A>n||k>e)}var B=f.denormalizeCol(d.col,d.world),k=a.spans.some(function(a){return a.row===d.row&&a.colFrom<=B&&a.colTo>=B});return c.pool.release(d),k},a.prototype.getClosestInfoForScale=function(a){var b=this.scales;return this._infoByScale[a]?this._infoByScale[a]:(a=b.reduce(function(b,c,d,e){return Math.abs(c-a)<Math.abs(b-a)?c:b},b[0]),this._infoByScale[a])},a}()})},"esri/layers/vectorTiles/views/2d/tiling/LODInfo":function(){define(["require","exports",
"./TileKey","../../../geometry/support/spatialReferenceUtils"],function(a,d,b,c){function e(a,b,c){return a[0]=b,a[1]=c,a}return function(){function a(a,b,c,d,e,f,l,p,u,t,r,v){this.level=a;this.resolution=b;this.scale=c;this.origin=d;this.first=e;this.last=f;this.size=l;this.norm=p;this.worldStart=u;this.worldEnd=t;this.worldSize=r;this.wrap=v}return a.create=function(b,d,f){var g=c.getInfo(b.spatialReference),h=[b.origin.x,b.origin.y],n=[b.size[0]*d.resolution,b.size[1]*d.resolution],l=[-(1/0),-(1/
0)],p=[+(1/0),+(1/0)],u=[+(1/0),+(1/0)];f&&(e(l,Math.max(0,Math.floor((f.xmin-h[0])/n[0])),Math.max(0,Math.floor((h[1]-f.ymax)/n[1]))),e(p,Math.max(0,Math.floor((f.xmax-h[0])/n[0])),Math.max(0,Math.floor((h[1]-f.ymin)/n[1]))),e(u,p[0]-l[0]+1,p[1]-l[1]+1));var t,r,v,w;return b.isWrappable?(t=[Math.ceil(Math.round(2*g.origin[1]/d.resolution)/b.size[0]),u[1]],r=[Math.floor((g.origin[0]-h[0])/n[0]),l[1]],v=[t[0]+r[0]-1,p[1]],w=!0):(r=l,v=p,t=u,w=!1),new a(d.level,d.resolution,d.scale,h,l,p,u,n,r,v,t,
w)},a.prototype.normalizeCol=function(a){if(!this.wrap)return a;var b=this.worldSize[0];return 0>a?b-1-Math.abs((a+1)%b):a%b},a.prototype.denormalizeCol=function(a,b){return this.wrap?this.worldSize[0]*b+a:a},a.prototype.getWorldForColumn=function(a){return this.wrap?Math.floor(a/this.worldSize[0]):0},a.prototype.getFirstColumnForWorld=function(a){return a*this.worldSize[0]+this.first[0]},a.prototype.getLastColumnForWorld=function(a){return a*this.worldSize[0]+this.first[0]+this.size[0]-1},a.prototype.getColumnForX=
function(a){return(a-this.origin[0])/this.norm[0]},a.prototype.getXForColumn=function(a){return this.origin[0]+a*this.norm[0]},a.prototype.getRowForY=function(a){return(this.origin[1]-a)/this.norm[1]},a.prototype.getYForRow=function(a){return this.origin[1]-a*this.norm[1]},a.prototype.getTileBounds=function(a,c){var d=b.pool.acquire(c),e=this.denormalizeCol(d.col,d.world),f=d.row,g=this.getXForColumn(e),h=this.getYForRow(f+1),e=this.getXForColumn(e+1),f=this.getYForRow(f);return a[0]=g,a[1]=h,a[2]=
e,a[3]=f,b.pool.release(d),a},a.prototype.getTileCoords=function(a,c){var d=b.pool.acquire(c);return e(a,this.getXForColumn(this.denormalizeCol(d.col,d.world)),this.getYForRow(d.row)),b.pool.release(d),a},a}()})},"esri/layers/vectorTiles/views/2d/tiling/TileSpan":function(){define(["require","exports","../../../core/ObjectPool"],function(a,d,b){return function(){function a(a,b,c){this.row=a;this.colFrom=b;this.colTo=c}return a.pool=new b(a,!0),a}()})},"esri/layers/vectorTiles/views/2d/tiling/TileCoverage":function(){define(["require",
"exports","../../../core/ObjectPool","../../../core/ArrayPool","./TileSpan"],function(a,d,b,c,e){return function(){function a(a){this.lodInfo=a;this.spans=c.acquire()}return a.prototype.release=function(){for(var a=0,b=this.spans;a<b.length;a++)e.pool.release(b[a]);c.release(this.spans)},a.prototype.forEach=function(a,b){var c=this.spans,d=this.lodInfo,e=d.level;if(0!==c.length)for(var f=0;f<c.length;f++)for(var g=c[f],h=g.row,u=g.colTo,g=g.colFrom;u>=g;g++)a.call(b,e,h,d.normalizeCol(g),d.getWorldForColumn(g))},
a.pool=new b(a,!0),a}()})},"esri/layers/vectorTiles/core/ArrayPool":function(){define(["require","exports","./ObjectPool"],function(a,d,b){function c(a){a.length=0}var e=Array.prototype.splice;a=function(){function a(a,d){void 0===a&&(a=50);void 0===d&&(d=50);this._pool=new b(Array,!1,c,d,a)}return a.prototype.acquire=function(){return this._pool.acquire()},a.prototype.copy=function(a){var b=this.acquire();return a.unshift(0,0),e.apply(b,a),a.splice(0,2),b},a.prototype.release=function(a){this._pool.release(a)},
a.acquire=function(){return f.acquire()},a.copy=function(a){return f.copy(a)},a.release=function(a){return f.release(a)},a}();var f=new a(100);return a})},"esri/layers/vectorTiles/views/2d/tiling/TileStrategy":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./TileKey"],function(a,d,b,c){var e=new c(0,0,0,0),f=new Map,g=[],h=[];return function(){function a(a){this._previousResolution=Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.tileIndex=new Map;this.tiles=
[];this.acquireTile=a.acquireTile;this.releaseTile=a.releaseTile;this.tileInfoView=a.tileInfoView;a.cachePolicy&&(this.cachePolicy=a.cachePolicy)}return a.prototype.destroy=function(){this.tileIndex.clear()},a.prototype.update=function(a){var b=this,c=this.tileIndex,d=this.tileInfoView.getTileCoverage(a.state);if(d){var k=d.spans,n=d.lodInfo,t=n.level,r=a.state.resolution,v=!a.stationary&&r>this._previousResolution;this._previousResolution=r;c.forEach(function(a){return a.visible=!0});this.tiles.length=
0;f.clear();var w=0,x=0;if(0<k.length)for(var y=0;y<k.length;y++){a=k[y];for(var z=a.row,A=a.colTo,B=a.colFrom;A>=B;B++)w++,a=e.set(t,z,n.normalizeCol(B),n.getWorldForColumn(B)).id,c.has(a)?(r=c.get(a),r.attached?(f.set(a,r),x++):r.attached||v||this._addParentTile(a,f)):(r=this.acquireTile(e),this.tileIndex.set(a,r),v||this._addParentTile(a,f))}var H=x===w;h.length=0;g.length=0;c.forEach(function(a,c){if(e.set(c),!f.has(c)){var k=b.tileInfoView.intersects(d,e);!k||!v&&H?"purge"===b.cachePolicy?g.push(c):
(e.level>t||!k)&&g.push(c):a.attached?h.push(c):v&&g.push(c)}});for(k=0;k<h.length;k++)a=h[k],(r=c.get(a))&&r.attached&&f.set(a,r);for(k=0;k<g.length;k++)a=g[k],r=c.get(a),this.releaseTile(r),c["delete"](a);f.forEach(function(a){return b.tiles.push(a)});c.forEach(function(a){f.has(a.key.id)||(a.visible=!1)});h.length=0;g.length=0;f.clear()}},a.prototype.clear=function(){var a=this,b=this.tileIndex;b.forEach(function(b){a.releaseTile(b)});b.clear()},a.prototype._addParentTile=function(a,b){for(var c=
a,d=null;c=this.tileInfoView.getTileParentId(c),c;)if(this.tileIndex.has(c)&&(d=this.tileIndex.get(c),d&&d.attached)){b.has(d.key.id)||b.set(d.key.id,d);break}},a}()})},"esri/layers/vectorTiles/views/2d/tiling/TileQueue":function(){define(["require","exports","../../../core/QueueProcessor"],function(a,d,b){function c(a,b){return a.length=0,b.forEach(function(b){return a.push(b)}),a}var e=new Set,f=[],g=new Map;return function(){function a(a){var c=this;this.tileInfoView=a.tileInfoView;this._queue=
new b({concurrency:6,process:a.process,peeker:function(a){return c._peek(a)}})}return Object.defineProperty(a.prototype,"length",{get:function(){return this._queue.length},enumerable:!0,configurable:!0}),a.prototype.clear=function(){this._queue.clear()},a.prototype.find=function(a,b){return this._queue.find(a)},a.prototype.has=function(a){return this._queue.has(a)},a.prototype.pause=function(){return this._queue.pause()},a.prototype.push=function(a){return this._queue.push(a)},a.prototype.reset=function(){return this._queue.reset()},
a.prototype.resume=function(){return this._queue.resume()},a.prototype._peek=function(a){var b=this;if(!this.state)return a[0];var d=this.tileInfoView,h=Number.NEGATIVE_INFINITY,l=Number.POSITIVE_INFINITY;a.forEach(function(a){var c=b.tileInfoView.getTileScale(a);g.has(c)||(g.set(c,[]),h=Math.max(c,h),l=Math.min(c,l));g.get(c).push(a);e.add(c)});var n=this.state.scale;g.has(n)||(c(f,e),f.sort(),n=f.reduce(function(a,b,c,d){return Math.abs(b-n)<Math.abs(a-n)?b:a},f[0]));n=Math.min(n,h);n=Math.max(n,
l);a=g.get(n);var u=d.getClosestInfoForScale(n),t=u.getColumnForX(this.state.center[0]),r=u.getRowForY(this.state.center[1]);return a.sort(function(a,b){var c=u.denormalizeCol(a.col,a.world),d=u.denormalizeCol(b.col,b.world);return Math.sqrt((t-c)*(t-c)+(r-a.row)*(r-a.row))-Math.sqrt((t-d)*(t-d)+(r-b.row)*(r-b.row))}),e.clear(),g.clear(),a[0]},a}()})},"esri/layers/vectorTiles/core/QueueProcessor":function(){define(["require","exports","dojo/Deferred","./Queue"],function(a,d,b,c){var e={};return function(){function a(a){this._apiPromises=
new Map;this._resolvingPromises=new Map;this._isPaused=!1;this.concurrency=1;a.concurrency&&(this.concurrency=a.concurrency);this._queue=new c(a.peeker?{peeker:a.peeker}:void 0);this.process=a.process}return Object.defineProperty(a.prototype,"length",{get:function(){return this._resolvingPromises.size+this._queue.length},enumerable:!0,configurable:!0}),a.prototype.clear=function(){this._queue.clear();var a=[];this._resolvingPromises.forEach(function(b){return a.push(b)});this._resolvingPromises.clear();
a.forEach(function(a){return a.cancel()});a.length=0;this._apiPromises.forEach(function(b){return a.push(b)});this._apiPromises.clear();a.forEach(function(a){return a.cancel()})},a.prototype.find=function(a,b){var c=this,d=void 0;return this._apiPromises.forEach(function(e,f){a.call(b,f)&&(d=c._apiPromises.get(f).promise)}),d},a.prototype.has=function(a){return this._apiPromises.has(a)},a.prototype.pause=function(){this._isPaused=!0},a.prototype.push=function(a){var c=this;if(this._apiPromises.has(a))return this._apiPromises.get(a).promise;
var d=new b(function(b){c._resolvingPromises.has(a)?c._resolvingPromises.get(a).cancel(b):(c._remove(a),c._scheduleNext())});return this._add(a,d),this._scheduleNext(),d.promise},a.prototype.reset=function(){var a=[];this._resolvingPromises.forEach(function(b){return a.push(b)});this._resolvingPromises.clear();a.forEach(function(a){return a.cancel(e)})},a.prototype.resume=function(){this._isPaused=!1;this._scheduleNext()},a.prototype._scheduleNext=function(){this._isPaused||this._next()},a.prototype._next=
function(){this._resolvingPromises.size!==this.concurrency&&this._process(this._queue.pop())},a.prototype._process=function(a){var b=this;if(null!=a){var c=this._apiPromises.get(a),d=this.process(a);d&&"function"==typeof d.then?(this._resolvingPromises.set(a,d),d.then(function(d){c.resolve(d);b._remove(a);b._scheduleNext()},function(d){d===e?b._process(a):(c.reject(d),b._remove(a),b._scheduleNext())})):(c.resolve(d),this._remove(a));this._scheduleNext()}},a.prototype._add=function(a,b){this._apiPromises.set(a,
b);this._queue.push(a)},a.prototype._remove=function(a){this._queue.remove(a);this._apiPromises["delete"](a);this._resolvingPromises["delete"](a)},a}()})},"esri/layers/vectorTiles/core/Queue":function(){define(["require","exports"],function(a,d){return function(){function a(a){this._items=[];this._itemSet=new Set;this._peeker=function(a){return a[0]};this._length=0;a&&a.peeker&&(this._peeker=a.peeker)}return Object.defineProperty(a.prototype,"length",{get:function(){return this._length},enumerable:!0,
configurable:!0}),a.prototype.clear=function(){this._itemSet.clear();this._length=this._items.length=0},a.prototype.peek=function(){return 0!==this._length?this._peeker(this._items):void 0},a.prototype.push=function(a){this.contains(a)||this._add(a)},a.prototype.contains=function(a){return 0<this._length&&this._itemSet.has(a)},a.prototype.pop=function(){if(0!==this._length){var a=this.peek();return this._remove(a),a}},a.prototype.remove=function(a){this.contains(a)&&this._remove(a)},a.prototype._add=
function(a){this._items.push(a);this._itemSet.add(a);this._length++},a.prototype._remove=function(a){this._itemSet["delete"](a);this._items.splice(this._items.indexOf(a),1);this._length--},a}()})},"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/backgroundShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"backgroundVS"\x3e\r\n    \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n    attribute vec2 a_pos;\r\n\r\n  #ifdef ID\r\n    uniform mediump vec4 u_id;\r\n    varying mediump vec4 v_id;\r\n  #endif // ID\r\n\r\n    uniform highp mat4 u_transformMatrix;\r\n    uniform mediump vec2 u_normalized_origin;\r\n    uniform mediump float u_coord_range;\r\n    uniform mediump float u_depth;\r\n\r\n  #ifdef PATTERN\r\n    uniform mediump mat3 u_pattern_matrix; // can we use medium precision?\r\n    varying mediump vec2 v_tileTextureCoord;\r\n  #endif // PATTERN\r\n\r\n    void main() {\r\n      gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(u_coord_range * a_pos, 0.0, 1.0);\r\n\r\n  #ifdef PATTERN\r\n      // calculate the texture coordinates of the current vertex. It will of course get interpolated.\r\n      // The pattern matrix is a 3x3 scale matrix which \'tiles\' the texture inside the tile, translating from tile coordinates\r\n      v_tileTextureCoord \x3d (u_pattern_matrix * vec3(a_pos, 1.0)).xy;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n      v_id \x3d u_id / 255.0;\r\n  #endif // ID\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"backgroundFS"\x3e\r\n    \x3c![CDATA[\r\n  #ifdef PATTERN\r\n    uniform lowp float u_opacity;\r\n    uniform mediump vec2 u_pattern_tl;\r\n    uniform mediump vec2 u_pattern_br;\r\n    uniform sampler2D u_texture;\r\n\r\n    varying mediump vec2 v_tileTextureCoord;\r\n  #else\r\n    uniform lowp vec4 u_color;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n    varying mediump vec4 v_id;\r\n  #endif // ID\r\n\r\n    void main() {\r\n  #ifdef PATTERN\r\n      // normalize the calculated texture coordinate such that it fits in the range of 0 to 1.\r\n      mediump vec2 normalizedTextureCoord \x3d mod(v_tileTextureCoord, 1.0);\r\n\r\n      // interpolate the image coordinate between the top-left and the bottom right to get the actual position to sample.\r\n      // after normalizing the position, we get a value ranging between 0 and 1 which refers to the entire texture, however\r\n      // we need to only sample from area that has our sprite in the mosaic.\r\n      mediump vec2 samplePos \x3d mix(u_pattern_tl, u_pattern_br, normalizedTextureCoord);\r\n\r\n      // sample the sprite mosaic\r\n      lowp vec4 color \x3d texture2D(u_texture, samplePos);\r\n      gl_FragColor \x3d u_opacity * color;\r\n  #else\r\n      gl_FragColor \x3d u_color;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n      if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n        discard;\r\n      }\r\n      gl_FragColor \x3d v_id;\r\n  #endif // ID\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/fillShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"fillVS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      attribute vec2 a_pos;\r\n\r\n      uniform highp mat4 u_transformMatrix;\r\n      uniform highp vec2 u_normalized_origin;\r\n      uniform mediump float u_depth;\r\n\r\n    #ifdef PATTERN\r\n      uniform mediump mat3 u_pattern_matrix;\r\n      varying mediump vec2 v_tileTextureCoord;\r\n    #endif // PATTERN\r\n\r\n    #ifdef ID\r\n      uniform mediump vec4 u_id;\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n    #ifdef DD\r\n      attribute vec4 a_color;\r\n    #else\r\n      uniform lowp vec4 u_color;\r\n    #endif // DD\r\n      varying lowp vec4 v_color;\r\n\r\n      void main()\r\n      {\r\n      #ifdef DD\r\n        v_color \x3d a_color;\r\n      #else\r\n        v_color \x3d u_color;\r\n      #endif // DD\r\n\r\n      #ifdef ID\r\n        v_id \x3d u_id / 255.0;\r\n      #endif // ID\r\n\r\n      #ifdef PATTERN\r\n        // calculate the texture coordinates of the current vertex. It will of course get interpolated.\r\n        // The pattern matrix is a 3x3 scale matrix which \'tiles\' the texture inside the tile, translating from tile coordinates\r\n        // (-4k to 8k -1) to texture coordinates.\r\n        v_tileTextureCoord \x3d (u_pattern_matrix * vec3(a_pos, 1.0)).xy;\r\n      #endif // PATTERN\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0, 1.0);\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillFS"\x3e\r\n    \x3c![CDATA[\r\n      precision lowp float;\r\n\r\n    #ifdef PATTERN\r\n      uniform mediump vec2 u_pattern_tl;\r\n      uniform mediump vec2 u_pattern_br;\r\n      uniform lowp sampler2D u_texture;\r\n      varying mediump vec2 v_tileTextureCoord;\r\n    #endif // PATTERN\r\n\r\n    #ifdef ID\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      varying lowp vec4 v_color;\r\n\r\n      vec4 mixColors(vec4 color1, vec4 color2) {\r\n        // perform un-premultiplied over operator (see https://en.wikipedia.org/wiki/Alpha_compositing#Alpha_blending)\r\n        // we use pre-multiplied colors hence the need for this kind of mixing. At lease we save ourselves an extra division...\r\n        float compositeAlpha \x3d color2.a + color1.a * (1.0 - color2.a);\r\n        vec3 compositeColor \x3d color2.rgb + color1.rgb * (1.0 - color2.a);\r\n\r\n        return vec4(compositeColor, compositeAlpha);\r\n      }\r\n      void main()\r\n      {\r\n      #ifdef PATTERN\r\n        // normalize the calculated texture coordinate such that it fits in the range of 0 to 1.\r\n        mediump vec2 normalizedTextureCoord \x3d mod(v_tileTextureCoord, 1.0);\r\n\r\n        // interpolate the image coordinate between the top-left and the bottom right to get the actual position to sample.\r\n        // after normalizing the position, we get a value ranging between 0 and 1 which refers to the entire texture, however\r\n        // we need to only sample from area that has our sprite in the mosaic.\r\n        mediump vec2 samplePos \x3d mix(u_pattern_tl, u_pattern_br, normalizedTextureCoord);\r\n\r\n        // sample the sprite mosaic\r\n        lowp vec4 color \x3d texture2D(u_texture, samplePos);\r\n        gl_FragColor \x3d v_color[3] * color;\r\n      #else\r\n        gl_FragColor \x3d v_color;\r\n      #endif // PATTERN\r\n\r\n      #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n      #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/outlineShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"outlineVS"\x3e\r\n    \x3c![CDATA[\r\n      attribute vec2 a_pos;\r\n      attribute vec2 a_offset;\r\n      attribute vec2 a_xnormal;\r\n\r\n    #ifdef DD\r\n      attribute vec4 a_color;\r\n    #else\r\n      uniform lowp vec4 u_color;\r\n    #endif // DD\r\n      varying lowp vec4 v_color;\r\n\r\n    #ifdef ID\r\n      uniform mediump vec4 u_id;\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      uniform highp mat4 u_transformMatrix;\r\n      uniform highp mat4 u_extrudeMatrix;\r\n      uniform highp vec2 u_normalized_origin;\r\n      uniform mediump float u_depth;\r\n      uniform mediump float u_outline_width;\r\n\r\n      varying lowp vec2 v_normal;\r\n\r\n      const float scale \x3d 1.0 / 15.0;\r\n\r\n      void main()\r\n      {\r\n      #ifdef DD\r\n        v_color \x3d a_color;\r\n      #else\r\n        v_color \x3d u_color;\r\n      #endif // DD\r\n\r\n      #ifdef ID\r\n        v_id \x3d u_id / 255.0;\r\n      #endif // ID\r\n\r\n        v_normal \x3d a_xnormal;\r\n\r\n        // calculate the relative distance from the centerline to the edge of the line. Since offset is given in integers (for the\r\n        // sake of using less attribute memory, we need to scale it back to the original range of ~ 0: 1)\r\n        mediump vec4 dist \x3d vec4(u_outline_width * a_offset * scale, 0.0, 0.0);\r\n\r\n        // Remove the texture normal bit of the position before scaling it with the\r\n        // model/view matrix. Add the extrusion vector *after* the model/view matrix\r\n        // because we\'re extruding the line in pixel space, regardless of the current\r\n        // tile\'s zoom level.\r\n        gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * dist;\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"outlineFS"\x3e\r\n    \x3c![CDATA[\r\n      varying lowp vec4 v_color;\r\n      varying mediump vec2 v_normal;\r\n\r\n    #ifdef ID\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      void main()\r\n      {\r\n        // Calculate the distance of the pixel from the line in pixels.\r\n        lowp float dist \x3d abs(v_normal.y);\r\n\r\n        lowp float alpha \x3d smoothstep(1.0, 0.0, dist);\r\n        gl_FragColor \x3d alpha * v_color;\r\n\r\n      #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n      #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/lineShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"lineVS"\x3e\r\n    \x3c![CDATA[\r\n      /* The implementation of the renderer is based on the article and implementation of MB described here:\r\n      * https://www.mapbox.com/blog/drawing-antialiased-lines/\r\n      */\r\n\r\n      attribute vec2 a_pos;\r\n      attribute vec4 a_offsetAndNormal;\r\n      attribute vec2 a_accumulatedDistance;\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n\r\n      uniform mediump float u_blur; // the feather distance at which the line edge fades out\r\n\r\n      // the z of the layer. Given by the order of the layers in the style\r\n      uniform mediump float u_depth;\r\n\r\n      // the interpolated normal to the line. the information is packed into the two LSBs of the vertex coordinate\r\n      varying mediump vec2 v_normal;\r\n\r\n      // the accumulated distance along the line. We need this information in order to render the dashes.\r\n      varying highp float v_accumulatedDistance;\r\n\r\n      const float scale \x3d 1.0 / 31.0;\r\n\r\n    #ifdef DD\r\n      attribute vec4 a_color;\r\n      attribute mediump float a_width;\r\n    #else\r\n      uniform lowp vec4 u_color;\r\n      uniform mediump float u_width;\r\n    #endif // DD\r\n\r\n    #ifdef ID\r\n      uniform mediump vec4 u_id;\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      varying lowp vec4 v_color;\r\n      varying mediump float v_lineHalfWidth; // the inset and outset of the line\r\n\r\n    #ifndef PATTERN\r\n      uniform mediump vec2 u_dasharray;\r\n      varying mediump vec2 v_dasharray;\r\n    #endif\r\n\r\n      void main()\r\n      {\r\n        v_normal \x3d a_offsetAndNormal.zw * scale;\r\n\r\n      #ifdef DD\r\n        v_lineHalfWidth \x3d a_width + u_blur;\r\n      #else\r\n        v_lineHalfWidth \x3d u_width + u_blur;\r\n      #endif // DD\r\n\r\n        v_lineHalfWidth *\x3d 0.5;\r\n\r\n      #ifndef PATTERN\r\n      #ifdef DD\r\n        v_dasharray \x3d u_dasharray * a_width;\r\n      #else\r\n        v_dasharray \x3d u_dasharray * u_width;\r\n      #endif // DD\r\n      #endif\r\n\r\n        // calculate the relative distance from the centerline to the edge of the line. Since offset is given in integers (for the\r\n        // sake of using less attribute memory, we need to scale it back to the original range of ~ 0: 1)\r\n        mediump vec2 dist \x3d v_lineHalfWidth * a_offsetAndNormal.xy * scale;\r\n\r\n        // transform the vertex\r\n        gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * vec4(dist, 0.0, 0.0);\r\n\r\n        // the accumulated distance will be used to calculate the dashes (or the no-data...)\r\n        v_accumulatedDistance \x3d a_accumulatedDistance.x;\r\n\r\n        #ifdef DD\r\n          v_color \x3d a_color;\r\n        #else\r\n          v_color \x3d u_color;\r\n        #endif // DD\r\n\r\n        #ifdef ID\r\n          v_id \x3d u_id / 255.0;\r\n        #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineFS"\x3e\r\n    \x3c![CDATA[\r\n      uniform mediump float u_blur;\r\n\r\n      varying mediump vec2 v_normal;\r\n      varying highp float v_accumulatedDistance;\r\n\r\n      varying mediump float v_lineHalfWidth;\r\n      varying lowp vec4 v_color;\r\n\r\n    #ifdef PATTERN\r\n      uniform mediump vec2 u_pattern_tl;\r\n      uniform mediump vec2 u_pattern_br;\r\n      uniform mediump vec2 u_spriteSize;\r\n      uniform sampler2D u_texture;\r\n\r\n      // Horizontal scale is used to scale the horizontal texture coordinate v_normal.x before adding it as an offset to the\r\n      // accumulated distance. Most vertices will have v_normal.x \x3d\x3d 0, because the pattern must be sampled only depending on\r\n      // the v_accumulatedDistance value. But tessellation at caps can have vertices with v_normal.x !\x3d 0, thus allowing to\r\n      // "keep moving" for a few more pixel even when the line has ended or has not started yet.\r\n      const mediump float tileCoordRatio \x3d 8.0;\r\n    #else\r\n      varying mediump vec2 v_dasharray;\r\n    #endif\r\n\r\n    #ifdef ID\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      void main()\r\n      {\r\n        // dist represent the distance of the fragment from the line. 1.0 or -1.0 will be the values on the edge of the line,\r\n        // and any value in between will be inside the line (the sign represent the direction - right or left).\r\n        // since u_linewidth.s (half line width) is represented in pixels, dist is also given in pixels\r\n        mediump float fragDist \x3d length(v_normal) * v_lineHalfWidth;\r\n\r\n        // calculate the alpha given the difference between the line-width and the distance of the fragment from the center-line.\r\n        // We need to count for both sides of the line.\r\n        lowp float alpha \x3d clamp(min(fragDist + u_blur + 1.0, v_lineHalfWidth - fragDist) / u_blur, 0.0, 1.0);\r\n\r\n      #ifdef PATTERN\r\n        // we need to calculate the relative portion of the line texture along the line given the accumulated distance aliong the line\r\n        // The computed value should is anumber btween 0 and 1 which will later be used to interpolate btween the BR and TL values\r\n        mediump float relativeTexX \x3d mod((v_accumulatedDistance + v_normal.x * v_lineHalfWidth * tileCoordRatio) / u_spriteSize.x, 1.0);\r\n\r\n        // in order to calculate the texture coordinates perpendicular to the line (Y axis), we use the interpolated normal values\r\n        // which range from -1.0 to 1.0. On the line\'s centerline, the value of the interpolated normal is 0.0, however the relative\r\n        // texture value should be 0.5 (given that at the bottom of the line, the texture coordinate must be equal to 0.0)\r\n        // (TL) ---------------------------      --\x3e left edge of line. Interpolated normal is 1.0\r\n        //              | -\x3e line-width / 2\r\n        //      - - - - - - - - - - - - - -\r\n        //              | -\x3e line-width / 2\r\n        //      ---------------------------- (BR)--\x3e right edge of line. Interpolated normal is -1.0\r\n\r\n        mediump float relativeTexY \x3d 0.5 + (v_normal.y * v_lineHalfWidth / u_spriteSize.y);\r\n\r\n        // claculate the actual texture coordinates by interpolating between the TL/BR pattern coordinates\r\n        mediump vec2 texCoord \x3d mix(u_pattern_tl, u_pattern_br, vec2(relativeTexX, relativeTexY));\r\n\r\n        // get the color from the texture\r\n        lowp vec4 color \x3d texture2D(u_texture, texCoord);\r\n\r\n        // finally write the fragment value\r\n        gl_FragColor \x3d alpha * v_color[3] * color;\r\n      #else\r\n        // now calculate the dashes given the accumulated distance of the line:\r\n        // start with calculating a normalized position along the line\r\n        lowp float dashPos \x3d  mod(v_accumulatedDistance, v_dasharray.x + v_dasharray.y);\r\n\r\n        // calculate the contribution to the alpha of the dash part. It is provided by the shortest portion of the position along the dash.\r\n        // we must clamp since the value might be bigger than 1 or smaller than zero (when over a dash).\r\n        //   | \x3c--- pos along the dash part\r\n        // -------_______-------_______\r\n        // when the dashPos is over the \'gap\' part of the dash dasharray.x - dashPos is negative and therefore the alpha will\r\n        // get clamped to zero.\r\n        // when dasharray.x - dashPos is positive, or when dashPos is smaller than 1.0, it gives us a soft edge to each dash part.\r\n        // along the direction of the line.\r\n        lowp float dashAlpha \x3d clamp(min(dashPos, v_dasharray.x - dashPos) + 0.5, 0.0, 1.0);\r\n\r\n        // if we don\'t have a no-data part to the dash then it is a solid line\r\n        dashAlpha \x3d max(sign(-v_dasharray.y), dashAlpha);\r\n        // finally multiply the fragment\'s alpha by the calculated dash-alpha\r\n        alpha *\x3d dashAlpha;\r\n\r\n        // output the fragment color\r\n        gl_FragColor \x3d alpha * v_color;\r\n      #endif // PATTERN\r\n\r\n      #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n      #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/iconShaders.xml":"\x3c?xml version\x3d\"1.0\" encoding\x3d\"UTF-8\"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d\"myShaderVS\"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link module:esri/views/vectorTiles/renderers/vtShaderSnippets vtShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require(\"dojo/text!...\").\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d\"rgba2floatFunc\"\x3e\r\n    \x3c![CDATA[\r\n    float rgba2float(vec4 rgba) {\r\n      return dot(rgba,  vec4(1.0/16777216.0, 1.0/65535.0, 1.0/256.0, 1.0));\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d\"iconVS\"\x3e\r\n    \x3c![CDATA[\r\n      attribute vec2 a_pos;\r\n      attribute vec2 a_vertexOffset;\r\n      attribute vec4 a_tex;\r\n      attribute vec4 a_levelInfo;\r\n\r\n    #ifdef DD\r\n      attribute vec4 a_color;\r\n      attribute mediump float a_size;\r\n    #else\r\n      uniform lowp vec4 u_color;\r\n      uniform mediump float u_size;\r\n    #endif // DD\r\n\r\n    #ifdef ID\r\n      uniform mediump vec4 u_id;\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      varying lowp vec4 v_color;\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile's upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n\r\n      // the extrude matrix which is responsible for the 'anti-zoom' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n\r\n      // u_normalized_origin is the tile's upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n\r\n      // the size of the mosaic given in pixels\r\n      uniform vec2 u_mosaicSize;\r\n\r\n      // the z of the layer. Given by the order of the layers in the style\r\n      uniform mediump float u_depth;\r\n\r\n      // the map's rotation from the north\r\n      uniform mediump float u_mapRotation;\r\n      uniform mediump float u_level;\r\n\r\n      // indicate whether the current set of iconst should be kept upright when the map is rotated\r\n      uniform lowp float u_keepUpright;\r\n\r\n      // the rate of the change in the opacity (fade) of the icons\r\n      uniform mediump float u_fadeSpeed;\r\n\r\n      // the low level we transition (to/from)\r\n      uniform mediump float u_minfadeLevel;\r\n\r\n      // the high level we transition (to/from)\r\n      uniform mediump float u_maxfadeLevel;\r\n\r\n      // the amount of fade given teh current time past the last recorded level\r\n      uniform mediump float u_fadeChange;\r\n\r\n      // the opacity of the layer given by the painter\r\n      uniform mediump float u_opacity;\r\n\r\n      // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n      varying mediump vec2 v_tex;\r\n\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n      varying mediump vec2 v_size;\r\n\r\n      // the vertex offsets are given in integers, therefore in order to maintain a reasonable precision we multiply the values\r\n      // by 16 and then at the shader devide by the same number\r\n      const float C_OFFSET_PRECISION \x3d 1.0 / 32.0;\r\n\r\n      const float C_256_TO_RAD \x3d 3.14159265359 / 128.0;\r\n      const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n      const float tileCoordRatio \x3d 1.0 / 8.0;\r\n\r\n      void main()\r\n      {\r\n        mediump float a_labelMinLevel \x3d a_levelInfo[0];\r\n        mediump float a_angle         \x3d a_levelInfo[1];\r\n        mediump float a_minLevel      \x3d a_levelInfo[2];\r\n        mediump float a_maxLevel      \x3d a_levelInfo[3];\r\n\r\n        // if the given vertex should not be visible simply clip it by adding it a value that will push it outside the clipping plane\r\n        mediump float delta_z \x3d 0.0;\r\n\r\n        // If the label rotates with the map, and if the rotated label is upside down, hide it\r\n        mediump float rotated \x3d mod(a_angle + u_mapRotation, 256.0);\r\n        delta_z +\x3d (1.0 - step(u_keepUpright, 0.0)) * step(64.0, rotated) * (1.0 - step(192.0, rotated)); //ie. z +\x3d (flip \x3e 0) \x26\x26 (64 \x3c\x3d rotated) \x26\x26 (rotated \x3c 192)\r\n\r\n        // u_level is the current service level adjusted for the change in font size\r\n        delta_z +\x3d 1.0 - step(a_minLevel, u_level); // Test if (level \x3c minLevel)\r\n        delta_z +\x3d step(a_maxLevel, u_level); // Test if (maxLevel \x3c\x3d level)\r\n\r\n        // calculate the alpha given the change in the fade and the fade-speed\r\n        lowp float alpha \x3d clamp((u_fadeChange - a_labelMinLevel) / u_fadeSpeed, 0.0, 1.0);\r\n\r\n        // if the speed is positive we are zooming in and therefore we need to 'fade-in'. Else we need to 'fade-out'\r\n        v_transparency \x3d (u_fadeSpeed \x3e\x3d 0.0 ? alpha : 1.0 - alpha);\r\n\r\n        // now deal with the min/max fade-levels. If we exceeded the level we simply snap to 0 or 1\r\n        if (u_maxfadeLevel \x3c a_labelMinLevel)\r\n        {\r\n          v_transparency \x3d 0.0;\r\n        }\r\n        if (u_minfadeLevel \x3e\x3d a_labelMinLevel)\r\n        {\r\n          v_transparency \x3d 1.0;\r\n        }\r\n\r\n        // if label had been faded out, clip it\r\n        delta_z +\x3d step(v_transparency, 0.0);\r\n\r\n        vec2 offset \x3d C_OFFSET_PRECISION * a_vertexOffset;\r\n\r\n        v_size \x3d abs(offset);\r\n\r\n      #ifdef SDF\r\n        offset \x3d (120.0 / 86.0) * offset;\r\n      #endif // SDF\r\n\r\n      #ifdef DD\r\n        mediump float icon_size \x3d a_size;\r\n      #else\r\n        mediump float icon_size \x3d u_size;\r\n      #endif // DD\r\n        gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * icon_size * vec4(offset, delta_z, 0.0);\r\n\r\n        float opacity;\r\n\r\n      #ifdef SDF\r\n      #ifdef DD\r\n        v_color \x3d a_color;\r\n      #else\r\n        v_color \x3d u_color;\r\n      #endif // DD\r\n        opacity \x3d u_opacity;\r\n      #else // SDF\r\n      #ifdef DD\r\n        opacity \x3d a_color.w;\r\n      #else\r\n        opacity \x3d u_opacity;\r\n      #endif // DD\r\n      #endif // SDF\r\n\r\n      #ifdef ID\r\n        v_id \x3d u_id / 255.0;\r\n      #endif // ID\r\n\r\n        v_tex \x3d a_tex.xy / u_mosaicSize;\r\n        v_transparency *\x3d opacity;\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d\"iconFS\"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      uniform lowp sampler2D u_texture; // SDF texture\r\n    #ifdef SDF\r\n      uniform lowp vec4 u_color; // a color to override the one of the vertex\r\n      uniform lowp vec4 u_outlineColor;\r\n      uniform mediump float u_outlineSize;\r\n    #endif // SDF\r\n\r\n      varying mediump vec2 v_tex;\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n      varying mediump vec2 v_size;\r\n\r\n    #ifdef SDF\r\n      varying lowp vec4 v_color;\r\n    #endif // SDF\r\n\r\n    #ifdef ID\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      // we need the conversion function from RGBA to float\r\n      $rgba2floatFunc\r\n\r\n      vec4 mixColors(vec4 color1, vec4 color2) {\r\n        // perform un-premultiplied over operator (see https://en.wikipedia.org/wiki/Alpha_compositing#Alpha_blending)\r\n        // we use pre-multiplied colors hence the need for this kind of mixing. At lease we save ourselves an extra division...\r\n        float compositeAlpha \x3d color2.a + color1.a * (1.0 - color2.a);\r\n        vec3 compositeColor \x3d color2.rgb + color1.rgb * (1.0 - color2.a);\r\n\r\n        return vec4(compositeColor, compositeAlpha);\r\n      }\r\n\r\n      void main()\r\n      {\r\n      #ifdef SDF\r\n        lowp vec4 fillPixelColor \x3d v_color;\r\n\r\n        // calculate the distance from the edge [-0.5, 0.5]\r\n        float d \x3d rgba2float(texture2D(u_texture, v_tex)) - 0.5;\r\n\r\n        // Work around loss of precision for 'd \x3d 0.0'.\r\n        // '0' gets normalised to 0.5 * 256 \x3d 128 before float packing, but can only\r\n        // be stored in the texture as 128 / 255 \x3d 0.502.\r\n        // see: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/7058#issuecomment-603110\r\n        const float diff \x3d (128.0 / 255.0 - 0.5);\r\n\r\n        // adjust all values, not just those close to 0, to avoid discontinuities in\r\n        // the outlines of other shapes e.g. circles\r\n        d \x3d d - diff;\r\n\r\n        // the soft edge ratio is about 1.5 pixels allocated for the soft edge.\r\n        // 1 / 86 represents a single pixel given the the size of the SDF is 128 and we add 4 pixels margins to deal with\r\n        // other non SDF types.\r\n        // The rasterized geometry takes only 86 pixels because of the extra 16 pixels margin for the outline.\r\n        const float sofetEdgeRatio \x3d 0.248062016; // \x3d\x3d\x3e (32.0 / 86.0) / 1.5;\r\n        float size \x3d max(v_size.x, v_size.y);\r\n        float dist \x3d d * sofetEdgeRatio * size;\r\n\r\n        // set the fragment's transparency according to the distance from the edge\r\n        fillPixelColor *\x3d clamp(0.5 - dist, 0.0, 1.0);\r\n\r\n        // count for the outline\r\n        // therefore tint the entire icon area.\r\n        if (u_outlineSize \x3e 0.25) {\r\n          lowp vec4 outlinePixelColor \x3d u_outlineColor;\r\n          // the outline limit ratio is derived from the 16 pixels allocated for the outline and the fact that 1/86 represents\r\n          // a single pixel.\r\n          const float outlineLimitRatio \x3d (16.0 / 86.0);\r\n          float clampedOutlineSize \x3d sofetEdgeRatio * min(u_outlineSize, outlineLimitRatio * max(v_size.x, v_size.y));\r\n\r\n          outlinePixelColor *\x3d clamp(0.5 - (abs(dist) - clampedOutlineSize), 0.0, 1.0);\r\n\r\n          // finally combine the outline and the fill colors\r\n          gl_FragColor \x3d v_transparency * mixColors(fillPixelColor, outlinePixelColor);\r\n        }\r\n        else {\r\n          gl_FragColor \x3d v_transparency * fillPixelColor;\r\n        }\r\n      #else // not an SDF\r\n        lowp vec4 texColor \x3d texture2D(u_texture, v_tex);\r\n        gl_FragColor \x3d v_transparency * texColor;\r\n      #endif // SDF\r\n\r\n      #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n      #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\x3c/snippets\x3e\r\n\r\n",
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/textShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link module:esri/views/vectorTiles/renderers/vtShaderSnippets vtShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"rgba2floatFunc"\x3e\r\n    \x3c![CDATA[\r\n    float rgba2float(vec4 rgba) {\r\n      return dot(rgba, vec4(1.0/16777216.0, 1.0/65535.0, 1.0/256.0, 1.0));\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textVS"\x3e\r\n    \x3c![CDATA[\r\n      attribute vec2 a_pos;\r\n      attribute vec2 a_vertexOffset;\r\n      attribute vec4 a_tex;\r\n      attribute vec4 a_levelInfo;\r\n\r\n      uniform lowp vec4 u_color; // always defined as halo does not support data driven but text does\r\n    #ifdef DD\r\n      attribute vec4 a_color;\r\n    #endif // DD\r\n      varying lowp vec4 v_color;\r\n\r\n    #ifdef DD\r\n      attribute mediump float a_size;\r\n    #else\r\n      uniform mediump float u_size;\r\n    #endif // DD\r\n      varying mediump float v_size;\r\n\r\n    #ifdef ID\r\n      uniform mediump vec4 u_id;\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n\r\n      // attribute bool a_visible; // --\x3e a one bit controlling the visibility of the vertex\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n\r\n      // the size of the mosaic given in pixels\r\n      uniform vec2 u_mosaicSize;\r\n\r\n      // the z of the layer. Given by the order of the layers in the style\r\n      uniform mediump float u_depth;\r\n\r\n      // the map\'s rotation from the north\r\n      uniform mediump float u_mapRotation;\r\n      uniform mediump float u_level;\r\n\r\n      // indicate whether the current set of iconst should be kept upright when the map is rotated\r\n      uniform lowp float u_keepUpright;\r\n\r\n      // the rate of the change in the opacity (fade) of the icons\r\n      uniform mediump float u_fadeSpeed;\r\n\r\n      // the low level we transition (to/from)\r\n      uniform mediump float u_minfadeLevel;\r\n\r\n      // the high level we transition (to/from)\r\n      uniform mediump float u_maxfadeLevel;\r\n\r\n      // the amount of fade given teh current time past the last recorded level\r\n      uniform mediump float u_fadeChange;\r\n\r\n      // the opacity of the layer given by the painter\r\n      uniform mediump float u_opacity;\r\n\r\n      // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n      varying lowp vec2 v_tex;\r\n\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n      // the vertex offsets are given in integers, therefore in order to maintain a reasonable precission we multiply the values\r\n      // by 16 and then at the shader devide by the same number\r\n      const float offsetPrecision \x3d 1.0 / 32.0;\r\n\r\n      // outline position and appearance\r\n      const mediump float edgePos \x3d 0.75; // defined by the SDF encoding\r\n      uniform mediump float u_edgeDistance;\r\n      uniform mediump float u_edgeBlur;\r\n      uniform mediump float u_antialiasingWidth; // antialiasing (factors in the pixel_ratio for high res devices)\r\n\r\n      varying mediump float v_edgeDistance; // will factor in the size\r\n      varying mediump float v_edgeWidth; // will factor in the size\r\n\r\n      uniform lowp float u_halo; // needed to avoid using the color attribute for halo\r\n\r\n      void main()\r\n      {\r\n        mediump float a_labelMinLevel \x3d a_levelInfo[0];\r\n        mediump float a_angle        \x3d a_levelInfo[1];\r\n        mediump float a_minLevel    \x3d a_levelInfo[2];\r\n        mediump float a_maxLevel    \x3d a_levelInfo[3];\r\n\r\n        // if the given vertex should not be visible simply clip it by adding it a value that will push it outside the clipping plane\r\n        mediump float delta_z \x3d 0.0;\r\n\r\n        // TODO: force clipping the vertex in case that the vertex isn\'t visible\r\n        //delta_z +\x3d a_visible ? 0.0 : 1.0;\r\n\r\n        // If the label rotates with the map, and if the rotated label is upside down, hide it\r\n        mediump float rotated \x3d mod(a_angle + u_mapRotation, 256.0);\r\n        delta_z +\x3d (1.0 - step(u_keepUpright, 0.0)) * step(64.0, rotated) * (1.0 - step(192.0, rotated)); //ie. z +\x3d (flip \x3e 0) \x26\x26 (64 \x3c\x3d rotated) \x26\x26 (rotated \x3c 192)\r\n\r\n        // u_level is the current service level adjusted for the change in font size\r\n        delta_z +\x3d 1.0 - step(a_minLevel, u_level); // Test if (level \x3c minLevel)\r\n        delta_z +\x3d step(a_maxLevel, u_level); // Test if (maxLevel \x3c\x3d level)\r\n\r\n        // calculate the alpha given the change in the fade and the fade-speed\r\n        lowp float alpha \x3d clamp((u_fadeChange - a_labelMinLevel) / u_fadeSpeed, 0.0, 1.0);\r\n\r\n        // if the speed is positive we are zooming in and therefore we need to \'fade-in\'. Else we need to \'fade-out\'\r\n        v_transparency \x3d (u_fadeSpeed \x3e\x3d 0.0 ? alpha : 1.0 - alpha);\r\n\r\n        // now deal with the min/max fade-levels. If we exceeded the level we simply snap to 0 or 1\r\n        if (u_maxfadeLevel \x3c a_labelMinLevel)\r\n        {\r\n          v_transparency \x3d 0.0;\r\n        }\r\n        if (u_minfadeLevel \x3e\x3d a_labelMinLevel)\r\n        {\r\n          v_transparency \x3d 1.0;\r\n        }\r\n\r\n        // if label has been faded out, clip it\r\n        delta_z +\x3d step(v_transparency, 0.0);\r\n\r\n        v_tex \x3d a_tex.xy / u_mosaicSize;\r\n\r\n      #ifdef DD\r\n        if (u_halo \x3e 0.5)\r\n        {\r\n          v_color \x3d u_color;\r\n          v_transparency *\x3d u_opacity;\r\n        }\r\n        else\r\n        {\r\n          v_color \x3d a_color;\r\n          // opacity already factored in a_color\r\n        }\r\n      #else\r\n        v_color \x3d u_color;\r\n        v_transparency *\x3d u_opacity;\r\n      #endif // DD\r\n\r\n      #ifdef DD\r\n        v_size \x3d a_size;\r\n      #else\r\n        v_size \x3d u_size;\r\n      #endif // DD\r\n\r\n      #ifdef ID\r\n        v_id \x3d u_id / 255.0;\r\n      #endif // ID\r\n\r\n        v_edgeDistance \x3d edgePos - u_edgeDistance / v_size;\r\n        v_edgeWidth \x3d (u_antialiasingWidth + u_edgeBlur) / v_size;\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * v_size * vec4(offsetPrecision * a_vertexOffset, delta_z, 0.0);\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textFS"\x3e\r\n    \x3c![CDATA[\r\n      uniform lowp sampler2D u_texture;\r\n      uniform mediump float u_edgeDistance;\r\n\r\n      varying lowp vec2 v_tex;\r\n      varying lowp float v_transparency;\r\n      varying lowp vec4 v_color;\r\n      varying mediump float v_edgeWidth;\r\n      varying mediump float v_edgeDistance;\r\n\r\n    #ifdef ID\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      // this is taken from http://www.valvesoftware.com/publications/2007/SIGGRAPH2007_AlphaTestedMagnification.pdf\r\n      // and https://www.mapbox.com/blog/text-signed-distance-fields/\r\n      // http://metalbyexample.com/rendering-text-in-metal-with-signed-distance-fields/\r\n\r\n      void main()\r\n      {\r\n        // read the distance from the SDF texture\r\n        lowp float dist \x3d texture2D(u_texture, v_tex).a;\r\n\r\n        // use a smooth-step in order to calculate the geometry of the shape given by the distance field\r\n        mediump float alpha \x3d smoothstep(v_edgeDistance - v_edgeWidth, v_edgeDistance + v_edgeWidth, dist) * v_transparency;\r\n\r\n        gl_FragColor \x3d alpha * v_color;\r\n\r\n      #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n      #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\x3c/snippets\x3e\r\n\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/tileInfo.vs.glsl":"attribute vec2 a_pos;\r\n\r\nuniform highp mat4 u_transformMatrix;\r\nuniform mediump vec2 u_normalized_origin;\r\nuniform mediump float u_depth;\r\nuniform mediump float u_coord_ratio;\r\nuniform mediump vec2 u_delta; // in tile coordinates\r\nuniform mediump vec2 u_dimensions; // in tile coordinates\r\n\r\nvarying mediump vec2 v_tex;\r\n\r\nvoid main() {\r\n  mediump vec2 offests \x3d u_coord_ratio * vec2(u_delta + a_pos * u_dimensions);\r\n  gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(offests, 0.0, 1.0);\r\n\r\n  v_tex \x3d a_pos;\r\n}\r\n",
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/tileInfo.fs.glsl":"uniform mediump sampler2D u_texture;\r\nvarying mediump vec2 v_tex;\r\n\r\nvoid main(void) {\r\n  lowp vec4 color \x3d texture2D(u_texture, v_tex);\r\n  gl_FragColor \x3d 0.75 * color;\r\n}\r\n","url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/bitblit.vs.glsl":"attribute vec2 a_pos;\r\nattribute vec2 a_tex;\r\n\r\nvarying mediump vec2 v_uv;\r\n\r\nvoid main(void) {\r\n  gl_Position \x3d vec4(a_pos, 0.0, 1.0);\r\n  v_uv \x3d a_tex;\r\n}\r\n",
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/bitblit.fs.glsl":"\tuniform lowp sampler2D u_tex;\r\n\tuniform lowp float u_opacity;\r\n\r\n\tvarying mediump vec2 v_uv;\r\n\r\n\tvoid main() {\r\n\t\tlowp vec4 color \x3d texture2D(u_tex, v_uv);\r\n\r\n    // Note: output in pre-multiplied alpha for correct alpha compositing\r\n\t\tgl_FragColor \x3d color *  u_opacity;\r\n\t}\r\n","url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/stencil.vs.glsl":"attribute vec2 a_pos;\r\n\r\nvoid main() {\r\n  gl_Position \x3d vec4(a_pos, 0.0, 1.0);\r\n}\r\n",
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/stencil.fs.glsl":"void main() {\r\n  gl_FragColor \x3d vec4(1.0, 1.0, 1.0, 1.0);\r\n}\r\n","url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/background.vs.glsl":"attribute vec2 a_pos;\r\n\r\nuniform highp mat4 u_transformMatrix;\r\nuniform mediump vec2 u_normalized_origin;\r\nuniform mediump float u_coord_range;\r\nuniform mediump float u_depth;\r\n\r\nvoid main() {\r\n  gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(u_coord_range * a_pos, 0.0, 1.0);\r\n}\r\n",
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/background.fs.glsl":"uniform lowp vec4 u_color;\r\nvoid main() {\r\n  gl_FragColor \x3d u_color;\r\n}","url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/tileInfo.vs.glsl":"attribute vec2 a_pos;\r\n\r\nuniform highp mat4 u_transformMatrix;\r\nuniform mediump vec2 u_normalized_origin;\r\nuniform mediump float u_depth;\r\nuniform mediump float u_coord_ratio;\r\nuniform mediump vec2 u_delta; // in tile coordinates\r\nuniform mediump vec2 u_dimensions; // in tile coordinates\r\n\r\nvarying mediump vec2 v_tex;\r\n\r\nvoid main() {\r\n  mediump vec2 offests \x3d u_coord_ratio * vec2(u_delta + a_pos * u_dimensions);\r\n  gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(offests, 0.0, 1.0);\r\n\r\n  v_tex \x3d a_pos;\r\n}\r\n",
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/tileInfo.fs.glsl":"uniform mediump sampler2D u_texture;\r\nvarying mediump vec2 v_tex;\r\n\r\nvoid main(void) {\r\n  lowp vec4 color \x3d texture2D(u_texture, v_tex);\r\n  gl_FragColor \x3d 0.75 * color;\r\n}\r\n","*now":function(a){a(['dojo/i18n!*preload*esri/layers/nls/VectorTileLayerImpl*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw"]'])},
"*noref":1}});
define("dojo/_base/lang dojo/has dojo/dom-construct dojo/dom-style dojo/io-query ../geometry/Extent ../geometry/screenUtils ../geometry/scaleUtils ../SpatialReference ../config ../lang ../domUtils ../urlUtils ../kernel ./layer ./TileInfo ./unitBezier ./vectorTiles/request ./vectorTiles/core/promiseUtils ./vectorTiles/core/urlUtils ./vectorTiles/geometry/support/spatialReferenceUtils ./vectorTiles/layers/support/vectorTileLayerLoader ./vectorTiles/views/vectorTiles/style/StyleRepository ./vectorTiles/views/vectorTiles/VectorTileContainer ./vectorTiles/views/vectorTiles/VectorTileDisplayObject ./vectorTiles/views/vectorTiles/TileHandler ./vectorTiles/views/2d/engine/StageGL ./vectorTiles/views/2d/FrameBudget ./vectorTiles/views/2d/tiling/TileInfoView ./vectorTiles/views/2d/tiling/TileStrategy ./vectorTiles/views/2d/tiling/TileKey ./vectorTiles/views/2d/tiling/TileQueue ./vectorTiles/views/webgl/webgl-utils".split(" "),function(a,
d,b,c,e,f,g,h,n,k,m,q,l,p,u,t,r,v,w,x,y,z,A,B,H,J,M,K,D,E,I,F,C){var G=r.ease;g=u.createSubclass({declaredClass:"esri.layers.VectorTileLayer",_mapsWithAttribution:["World_Basemap","World_Basemap_v2","World_Basemap_GCS_v2","World_Basemap_WGS84"],_eventMap:{"style-change":["style"]},constructor:function(a,b){this._frame=this._frame.bind(this);this._params=b||{};b&&b.tileServers&&b.tileServers.length&&(this.tileServers=b.tileServers=b.tileServers.map(function(a){return l.getAbsoluteUrl(a)},this));this._viewState=
{scale:0,width:0,height:0,size:[0,0],rotation:0,resolution:1,center:[0,0],worldScreenWidth:0,spatialReference:null,toScreen:function(a,b){var c=this.center[1]+this.resolution*this.height*.5;return a[0]=(b[0]-(this.center[0]-this.resolution*this.width*.5))/this.resolution,a[1]=(c-b[1])/this.resolution,a},toMap:function(a,b){var c=this.center[1]+this.resolution*this.height*.5;return a[0]=this.center[0]-this.resolution*this.width*.5+b[0]*this.resolution,a[1]=c-b[1]*this.resolution,a}};this._budget=new K(6);
this._renderParameters={budget:this._budget,state:this._viewState,devicePixelRatio:window.devicePixelRatio,stationary:!0};this._updateParameters={budget:this._budget,state:this._viewState,devicePixelRatio:window.devicePixelRatio,stationary:!0};this.setStyle(a);this.registerConnectEvents()},setStyle:function(a){return this.loadStyle(a)},getStyle:function(){return this.currentStyleInfo&&this.currentStyleInfo.style||null},opacity:1,setOpacity:function(a){this.opacity!=a&&this.onOpacityChange(this.opacity=
a)},onOpacityChange:function(){},_pinching:!1,_refreshTS:null,_reCheckTS:/[\?\&]_ts=/gi,_reReplaceTS:/([\?\&]_ts=)[0-9]+/gi,addTimestampToURL:function(a){var b=this._refreshTS;return b&&(this._reCheckTS.test(a)?a=a.replace(this._reReplaceTS,"$$$1"+b):a+=(-1===a.indexOf("?")?"?":"\x26")+"_ts\x3d"+b),a},getTileUrl:function(a,b,c){var d=this._getToken(),f=this._url&&this._url.query,g=this.tileServers[b%this.tileServers.length];return g=g.replace(/\{z\}/gi,a.toString()).replace(/\{level\}/gi,a.toString()).replace(/\{y\}/gi,
b.toString()).replace(/\{row\}/gi,b.toString()).replace(/\{x\}/gi,c.toString()).replace(/\{col\}/gi,c.toString()),f&&(g+="?"+e.objectToQuery(f)),!d||f&&f.token||(g+=(-1===g.indexOf("?")?"?":"\x26")+"token\x3d"+d),g=this.addTimestampToURL(g),l.addProxy(g)},loadStyle:function(a){if(this._loadingPromise&&"string"==typeof a&&this.url===a)return this._loadingPromise;this._stopDisplay();var b=this._loadingPromise;return this._loadingPromise=z.loadMetadata(a).then(function(a){this.url=a.url;this._url=a.parsedUrl;
this.currentStyleInfo={serviceUrl:a.serviceUrl,styleUrl:a.styleUrl,style:a.style,layerDefinition:a.layerDefinition};this.styleRepository=new A(a.style,a);this._read(a.layerDefinition);this.onStyleChange(this.getStyle())}.bind(this)).then(function(){this.loaded||(this.loaded=!0,this.onLoad(this));this.suspended||this._tileHandler||this._startDisplay()}.bind(this)).otherwise(function(a){throw this._errorHandler(a),a;}.bind(this)),b&&!b.isFulfilled()&&b.cancel(),this._loadingPromise},refresh:function(){this.suspended||
(this._refreshTS=Date.now(),this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD))},takeScreenshot:function(a){return this._stageGL?this._stageGL.takeScreenshot(a):w.reject("No valid GL context!")},_setMap:function(d,e,f){this.inherited(arguments);this._map=d;var g=this._div=b.create("div",null,e);if(c.set(g,{position:"absolute",width:d.width+"px",height:d.height+"px",overflow:"visible",opacity:this.opacity}),this._onResizeHandle=d.on("resize",a.hitch(this,this._onResizeHandler)),
this._onOpacityHandle=this.on("opacity-change",a.hitch(this,this._opacityChangeHandler)),this._onScaleVisHandle=this.on("scale-visibility-change",a.hitch(this,function(){})),this._onVisibilityHandle=this.on("visibility-change",a.hitch(this,function(){})),this._stageGL=new M,this._stageGL.setElement(this._stageGL.createElement()),this._div.appendChild(this._stageGL.element),this._stageGL.parent={requestChildRender:this._scheduleRender.bind(this)},this._stageGL.attach(this._renderParameters),this._startDisplay(),
this.evaluateSuspension(),this.suspended&&!d.loaded)var h=d.on("load",a.hitch(this,function(){h.remove();this.evaluateSuspension()}));return g},_unsetMap:function(a,c){this._map=null;this.suspended||this._stopDisplay();this._stageGL.detach(this._renderParameters);this._stageGL=null;b.destroy(this._div);this._div=null;this._handles&&this._handles.forEach(function(a){a.remove()});this._handles=null;this._onResizeHandle=this._onResizeHandle&&this._onResizeHandle.remove()&&null;this._onOpacityHandle=
this._onOpacityHandle&&this._onOpacityHandle.remove()&&null;this._onScaleVisHandle=this._onScaleVisHandle&&this._onScaleVisHandle.remove()&&null;this._onVisibilityHandle=this._onVisibilityHandle&&this._onVisibilityHandle.remove()&&null;this.inherited(arguments)},_read:function(a){this.version=a.currentVersion||a.version;this.fullExtent=new f(a.fullExtent);this.initialExtent=new f(a.initialExtent);this.spatialReference=this.fullExtent.spatialReference;this.tileInfo=new t(a.tileInfo);this.tileInfo.size=
[this.tileInfo.cols,this.tileInfo.height];this.tileInfo.spatialReference.isWrappable=this.tileInfo.spatialReference._isWrappable();this.tileInfo.scales=this.tileInfo.lods.map(function(a){return a.scale});this.tileInfo.scaleToZoom=function(a){for(var b=this.scales,c=b.length-1,d=0;c>d;d++){var e=b[d],f=b[d+1];if(a>=e)break;if(f===a)return d+1;if(e>a&&a>f)return d+1-(a-f)/(e-f)}return d};this._hasMin||this.setMinScale(a.minScale);this._hasMax||this.setMaxScale(a.maxScale);a.tileMap&&(this.tileIndexUrl=
x.join(this.currentStyleInfo.serviceUrl,a.tileMap));this._params.tileServers||(this.currentStyleInfo.serviceUrl?this.tileServers=a.tiles.map(function(a,b,c){return x.join(this.currentStyleInfo.serviceUrl,a)},this):this.tileServers=a.tiles);a=null;this.currentStyleInfo.serviceUrl&&(a=x.urlToObject(this.currentStyleInfo.serviceUrl),a=this._getDefaultAttribution(a.path));a?(this.attributionDataUrl=a,this.hasAttributionData=!0):(this.attributionDataUrl=null,this.hasAttributionData=!1)},_getDefaultAttribution:function(a){var b=
a.match(/^https?:\/\/(basemaps|basemapsbeta|basemapsdev)\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i);if(b&&(a=b[3])){var c,b=b[2]||"";a=a.toLowerCase();for(var d=0,e=this._mapsWithAttribution.length;e>d;d++)if(c=this._mapsWithAttribution[d],-1<c.toLowerCase().indexOf(a))return a=window.location.protocol,("http:"===a||"https:"===a?a:"https:")+"//static.arcgis.com/attribution/Vector"+b+"/"+c}},_startDisplay:function(){var a={styleRepository:this.styleRepository,
tileIndexUrl:this.tileIndexUrl,tileInfo:this.tileInfo,fullExtent:{width:this.fullExtent.getWidth()},getTileUrl:this.getTileUrl.bind(this)};this._renderParameters.devicePixelRatio=this._updateParameters.devicePixelRatio=window.devicePixelRatio;this._vectorTileContainer=new B;this._stageGL.addChild(this._vectorTileContainer);this._viewState.spatialReference=this.tileInfo.spatialReference;this._tileInfoView=new D(this.tileInfo,this.fullExtent);this._tileRequests=new Map;this._tileHandler=new J(a,this._scheduleUpdate.bind(this),
window.devicePixelRatio||1,!1,this._tileInfoView);this._viewState.spatialReference=this.spatialReference;this._tileHandler.start().then(function(){this._fetchQueue=new F({tileInfoView:this._tileInfoView,process:this._getTileData.bind(this)});this._tileStrategy=new E({cachePolicy:"keep",acquireTile:this._acquireTile.bind(this),releaseTile:this._releaseTile.bind(this),tileInfoView:this._tileInfoView});this._vectorTileContainer.initialize(this._tileHandler.spriteMosaic,this._tileHandler.glyphMosaic,
this.tileInfo,this._tileInfoView);this._scheduleUpdate()}.bind(this))},_stopDisplay:function(){this._tileStrategy&&(this._renderRequested=!1,this._updateRequested=!1,this._frameRequested=!1,this._animation&&(this._animation.stop(),this._animation=null),this._tileRequests.forEach(function(a){a.cancel("cancel")}),this._vectorTileContainer.removeAllChildren(),this._stageGL.removeChild(this._vectorTileContainer),this._vectorTileContainer=null,this._tileHandler.stop(),this._tileHandler.destroy(),this._tileStrategy.destroy(),
this._tileInfoView=this._tileHandler=this._tileStrategy=null)},_scheduleRender:function(){this._renderRequested=!0;this._map&&this._tileStrategy&&this._scheduleFrame()},_scheduleUpdate:function(){this._updateRequested=!0;this._map&&this._tileStrategy&&this._scheduleFrame()},_scheduleFrame:function(){this._map&&(this._frameRequested||(this._frameRequested=!0,Q(this._frame)))},_frame:function(){if(this._frameRequested){this._frameRequested=!1;this._renderParameters.devicePixelRatio!==window.devicePixelRatio&&
(this._renderParameters.devicePixelRatio=this._updateParameters.devicePixelRatio=window.devicePixelRatio,this._stopDisplay(),this._startDisplay());this._animation&&(this._animation.step(),this._animation.running||(this._animation=null));this._updateParameters.stationary=this._renderParameters.stationary=!this._animation&&!this._pinching&&!this._panning;this._budget.reset();this._viewState.resolution=this._viewState.scale/(39.37*h.getUnitValueForSR(this.spatialReference)*96);var a=0;this._viewState.spatialReference&&
this._viewState.spatialReference._isWrappable()&&(a=y.getInfo(this._viewState.spatialReference),a=a.valid[1]-a.valid[0]);this._viewState.worldScreenWidth=Math.round(a/this._viewState.resolution);this._renderRequested&&(this._renderRequested=!1,this._stageGL.doRender(this._renderParameters));this._updateRequested&&(this._updateRequested=!1,this._fetchQueue.pause(),this._fetchQueue.state=this._updateParameters.state,this._tileStrategy.update(this._updateParameters),this._fetchQueue.resume());this._animation&&
(this._scheduleRender(),this._scheduleUpdate());this._checkUpdating()}},_setViewState:function(b){b=a.mixin(this._viewState,b);b.center.type&&(b.center=[b.center.x,b.center.y]);this._scheduleRender();this._scheduleUpdate()},_animateViewState:function(a,b){var c=b.immediate||0===k.defaults.map.zoomDuration;if(this._animation=null,c)return void this._setViewState(a);var c=this._viewState,d=k.defaults.map.zoomDuration,e=P()+16,f=c.center[0],g=c.center[1],h=c.scale,l=Array.isArray(a.center)?a.center[0]:
a.center.x,m=Array.isArray(a.center)?a.center[1]:a.center.y,n=a.scale||c.scale,p=this;this._animation={running:!0,stop:function(){this.running=!1},step:function(){if(this.running){var a=(P()+16-e)/d;1<=a&&(a=1,this.running=!1);a=G(a);p._setViewState({center:[f+(l-f)*a,g+(m-g)*a],scale:h+(n-h)*a})}}};this._scheduleRender();this._scheduleUpdate()},_checkUpdating:function(){var a=!0;this._tileRequests.forEach(function(b){a=a&&b.isFulfilled()});a&&(a=this._tileStrategy.tiles.every(function(a){return a.attached}));
a?this._fireUpdateEnd():this._fireUpdateStart()},_acquireTile:function(a){var b=I.pool.acquire();b.set(a.level,a.row,a.col,a.world);a=this._tileHandler.getRefKey(b);var c=this._tileHandler.getStyleRepository(),d=H.pool.acquire(b,a,this.tileInfo,c,this._tileHandler.glyphMosaic,0);a=this._fetchQueue.push(b).then(function(a){d.setData(a.tileData,a.workerId,a.connection);d.once("attach",this._scheduleUpdate.bind(this));this._vectorTileContainer.addChild(d)}.bind(this));return this._tileRequests.set(b.id,
a),d},_releaseTile:function(a){var b=a.key.id,c=this._tileRequests.get(b);c.isFulfilled()||c.cancel();this._tileRequests["delete"](b);this._vectorTileContainer.removeChild(a);this._scheduleUpdate();a.once("detach",function(){H.pool.release(a)})},_getTileData:function(a){return this._tileHandler.getTileData(a,0)},onStyleChange:function(a){},_opacityChangeHandler:function(a){this._div&&(this._div.style.opacity=a.opacity)},_onResizeHandler:function(a){var b=this._div&&this._div.style;b&&(b.width=a.width+
"px",b.height=a.height+"px",this._map,this._setViewState({center:a.extent.getCenter(),width:a.width,height:a.height,size:[a.width,a.height]}))},onResume:function(){var b=this._map;this.inherited(arguments);q.show(this._div);this._setViewState({center:b.extent.getCenter(),scale:b.getScale(),width:b.width,height:b.height,size:[b.width,b.height],spatialReference:b.spatialReference});this._handles=[b.on("pan-end",a.hitch(this,this._onPanEndHandler)),b.on("pan",a.hitch(this,this._onPanExtentChangeHandler)),
b.on("extent-change",a.hitch(this,this._onExtentChangeHandler)),b.on("scale",a.hitch(this,this._onScaleHandler))]},onSuspend:function(){this.inherited(arguments);q.hide(this._div);this._handles.forEach(function(a){a.remove()});this._handles=null},_onPanEndHandler:function(a){this._panning=!1;this._setViewState({center:a.extent.getCenter(),scale:this._map.getScale()})},_onPanExtentChangeHandler:function(a){this._panning=!0;this._animation&&(this._animation.stop(),this._animation=null);this._setViewState({center:a.extent.getCenter(),
scale:this._map.getScale()})},_onExtentChangeHandler:function(a){var b=this._pinching||a.immediate;this._animateViewState({center:a.extent.getCenter(),scale:a.lod.scale},{immediate:b});this._pinching=!1},_onScaleHandler:function(a){this._animation&&(this._animation.stop(),this._animation=null);var b=this._map;if(b._zoomAnimDiv.extent)return this._panning=!1,this._pinching=!1,void this._animateViewState({center:b._zoomAnimDiv.extent.getCenter(),scale:b._zoomAnimDiv.newLod.scale},{immediate:a.immediate});
var c,d,e,f,g;a=b.navigationManager;var h=a._dragOrigin,k=b.extent.getCenter(),l=h.x-.5*b.width,h=h.y-.5*b.height,m=b.extent.getWidth()/b.width;a._pinchScale?(this._pinching=!0,c=a._pinchScale,d=m/c,e=l*(d-m),f=h*(d-m),k.x-=e,k.y+=f,g=b.__LOD.scale/c,this._setViewState({center:k,scale:g})):a._zoomEndExtent&&(this._pinching=!1,c=b.getScale()/b.navigationManager._zoomEndLod.scale,d=m/c,e=l*(d-m),f=h*(d-m),k.x-=e,k.y+=f,g=b.navigationManager._zoomEndLod.scale,this._animateViewState({center:k,scale:g},
{immediate:!1}))}});g.ACCESS_TOKEN=null;g.supported=function(){return C.detectWebGL()[0]};var N,P=function(){var a,b=window.performance||{},c=b.now||b.webkitNow||b.msNow||b.oNow||b.mozNow;return void 0!==c?function(){return c.call(b)}:(a=window.performance&&window.performance.timing&&window.performance.timing.navigationStart?window.performance.timing.navigationStart:(new Date).getTime(),function(){return(new Date).getTime()-a})}();n=d("ff");m=d("ie");p=d("webkit");d=d("opera");var L=(new Date).getTime(),
Q=window.requestAnimationFrame;return Q||(N=p&&"webkit"||n&&"moz"||d&&"o"||m&&"ms",Q=window[N+"RequestAnimationFrame"],Q||(Q=function(a){var b=P(),c=Math.max(0,16-(b-L)),d=window.setTimeout(function(){a(P())},c);return L=b+c,d})),g});